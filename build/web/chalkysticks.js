var av=Object.create;var Yh=Object.defineProperty;var uv=Object.getOwnPropertyDescriptor;var cv=Object.getOwnPropertyNames;var lv=Object.getPrototypeOf,hv=Object.prototype.hasOwnProperty;var Xt=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var O=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),g=(s,t)=>{for(var e in t)Yh(s,e,{get:t[e],enumerable:!0})},dv=(s,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of cv(t))!hv.call(s,n)&&n!==e&&Yh(s,n,{get:()=>t[n],enumerable:!(r=uv(t,n))||r.enumerable});return s};var z=(s,t,e)=>(e=s!=null?av(lv(s)):{},dv(t||!s||!s.__esModule?Yh(e,"default",{value:s,enumerable:!0}):e,s));var Wg=O(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});var Kh=class{constructor(t){this.id="",this.includes=[],this.includeJoinBy=",",this.includeKey="include",this.queryParams={},this.activeRecord=t}getUrl(){var t,e,r;let n=this.getBaseUrl(),i=this.getEndpoint(),a=this.getQueryParamsAsString(),f=this.activeRecord.isUsingModifiedEndpoint(),p=f&&this.activeRecord.modifiedEndpointPosition=="before",o=f&&this.activeRecord.modifiedEndpointPosition=="after",u="";return u+=n,u+=i[0]==="/"?i:"/"+i,f&&o&&(!((t=this.activeRecord)===null||t===void 0)&&t.getReferencedEndpoint())?u+="/"+((r=(e=this.activeRecord)===null||e===void 0?void 0:e.getReferencedEndpoint())===null||r===void 0?void 0:r.id)||"":this.id!==""?u+="/"+this.id:!o&&this.activeRecord.id!==""&&(u+="/"+this.activeRecord.id),a&&(u+="?"+a),u=u.replace(/([a-zA-Z0-9])\/\//g,"$1/"),u}getBaseUrl(){return this.activeRecord.getBaseUrl()}getEndpoint(){return this.activeRecord.isUsingModifiedEndpoint()?this.activeRecord.getModifiedEndpoint():this.activeRecord.getEndpoint()}getQueryParam(t){return this.queryParams[t]||""}getQueryParams(){return this.queryParams}getQueryParamsAsString(){let t="";return Object.entries(this.queryParams).sort((e,r)=>e[0].localeCompare(r[0])).forEach((e,r)=>{let n=e[0],i=(e[1]||"")+"";i!=null&&i!=""&&(t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(i))}),this.includeKey&&this.includes.length&&(t+="&"+this.includeKey+"="+this.includes.join(this.includeJoinBy)),t=t.replace(/^&/,""),t}identifier(t){return this.id=t.toString(),this}include(t){return this.includes.push(t),this}queryParam(t,e){return typeof this.queryParams!="object"&&(this.queryParams={}),this.queryParams[t]=e,this}qp(t,e){return this.queryParam(t,e)}};Xh.default=Kh});var ed=O(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});var Jh=class{constructor(t,e={}){this.callbacks=[],this.detail=e,this.eventName=t}clearCallbacks(){this.callbacks=[]}fire(t){let e=this.callbacks.slice(0),r=0,n={detail:Object.assign({},this.detail,t),name:this.eventName};return e.forEach(i=>{i(n),r++}),r}hasCallback(t){return!!this.callbacks.find(e=>e===t)}registerCallback(t){this.callbacks.push(t)}unregisterCallback(t){let e=this.callbacks.indexOf(t);return e>-1?(this.callbacks.splice(e,1),!0):!1}};td.default=Jh});var nd=O(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});var fv=ed(),sd=class{constructor(){this.events={}}dispatch(t,e={}){let r=this.events[t];return r?(r.fire(e),!0):!1}hasEvent(t){return!!this.events[t]}off(t,e){let r=this.events[t];r&&!e?(r.clearCallbacks(),delete this.events[t]):r&&e&&r.callbacks.indexOf(e)>-1&&(r.unregisterCallback(e),r.callbacks.length===0&&delete this.events[t])}on(t,e){let r=this.events[t];r||(r=new fv.default(t,{}),this.events[t]=r),r.registerCallback(e)}once(t,e){let r=n=>{e(n),this.off(t,r)};this.on(t,r)}trigger(t,e={}){return this.dispatch(t,e)}};rd.default=sd});var Ou=O(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var pv=nd(),id=class extends pv.default{get restmc(){return"0.18.1"}constructor(t={}){super(),Object.assign(this,t)}};od.default=id});var ad=O((pP,Qg)=>{"use strict";Qg.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}});var Bt=O((mP,Zg)=>{"use strict";var mv=ad(),Bs=Object.prototype.toString;function ld(s){return Bs.call(s)==="[object Array]"}function ud(s){return typeof s>"u"}function gv(s){return s!==null&&!ud(s)&&s.constructor!==null&&!ud(s.constructor)&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function xv(s){return Bs.call(s)==="[object ArrayBuffer]"}function yv(s){return typeof FormData<"u"&&s instanceof FormData}function wv(s){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&s.buffer instanceof ArrayBuffer,t}function vv(s){return typeof s=="string"}function bv(s){return typeof s=="number"}function Yg(s){return s!==null&&typeof s=="object"}function Cu(s){if(Bs.call(s)!=="[object Object]")return!1;var t=Object.getPrototypeOf(s);return t===null||t===Object.prototype}function Mv(s){return Bs.call(s)==="[object Date]"}function Tv(s){return Bs.call(s)==="[object File]"}function Ev(s){return Bs.call(s)==="[object Blob]"}function Gg(s){return Bs.call(s)==="[object Function]"}function Ov(s){return Yg(s)&&Gg(s.pipe)}function Cv(s){return typeof URLSearchParams<"u"&&s instanceof URLSearchParams}function _v(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function Iv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function hd(s,t){if(!(s===null||typeof s>"u"))if(typeof s!="object"&&(s=[s]),ld(s))for(var e=0,r=s.length;e<r;e++)t.call(null,s[e],e,s);else for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.call(null,s[n],n,s)}function cd(){var s={};function t(n,i){Cu(s[i])&&Cu(n)?s[i]=cd(s[i],n):Cu(n)?s[i]=cd({},n):ld(n)?s[i]=n.slice():s[i]=n}for(var e=0,r=arguments.length;e<r;e++)hd(arguments[e],t);return s}function Dv(s,t,e){return hd(t,function(n,i){e&&typeof n=="function"?s[i]=mv(n,e):s[i]=n}),s}function kv(s){return s.charCodeAt(0)===65279&&(s=s.slice(1)),s}Zg.exports={isArray:ld,isArrayBuffer:xv,isBuffer:gv,isFormData:yv,isArrayBufferView:wv,isString:vv,isNumber:bv,isObject:Yg,isPlainObject:Cu,isUndefined:ud,isDate:Mv,isFile:Tv,isBlob:Ev,isFunction:Gg,isStream:Ov,isURLSearchParams:Cv,isStandardBrowserEnv:Iv,forEach:hd,merge:cd,extend:Dv,trim:_v,stripBOM:kv}});var dd=O((gP,Xg)=>{"use strict";var un=Bt();function Kg(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Xg.exports=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(un.isURLSearchParams(e))n=e.toString();else{var i=[];un.forEach(e,function(p,o){p===null||typeof p>"u"||(un.isArray(p)?o=o+"[]":p=[p],un.forEach(p,function(c){un.isDate(c)?c=c.toISOString():un.isObject(c)&&(c=JSON.stringify(c)),i.push(Kg(o)+"="+Kg(c))}))}),n=i.join("&")}if(n){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}});var tx=O((xP,Jg)=>{"use strict";var Sv=Bt();function _u(){this.handlers=[]}_u.prototype.use=function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};_u.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};_u.prototype.forEach=function(t){Sv.forEach(this.handlers,function(r){r!==null&&t(r)})};Jg.exports=_u});var sx=O((yP,ex)=>{"use strict";var Uv=Bt();ex.exports=function(t,e){Uv.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}});var fd=O((wP,rx)=>{"use strict";rx.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}});var pd=O((vP,nx)=>{"use strict";var Pv=fd();nx.exports=function(t,e,r,n,i){var a=new Error(t);return Pv(a,e,r,n,i)}});var ox=O((bP,ix)=>{"use strict";var Av=pd();ix.exports=function(t,e,r){var n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(Av("Request failed with status code "+r.status,r.config,null,r.request,r))}});var ux=O((MP,ax)=>{"use strict";var Iu=Bt();ax.exports=Iu.isStandardBrowserEnv()?function(){return{write:function(e,r,n,i,a,f){var p=[];p.push(e+"="+encodeURIComponent(r)),Iu.isNumber(n)&&p.push("expires="+new Date(n).toGMTString()),Iu.isString(i)&&p.push("path="+i),Iu.isString(a)&&p.push("domain="+a),f===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(e){var r=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var lx=O((TP,cx)=>{"use strict";cx.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var dx=O((EP,hx)=>{"use strict";hx.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}});var px=O((OP,fx)=>{"use strict";var Lv=lx(),qv=dx();fx.exports=function(t,e){return t&&!Lv(e)?qv(t,e):e}});var gx=O((CP,mx)=>{"use strict";var md=Bt(),Hv=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];mx.exports=function(t){var e={},r,n,i;return t&&md.forEach(t.split(`
`),function(f){if(i=f.indexOf(":"),r=md.trim(f.substr(0,i)).toLowerCase(),n=md.trim(f.substr(i+1)),r){if(e[r]&&Hv.indexOf(r)>=0)return;r==="set-cookie"?e[r]=(e[r]?e[r]:[]).concat([n]):e[r]=e[r]?e[r]+", "+n:n}}),e}});var wx=O((_P,yx)=>{"use strict";var xx=Bt();yx.exports=xx.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),r;function n(i){var a=i;return t&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return r=n(window.location.href),function(a){var f=xx.isString(a)?n(a):a;return f.protocol===r.protocol&&f.host===r.host}}():function(){return function(){return!0}}()});var xd=O((IP,vx)=>{"use strict";var Du=Bt(),Rv=ox(),Fv=ux(),Bv=dd(),Vv=px(),Nv=gx(),$v=wx(),gd=pd();vx.exports=function(t){return new Promise(function(r,n){var i=t.data,a=t.headers,f=t.responseType;Du.isFormData(i)&&delete a["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var o=t.auth.username||"",u=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.Authorization="Basic "+btoa(o+":"+u)}var c=Vv(t.baseURL,t.url);p.open(t.method.toUpperCase(),Bv(c,t.params,t.paramsSerializer),!0),p.timeout=t.timeout;function l(){if(p){var m="getAllResponseHeaders"in p?Nv(p.getAllResponseHeaders()):null,w=!f||f==="text"||f==="json"?p.responseText:p.response,y={data:w,status:p.status,statusText:p.statusText,headers:m,config:t,request:p};Rv(r,n,y),p=null}}if("onloadend"in p?p.onloadend=l:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(l)},p.onabort=function(){p&&(n(gd("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(gd("Network Error",t,null,p)),p=null},p.ontimeout=function(){var w="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(w=t.timeoutErrorMessage),n(gd(w,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},Du.isStandardBrowserEnv()){var h=(t.withCredentials||$v(c))&&t.xsrfCookieName?Fv.read(t.xsrfCookieName):void 0;h&&(a[t.xsrfHeaderName]=h)}"setRequestHeader"in p&&Du.forEach(a,function(w,y){typeof i>"u"&&y.toLowerCase()==="content-type"?delete a[y]:p.setRequestHeader(y,w)}),Du.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),f&&f!=="json"&&(p.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&p.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(w){p&&(p.abort(),n(w),p=null)}),i||(i=null),p.send(i)})}});var Su=O((DP,Tx)=>{"use strict";var At=Bt(),bx=sx(),zv=fd(),jv={"Content-Type":"application/x-www-form-urlencoded"};function Mx(s,t){!At.isUndefined(s)&&At.isUndefined(s["Content-Type"])&&(s["Content-Type"]=t)}function Wv(){var s;return typeof XMLHttpRequest<"u"?s=xd():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(s=xd()),s}function Qv(s,t,e){if(At.isString(s))try{return(t||JSON.parse)(s),At.trim(s)}catch(r){if(r.name!=="SyntaxError")throw r}return(e||JSON.stringify)(s)}var ku={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Wv(),transformRequest:[function(t,e){return bx(e,"Accept"),bx(e,"Content-Type"),At.isFormData(t)||At.isArrayBuffer(t)||At.isBuffer(t)||At.isStream(t)||At.isFile(t)||At.isBlob(t)?t:At.isArrayBufferView(t)?t.buffer:At.isURLSearchParams(t)?(Mx(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):At.isObject(t)||e&&e["Content-Type"]==="application/json"?(Mx(e,"application/json"),Qv(t)):t}],transformResponse:[function(t){var e=this.transitional,r=e&&e.silentJSONParsing,n=e&&e.forcedJSONParsing,i=!r&&this.responseType==="json";if(i||n&&At.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?zv(a,this,"E_JSON_PARSE"):a}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};ku.headers={common:{Accept:"application/json, text/plain, */*"}};At.forEach(["delete","get","head"],function(t){ku.headers[t]={}});At.forEach(["post","put","patch"],function(t){ku.headers[t]=At.merge(jv)});Tx.exports=ku});var Ox=O((kP,Ex)=>{"use strict";var Yv=Bt(),Gv=Su();Ex.exports=function(t,e,r){var n=this||Gv;return Yv.forEach(r,function(a){t=a.call(n,t,e)}),t}});var yd=O((SP,Cx)=>{"use strict";Cx.exports=function(t){return!!(t&&t.__CANCEL__)}});var Dx=O((UP,Ix)=>{"use strict";var _x=Bt(),wd=Ox(),Zv=yd(),Kv=Su();function vd(s){s.cancelToken&&s.cancelToken.throwIfRequested()}Ix.exports=function(t){vd(t),t.headers=t.headers||{},t.data=wd.call(t,t.data,t.headers,t.transformRequest),t.headers=_x.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),_x.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var e=t.adapter||Kv.adapter;return e(t).then(function(n){return vd(t),n.data=wd.call(t,n.data,n.headers,t.transformResponse),n},function(n){return Zv(n)||(vd(t),n&&n.response&&(n.response.data=wd.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})}});var bd=O((PP,kx)=>{"use strict";var Lt=Bt();kx.exports=function(t,e){e=e||{};var r={},n=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],f=["validateStatus"];function p(l,h){return Lt.isPlainObject(l)&&Lt.isPlainObject(h)?Lt.merge(l,h):Lt.isPlainObject(h)?Lt.merge({},h):Lt.isArray(h)?h.slice():h}function o(l){Lt.isUndefined(e[l])?Lt.isUndefined(t[l])||(r[l]=p(void 0,t[l])):r[l]=p(t[l],e[l])}Lt.forEach(n,function(h){Lt.isUndefined(e[h])||(r[h]=p(void 0,e[h]))}),Lt.forEach(i,o),Lt.forEach(a,function(h){Lt.isUndefined(e[h])?Lt.isUndefined(t[h])||(r[h]=p(void 0,t[h])):r[h]=p(void 0,e[h])}),Lt.forEach(f,function(h){h in e?r[h]=p(t[h],e[h]):h in t&&(r[h]=p(void 0,t[h]))});var u=n.concat(i).concat(a).concat(f),c=Object.keys(t).concat(Object.keys(e)).filter(function(h){return u.indexOf(h)===-1});return Lt.forEach(c,o),r}});var Sx=O((AP,Xv)=>{Xv.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var qx=O((LP,Lx)=>{"use strict";var Px=Sx(),Md={};["object","boolean","number","function","string","symbol"].forEach(function(s,t){Md[s]=function(r){return typeof r===s||"a"+(t<1?"n ":" ")+s}});var Ux={},Jv=Px.version.split(".");function Ax(s,t){for(var e=t?t.split("."):Jv,r=s.split("."),n=0;n<3;n++){if(e[n]>r[n])return!0;if(e[n]<r[n])return!1}return!1}Md.transitional=function(t,e,r){var n=e&&Ax(e);function i(a,f){return"[Axios v"+Px.version+"] Transitional option '"+a+"'"+f+(r?". "+r:"")}return function(a,f,p){if(t===!1)throw new Error(i(f," has been removed in "+e));return n&&!Ux[f]&&(Ux[f]=!0,console.warn(i(f," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,f,p):!0}};function tb(s,t,e){if(typeof s!="object")throw new TypeError("options must be an object");for(var r=Object.keys(s),n=r.length;n-- >0;){var i=r[n],a=t[i];if(a){var f=s[i],p=f===void 0||a(f,i,s);if(p!==!0)throw new TypeError("option "+i+" must be "+p);continue}if(e!==!0)throw Error("Unknown option "+i)}}Lx.exports={isOlderVersion:Ax,assertOptions:tb,validators:Md}});var Nx=O((qP,Vx)=>{"use strict";var Fx=Bt(),eb=dd(),Hx=tx(),Rx=Dx(),Uu=bd(),Bx=qx(),cn=Bx.validators;function Mi(s){this.defaults=s,this.interceptors={request:new Hx,response:new Hx}}Mi.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Uu(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;e!==void 0&&Bx.assertOptions(e,{silentJSONParsing:cn.transitional(cn.boolean,"1.0.0"),forcedJSONParsing:cn.transitional(cn.boolean,"1.0.0"),clarifyTimeoutError:cn.transitional(cn.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach(function(l){typeof l.runWhen=="function"&&l.runWhen(t)===!1||(n=n&&l.synchronous,r.unshift(l.fulfilled,l.rejected))});var i=[];this.interceptors.response.forEach(function(l){i.push(l.fulfilled,l.rejected)});var a;if(!n){var f=[Rx,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(i),a=Promise.resolve(t);f.length;)a=a.then(f.shift(),f.shift());return a}for(var p=t;r.length;){var o=r.shift(),u=r.shift();try{p=o(p)}catch(c){u(c);break}}try{a=Rx(p)}catch(c){return Promise.reject(c)}for(;i.length;)a=a.then(i.shift(),i.shift());return a};Mi.prototype.getUri=function(t){return t=Uu(this.defaults,t),eb(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Fx.forEach(["delete","get","head","options"],function(t){Mi.prototype[t]=function(e,r){return this.request(Uu(r||{},{method:t,url:e,data:(r||{}).data}))}});Fx.forEach(["post","put","patch"],function(t){Mi.prototype[t]=function(e,r,n){return this.request(Uu(n||{},{method:t,url:e,data:r}))}});Vx.exports=Mi});var Ed=O((HP,$x)=>{"use strict";function Td(s){this.message=s}Td.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Td.prototype.__CANCEL__=!0;$x.exports=Td});var jx=O((RP,zx)=>{"use strict";var sb=Ed();function Pu(s){if(typeof s!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(n){t=n});var e=this;s(function(n){e.reason||(e.reason=new sb(n),t(e.reason))})}Pu.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Pu.source=function(){var t,e=new Pu(function(n){t=n});return{token:e,cancel:t}};zx.exports=Pu});var Qx=O((FP,Wx)=>{"use strict";Wx.exports=function(t){return function(r){return t.apply(null,r)}}});var Gx=O((BP,Yx)=>{"use strict";Yx.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var Xx=O((VP,Od)=>{"use strict";var Zx=Bt(),rb=ad(),Au=Nx(),nb=bd(),ib=Su();function Kx(s){var t=new Au(s),e=rb(Au.prototype.request,t);return Zx.extend(e,Au.prototype,t),Zx.extend(e,t),e}var le=Kx(ib);le.Axios=Au;le.create=function(t){return Kx(nb(le.defaults,t))};le.Cancel=Ed();le.CancelToken=jx();le.isCancel=yd();le.all=function(t){return Promise.all(t)};le.spread=Qx();le.isAxiosError=Gx();Od.exports=le;Od.exports.default=le});var t0=O((NP,Jx)=>{Jx.exports=Xx()});var Id=O(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});var Cd=class{constructor(){this.storage={}}delete(t){this.storage[t]&&delete this.storage[t]}get(t,e=!1){let r=this.storage[t],n;return r?r.ttl===0?(n=r.value,!e&&this.delete(t)):this.isCachedItemHealthy(r)&&(n=r.value):n=void 0,n}exists(t){return this.storage[t]!==void 0}has(t){return this.get(t,!0)!==void 0}set(t,e,r=0,n=!1){let i=this.has(t),a=Date.now();return i&&this.isImmutable(t)?!1:(this.storage[t]={immutable:n,time:a,ttl:r,value:e},!0)}isCachedItemHealthy(t){let e=Date.now(),r=t.time,n=t.ttl;return r+n>e}isImmutable(t){let e=this.storage[t];return!!(e!=null&&e.immutable)}};_d.default=Cd});var e0=O(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});var Dd=class extends Error{constructor(t,e){super(e),this.status=t,this.text=e}};kd.default=Dd});var Sd=O(Ei=>{"use strict";var ob=Ei&&Ei.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function f(u){try{o(r.next(u))}catch(c){a(c)}}function p(u){try{o(r.throw(u))}catch(c){a(c)}}function o(u){u.done?i(u.value):n(u.value).then(f,p)}o((r=r.apply(s,t||[])).next())})};Object.defineProperty(Ei,"__esModule",{value:!0});var ab=t0(),s0=Id(),ub=Ou(),cb=e0(),Ti=class s extends ub.default{constructor(t="",e={}){var r;super(),this.cacheOptions={defaultTTL:1e3*60*5,enabled:!0,maxSize:100},this.dataKey="data",this.headers={},this.loading=!1,this.method="GET",this.mode="cors",this.responseData={},this.status=0,this.withCredentials=!0,this.dataKey=e.dataKey||this.dataKey,this.withCredentials=(r=e.withCredentials)!==null&&r!==void 0?r:!0,this.url=t.replace(/\?$/,"").replace(/\?&/,"?")}generateCacheKey(t){let{method:e="GET",url:r="",data:n="",headers:i={}}=t,a=["POST","PUT","PATCH"].includes(e.toUpperCase())?JSON.stringify(n):"";return[e.toUpperCase(),r,a,i.Accept||"",i["Content-Type"]||""].filter(Boolean).join("|")}shouldUseCache(t){var e,r;if(!this.cacheOptions.enabled||t.bypassCache||((e=t.method)===null||e===void 0?void 0:e.toUpperCase())!=="GET")return!1;let n=(r=t.headers)===null||r===void 0?void 0:r["Cache-Control"];return!(n!=null&&n.includes("no-cache"))}fetch(t="GET",e={},r={},n){let i={},a={body:e,headers:r,method:t,params:i};return n=n||this.cacheOptions.defaultTTL,this.method=(t||"GET").toUpperCase(),r=Object.assign(this.headers,r),i.data=e,i.headers=r,i.method=this.method,i.redirect="follow",i.url=this.url,i.withCredentials=this.withCredentials,i.onUploadProgress=f=>{let p={loaded:f.loaded,ratio:f.loaded/f.total,total:f.total};this.dispatch("progress",{progress:p})},this.dispatch("fetch:before",{request:a}),this.loading=!0,this.dispatch("requesting",{request:a}),new Promise((f,p)=>{let o=this.generateCacheKey(i),u=this.shouldUseCache(i);this.handleRequest(o,i,u,n).then(c=>{this.response=c,this.beforeParse(c),this.parse(c),this.afterParse(c),this.afterFetch(c),this.afterAll(c),this.afterAny(),f(this)}).catch(c=>{this.response=c.response,this.afterAllError(c),this.afterAny(),p(this)})})}handleRequest(t,e,r,n){return ob(this,void 0,void 0,function*(){if(r&&s.cachedResponses.has(t)){let a=s.cachedResponses.get(t);return this.dispatch("cache:hit",{cacheKey:t,response:a}),a}if(s.pendingRequests.has(t)){let a=s.pendingRequests.get(t);if(a)return this.dispatch("request:deduped",{cacheKey:t}),a}let i=(0,ab.default)(e).then(a=>(r&&a.status>=200&&a.status<300&&(s.cachedResponses.set(t,a,n),this.dispatch("cache:set",{cacheKey:t,response:a})),s.pendingRequests.delete(t),a)).catch(a=>{throw s.pendingRequests.delete(t),a});return s.pendingRequests.set(t,i),this.dispatch("request:pending",{cacheKey:t}),i})}xhrFetch(t,e){let r=new XMLHttpRequest;r.open(e.method,t);for(let n in e.headers)r.setRequestHeader(n,e.headers[n]);return r.withCredentials=this.withCredentials,new Promise((n,i)=>{r.upload.onprogress=a=>{let f={loaded:a.loaded,total:a.total,ratio:a.lengthComputable?a.loaded/a.total:1};this.dispatch("progress",{progress:f})},r.onload=()=>{let a=new Blob([r.response],{type:"application/json"}),f=new Response(r.response?a:null,{status:r.status,statusText:r.statusText});n(f)},r.onerror=()=>i({request:r}),r.send(e.body)})}static clearCache(){s.cachedResponses=new s0.default}static getPendingRequests(){return s.pendingRequests}static removeCacheEntry(t){s.cachedResponses.delete(t)}setHeader(t,e){return this.headers[t]=e,this}setHeaders(t){return this.headers=t,this}beforeParse(t){this.dispatch("parse:before",{request:this,response:t})}parse(t){this.dispatch("parse:parsing",{request:this,response:t}),t.status!=204&&(this.responseData=t.data),this.dispatch("parse",{request:this,response:t})}afterParse(t){var e,r;if(t.status>=400&&(!((e=t.data)===null||e===void 0)&&e.status)){let n=((r=t.data)===null||r===void 0?void 0:r.message)||t.data||"";throw new cb.default(t.status,n)}this.dispatch("parse:after",{request:this,response:t})}afterFetch(t){this.dispatch("fetch",{request:this,response:t}),this.dispatch("fetch:after",{request:this,response:t}),this.loading=!1}afterAll(t){var e;if(t===void 0)return;let r=t.data,n=t.status,i=(((e=t.config)===null||e===void 0?void 0:e.method)||"get").toLowerCase();this.status=n,this.dispatch("complete",{request:this,response:t}),this.dispatch("complete:"+i,{request:this,response:t})}afterAllError(t){var e,r;let n=t.message||"Unknown error",i=((e=t.response)===null||e===void 0?void 0:e.status)||503,a=(((r=t.config)===null||r===void 0?void 0:r.method)||"get").toLowerCase();this.responseData=n,this.status=i,this.dispatch("error",{request:this,response:t}),this.dispatch("error:"+a,{request:this,response:t})}afterAny(){this.dispatch("finish",{request:this})}};Ei.default=Ti;Ti.cachedResponses=new s0.default;Ti.pendingRequests=new Map});var n0=O((WP,r0)=>{r0.exports=typeof self=="object"?self.FormData:window.FormData});var qu=O(Oi=>{"use strict";var ln=Oi&&Oi.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function f(u){try{o(r.next(u))}catch(c){a(c)}}function p(u){try{o(r.throw(u))}catch(c){a(c)}}function o(u){u.done?i(u.value):n(u.value).then(f,p)}o((r=r.apply(s,t||[])).next())})};Object.defineProperty(Oi,"__esModule",{value:!0});var lb=Wg(),hb=Ou(),Ud=Sd(),db=()=>{if(typeof window<"u"&&window.FormData)return new window.FormData;{let s=n0();return new s}},Lu=class s extends hb.default{constructor(t={}){super(t),this.baseUrl="/v1",this.cacheable=!0,this.cid="",this.dataKey="data",this.endpoint="",this.hasFetched=!1,this.hasLoaded=!1,this.id="",this.limit=30,this.loading=!1,this.modifiedEndpointPosition="before",this.options={dataKey:"data",withCredentials:!0},this.page=1,this.requestTime=-1,this.timeCompleted=-1,this.timeParsed=-1,this.cidPrefix="c",this.runLastAttempts=0,this.runLastAttemptsMax=2,this.token="",this.ttl=0,Object.assign(this,t),this.attributes={},this.body={},this.headers={},this.mockData={},this._meta={},this.cid=this.cidPrefix+Math.random().toString(36).substr(2,5),this.parent=void 0,this.builder=new lb.default(this),this.setOptions(t),s.hook(`${this.constructor.name}.setup`,[this])}static setHook(t="init",e){let r=`${this.name}.${t}`;this.hooks.set(r,e)}static unsetHook(t="init"){let e=`${this.name}.${t}`;this.hooks.delete(e)}static hook(t="init",e=[]){let r=this.hooks.get(t);r&&r(...e)}get b(){return this.builder}get isModel(){return this.builder.id!=""}attr(t){return this.attributes[t]}clone(){let t=new this.constructor;return t.add(this.toJSON()),t.setOptions(this.options),t.setHeaders(this.headers),t.parent=this.parent,t}hasAttributes(){return Object.keys(this.attributes).length>0}set(t={},e={},r=!0){let n=Object.getOwnPropertyDescriptors(this.__proto__);t=this.cleanData(t);for(let i in t)this.attributes[i]=t[i],n&&n[i]&&n[i].set&&(this[i]=t[i]);return t&&t.id&&this.setId(t.id),r&&(this.dispatch("set",{attributes:t}),s.hook(`${this.constructor.name}.set`,[this,t])),this}unset(t){return delete this.attributes[t],this}setOptions(t={}){return this.options=Object.assign(this.options,t),t.cacheable!==void 0&&(this.cacheable=t.cacheable),t.baseUrl&&(this.baseUrl=t.baseUrl),t.endpoint&&this.setEndpoint(t.endpoint),t.headers&&this.setHeaders(t.headers),t.meta&&(t.merge&&t.meta.pagination.count&&this._meta.pagination.count&&(t.meta.pagination.count+=this._meta.pagination.count),this._meta=t.meta),(t.params||t.qp||t.queryParams)&&this.setQueryParams(t.queryParams||t.qp||t.params),this}toJSON(t=null){var e;let r=Object.assign({},this.attributes),n=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),a=`${this.constructor.name}${this.id}`;for(let f of n)!((e=this[f])===null||e===void 0)&&e.toJSON&&(!t||t[a]!=f?(t=t||{},t[a]=f,r[f]=this[f].toJSON(t)):r[f]={_circular:!0});return r}create(t){return this.post(t)}delete(t={}){let e="DELETE",r=Object.assign(t||{},this.toJSON()),n=this._fetch(null,{},e,r,this.headers);return n.then(i=>{var a;i.status<200||i.status>299||this.hasParentCollection()&&((a=this.parent)===null||a===void 0||a.remove(this))}),n}post(t={}){let e="POST",r=Object.assign(t||{},this.toJSON());return this._fetch(null,{},e,r,this.headers)}put(t){let e="PUT",r=Object.assign(t||{},this.toJSON());return this._fetch(null,{},e,r,this.headers)}save(t={}){let e=this.id?"PUT":"POST",r=Object.assign(t||{},this.toJSON());return this._fetch(null,{},e,r,this.headers)}add(t){return this.set(t)}reset(){return this.attributes={},this.dispatch("reset"),s.hook(`${this.constructor.name}.reset`,[this]),this}addLoadingHooks(t,e=void 0,r=void 0){return this.removeLoadingHooks(),this.loadingHookPre=()=>{var n;return(e||((n=t==null?void 0:t.loading)===null||n===void 0?void 0:n.bind(t))||function(){})()},this.loadingHookPost=()=>{var n;return(r||((n=t==null?void 0:t.notloading)===null||n===void 0?void 0:n.bind(t))||function(){})()},this.loadingHookPost&&this.on("complete",this.loadingHookPost),this.loadingHookPost&&this.on("error",this.loadingHookPost),this.loadingHookPre&&this.on("requesting",this.loadingHookPre),this}removeLoadingHooks(){return this.loadingHookPost&&this.off("complete",this.loadingHookPost),this.loadingHookPost&&this.off("error",this.loadingHookPost),this.loadingHookPre&&this.off("requesting",this.loadingHookPre),this.loadingHookPost=void 0,this.loadingHookPre=void 0,this}cache(t){return this.ttl=t,this}mock(t){let e=this;function r(){e.unsetMockData("any"),e.off("finish",this)}return this.on("finish",r),this.setMockData("any",t),this}find(t,e={}){return ln(this,void 0,void 0,function*(){return yield this.fetch({id:t},e).then(r=>this)})}file(t,e,r={}){return ln(this,void 0,void 0,function*(){let n=this.builder.identifier(this.id).getUrl(),i=db();if(e.hasOwnProperty("files")&&e.files&&(e=e.files[0]),e.hasOwnProperty("length")&&(e=e[0]),this.unsetHeader("Content-Type"),i.append(t,e),r){let a;for(a in r){let f=r[a];Array.isArray(f)?f.forEach(p=>i.append(a+"[]",p)):i.append(a,f)}}return this._fetch(null,{},"POST",i).then(a=>(this.dispatch("file:complete"),a))})}upload(t,e,r={}){return ln(this,void 0,void 0,function*(){return this.file(t,e,r)})}fetch(t={},e={},r="get",n={},i={}){return ln(this,void 0,void 0,function*(){return yield this._fetch(t,e,r,n,i)})}runLast(){if(++this.runLastAttempts>=this.runLastAttemptsMax){console.warn("Run last attempts expired"),setTimeout(()=>{this.runLastAttempts=0},1e3);return}return this._fetch(this.lastRequest.options,this.lastRequest.queryParams,this.lastRequest.method,this.lastRequest.body,this.lastRequest.headers)}getUrlByMethod(t){let e="",r=this.getEndpoint();return t==="delete"&&this.endpointDelete?this.endpoint=this.endpointDelete:t==="put"&&this.endpointPut?this.endpoint=this.endpointPut:t==="post"&&this.endpointPost&&(this.endpoint=this.endpointPost),this.referenceForModifiedEndpoint&&this.useModifiedEndpoint(this.referenceForModifiedEndpoint,this.modifiedEndpointPosition),e=this.builder.getUrl(),this.endpoint=r,e}beforeFetch(){return ln(this,void 0,void 0,function*(){})}cancelModifiedEndpoint(){return this.referenceForModifiedEndpoint=void 0,this}isUsingModifiedEndpoint(){return!!this.referenceForModifiedEndpoint}getBaseUrl(){return this.baseUrl}getReferencedEndpoint(){return this.referenceForModifiedEndpoint}getModifiedEndpoint(){let t=this.referenceForModifiedEndpoint;return!t||!t.id&&this.modifiedEndpointPosition=="before"?(console.warn("Modified ActiveRecord [`"+t.getEndpoint()+"."+this.getEndpoint()+"] usually has an ID signature. [ar/this]",this),this.getEndpoint()):this.modifiedEndpointPosition=="before"?[t.getEndpoint(),t.id,this.getEndpoint()].join("/"):[this.getEndpoint(),this.id,t.getEndpoint()].join("/")}getQueryParam(t){return this.builder.getQueryParam(t)||""}getQueryParams(){return this.builder.getQueryParams()||{}}hasParent(){return!!this.parent}hasParentCollection(){return this.hasParent()&&this.parent.isCollection}useModifiedEndpoint(t,e="before"){return this.referenceForModifiedEndpoint=t,this.modifiedEndpointPosition=e,this}setBody(t){return this.body=t,this}getEndpoint(){return this.endpoint}setEndpoint(t){return this.referenceForModifiedEndpoint=void 0,this.endpoint=t,this}setHeader(t,e){return this.headers[t]=e,this}setHeaders(t){for(let e in t)this.setHeader(e,t[e]);return this}setId(t){return this.id=typeof t=="number"?t.toString():t,this.b.identifier(this.id),this}unsetId(){return this.id="",this}unsetHeader(t){return this.setHeader(t,null),delete this.headers[t],this}setMockData(t="any",e){let r={config:{},data:e,headers:{},status:200,statusText:"OK"};return Ud.default.cachedResponses.set(t,r,1e3*9999),this}unsetMockData(t="any"){return Ud.default.cachedResponses.delete(t),this}setQueryParam(t,e){return this.builder.qp(t,e),this}setQueryParams(t){for(let e in t)this.setQueryParam(e,t[e]);return this}unsetQueryParam(t){return delete this.builder.queryParams[t],this}setToken(t){return this.token=t,this.setHeader("Authorization","Bearer "+t),this}setAfterResponse(t,e={}){let r=t.detail.request,n=t.detail.response,i=r.method||"get",a=n.data;if(i.toLowerCase()==="post"&&!this.isModel)this.add((this.dataKey?a[this.dataKey]:a)||n.data);else if(i.toLowerCase()!=="delete"){let f=this.dataKey!==void 0?a[this.dataKey]:a.responseData||n.data;this.set(f,e)}this.setOptions(Object.assign({},e,{meta:a.meta})),this.dispatch("parse:after",t.detail)}_fetch(t={},e={},r="get",n={},i={}){return ln(this,void 0,void 0,function*(){r=r?r.toLowerCase():"get",this.lastRequest={body:n,headers:i,method:r,options:t,queryParams:e},this.requestTime=Date.now(),this.cacheable||this.builder.qp("cb",Date.now()),this.setQueryParams(e),this.setHeaders(i),t&&t.id&&this.builder.identifier(t.id),yield this.beforeFetch();let a=this.getUrlByMethod(r),f=this.ttl||0;this.dispatch("requesting",{request:this.lastRequest}),this.loading=!0;let p=this.request=new Ud.default(a,{dataKey:this.dataKey,withCredentials:this.options.withCredentials});return this.request.method=r,p.on("complete:delete",o=>{this.dispatch("complete:delete",o.detail),this.builder.identifier("")}),p.on("complete:get",o=>this.dispatch("complete:get",o.detail)),p.on("complete:post",o=>this.dispatch("complete:post",o.detail)),p.on("complete:put",o=>this.dispatch("complete:put",o.detail)),p.on("complete",o=>this.FetchComplete(o)),p.on("error:delete",o=>this.dispatch("error:delete",o.detail)),p.on("error:get",o=>this.dispatch("error:get",o.detail)),p.on("error:post",o=>this.dispatch("error:post",o.detail)),p.on("error:put",o=>this.dispatch("error:put",o.detail)),p.on("error",o=>(this.loading=!1,this.dispatch("error",o.detail))),p.on("finish",o=>this.dispatch("finish")),p.on("parse:after",o=>this.FetchParseAfter(o,t||{})),p.on("progress",o=>this.FetchProgress(o)),this.hasFetched=!0,p.fetch(r,Object.assign(n||{},this.body),Object.assign(i||{},this.headers),f)})}cleanData(t={}){if(this.dataKey&&typeof t=="object"&&!Array.isArray(t)){let e=Object.keys(t);if(e.length===1&&e[0]===this.dataKey)return t[this.dataKey]}return t}FetchComplete(t){this.hasLoaded=!0,this.loading=!1,this.timeCompleted=Date.now(),this.dispatch("complete",t.detail),this.dispatch("success",t.detail)}FetchProgress(t){this.dispatch("progress",t.detail)}FetchParseAfter(t,e={}){var r,n;(((n=(r=t.detail)===null||r===void 0?void 0:r.response)===null||n===void 0?void 0:n.status)||0)<400&&this.setAfterResponse(t,e),this.timeParsed=Date.now(),this.dispatch("fetched",t.detail)}};Oi.default=Lu;Lu.hooks=new Map});var i0=O(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});var hn=class s{constructor(t,e=0,r=n=>!0){this.index=0,this.kind=s.ITERATOR_VALUES,this.collection=t,this.index=0,this.kind=e,this.filter=r}next(t){let e=t||this.filter;for(;this.collection&&this.index<this.collection.length;){let r=this.collection.at(this.index);if(this.index++,e(r,this.index-1))return{done:!1,value:this.getValue(r)}}return{done:!0,value:void 0}}previous(t){let e=t||this.filter;for(;this.collection&&this.index>0;){this.index--;let r=this.collection.at(this.index);if(e(r,this.index))return{done:!1,value:this.getValue(r)}}return{done:!0,value:void 0}}current(){if(this.collection&&this.index>0&&this.index<=this.collection.length){let t=this.collection.at(this.index-1);if(this.filter(t,this.index-1))return{done:!1,value:this.getValue(t)}}return{done:!0,value:void 0}}getValue(t){return this.kind===s.ITERATOR_VALUES?t:this.kind===s.ITERATOR_KEYS?this.collection.modelId:[this.collection.modelId,t]}[Symbol.iterator](){return this}};Pd.default=hn;hn.ITERATOR_VALUES=0;hn.ITERATOR_KEYS=1;hn.ITERATOR_KEYSVALUES=2});var Ad=O(_i=>{"use strict";var fb=_i&&_i.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function f(u){try{o(r.next(u))}catch(c){a(c)}}function p(u){try{o(r.throw(u))}catch(c){a(c)}}function o(u){u.done?i(u.value):n(u.value).then(f,p)}o((r=r.apply(s,t||[])).next())})};Object.defineProperty(_i,"__esModule",{value:!0});var pb=qu(),Ci=class s extends pb.default{constructor(t={},e={}){super(e),this.circularProtection=!0,this.relationshipCache={},this.dataKey=void 0,this.set(t),this.setOptions(e)}static hydrate(t={},e={}){let r=new this(e);return r.set(t),r.setOptions(e),r}get isModel(){return!0}set(t={}){let e;this.dispatch("set:before",{attributes:t}),super.set(t,{},!1),this.dataKey&&this.attributes[this.dataKey]&&this.attributes[this.dataKey].length&&console.warn(["This model is incorrectly receiving data meant for a collection.","We found an array on key: ",this.dataKey].join(" "),this);for(e in t)this.relationshipCache[e]&&this.relationshipCache[e].set(t[e]);return this.dispatch("set",{attributes:t}),this}fetch(t={},e={}){let r=Object.create(null,{fetch:{get:()=>super.fetch}});return fb(this,void 0,void 0,function*(){return this.builder.identifier(t&&t.id?t.id:this.id),!(t&&t.id)&&!this.id&&console.warn("Fetching a model without an ID is likely incorrect behavior.",this,this.toJSON()),yield r.fetch.call(this,t,e)})}hasOne(t,e){if(this.circularProtection){let i=this.parent;for(;i;){if(i.endpoint===this.endpoint&&i.id===this.id)return;i=i.parent}}if(this.relationshipCache[t])return this.relationshipCache[t];let r=this.getRelationship(t)||{},n=new e(r);if(n.parent=this,!n.id){let i=`${t}_id`,a=i.replace(/[A-Z]/g,p=>"_"+p.toLowerCase()),f=this.attr(i)||this.attr(a)||"";n.setId(f)}return s.useDescendingRelationships&&n.useModifiedEndpoint(this),this.relationshipCache[t]=n}hasMany(t,e){if(this.relationshipCache[t])return this.relationshipCache[t];let r=new e().dataKey,n=this.getRelationship(t),i=e.hydrate((r&&n?n[r]:null)||n);return i.parent=this,s.useDescendingRelationships&&i.useModifiedEndpoint(this),this.relationshipCache[t]=i}getRelationship(t){return s.relationshipKey===null?this.attr(t):(this.attr(s.relationshipKey)||{})[t]}};_i.default=Ci;Ci.relationshipKey=null;Ci.useDescendingRelationships=!0});var u0=O(Ii=>{"use strict";var o0=Ii&&Ii.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function f(u){try{o(r.next(u))}catch(c){a(c)}}function p(u){try{o(r.throw(u))}catch(c){a(c)}}function o(u){u.done?i(u.value):n(u.value).then(f,p)}o((r=r.apply(s,t||[])).next())})};Object.defineProperty(Ii,"__esModule",{value:!0});var mb=qu(),ke=i0(),a0=Ad(),Ld=class s extends mb.default{constructor(t={}){super(t),this.atRelationship=[],this._meta={pagination:{count:15,current_page:1,links:{},per_page:15,total:0,total_pages:1}},this.models=[],this.sortKey="id",this.iterator=new ke.default(this),this.dataKey="data",this.setOptions(t),this.builder.qp("limit",t.limit||this.limit).qp("page",t.page||this.page),t.atRelationship&&(this.atRelationship=t.atRelationship)}static paginator(t){return t._meta.pagination}static hydrate(t=[],e={},r=!0){let n=new this(e);return t&&n.add(t,{},r),n.setOptions(e),n}get isCollection(){return!0}get length(){return this.models.length}get modelId(){return"id"}get pagination(){return s.paginator(this)}toJSON(){return JSON.parse(JSON.stringify(this.models))}fetchNext(t=!1){return o0(this,void 0,void 0,function*(){let e=Object.assign({},this.lastRequest.options),r=Object.assign({},this.builder.queryParams,this.lastRequest.queryParams);return r.page=parseFloat(r.page)+1,e.merge=t,yield this._fetch(e,r,this.lastRequest.method,this.lastRequest.body,this.lastRequest.headers)})}fetchPrevious(t=!1){return o0(this,void 0,void 0,function*(){let e=Object.assign({},this.lastRequest.options),r=Object.assign({},this.builder.queryParams,this.lastRequest.queryParams);return r.page=Math.max(1,parseFloat(r.page)-1),e.merge=t,yield this._fetch(e,r,this.lastRequest.method,this.lastRequest.body,this.lastRequest.headers)})}getEndpoint(){return super.getEndpoint()||this.model.endpoint}add(t,e={},r=!0){return t==null?this:(t=this.cleanData(t),(Array.isArray(t)?t:[t]).forEach(i=>{i instanceof a0.default||(i=new this.model.constructor(i)),i.parent=this,i.headers=this.headers,this.referenceForModifiedEndpoint&&i.useModifiedEndpoint(this.referenceForModifiedEndpoint),r&&this.dispatch("add:before",{model:i}),e.prepend?this.models.unshift(i):this.models.push(i)}),r&&this.dispatch("change",{from:"add"}),r&&this.dispatch("add"),this)}remove(t,e=!0){let r=0,n=0,i=Array.isArray(t)?t:[t];for(n=0;n<i.length;n++)for(r=0;r<this.models.length;)e&&this.dispatch("remove:before",{model:this.models[r]}),this.models[r]==i[n]?this.models.splice(r,1):++r;return e&&this.dispatch("change",{from:"remove"}),e&&this.dispatch("remove"),this}set(t,e={},r=!0){return(!e||e&&e.merge!=!0)&&this.reset(),this.add(t,e,r),r&&this.dispatch("set"),this}clear(){return this.reset()}count(){return this.length}delete(t={}){let e=this.builder.identifier(this.id||(t==null?void 0:t.id)||"").getUrl();if(this.builder.id){let a=this.findWhere(t);a&&this.remove(a)}let r=null,n=this.headers;return this._fetch(null,{},"DELETE",r,n)}each(t){this.models.forEach(t)}filter(t){return this.models.filter(t)}map(...t){return Array.prototype.map.apply(this.models,t)}push(t,e={}){return this.add(t,e),this}pop(){let t=this.at(this.length-1);return this.remove(t)}reset(){return this.models=[],this.dispatch("change",{from:"reset"}),this.dispatch("reset"),this}unshift(t,e={}){return this.add(t,Object.assign({prepend:!0},e))}shift(){let t=this.at(0);return this.remove(t)}shuffle(){return this.models=this.models.sort(()=>Math.random()-.5),this}reverse(){return this.models=this.models.reverse(),this}slice(...t){return Array.prototype.slice.apply(this.models,t)}unique(){return this.models=this.models.filter((t,e,r)=>r.indexOf(t)===e),this}get(t){if(t!=null)return this.where({[this.modelId]:t instanceof a0.default?t.id:t},!0)}has(t){return this.get(t)!=null}at(t=0){t<0&&(t+=this.length);let e=this.models[t];return this.atRelationship&&this.atRelationship.length&&this.atRelationship.forEach(r=>e=e[r]),e}first(){return this.at(0)}last(){return this.at(this.length-1)}where(t={},e=!1,r=!1){let n=this.constructor,i=[];this.models.forEach(f=>{let p=Object.keys(t),o=p.filter(u=>u in t&&f.attr(u)==t[u]);(r&&o.length==p.length||!r&&o.length)&&i.push(f)});let a=n.hydrate(i,this.options,!1);return e?a.first():a}findWhere(t={}){return this.where(t,!0)}findByCid(t){return this.findWhere({cid:t})}sort(t={}){let e=this.sortKey;return t!==null&&(e=t.key||e),this.models=this.models.sort((r,n)=>t&&t.reverse?(r.attr(e)-n.attr(e))*-1:(r.attr(e)-n.attr(e))*1),this}pluck(t){return this.models.map(e=>e.attr(t))}values(t){return new ke.default(this,ke.default.ITERATOR_VALUES,t)}keys(t){return new ke.default(this,ke.default.ITERATOR_KEYS,t)}entries(t){return new ke.default(this,ke.default.ITERATOR_KEYSVALUES,t)}next(t){let e=this.iterator.next(t);return e.done?void 0:e.value}previous(t){let e=this.iterator.previous(t);return e.done?void 0:e.value}index(){return this.iterator.index}current(t){let e=this.iterator.current();if(!e.done&&t){let r=e.value,n=this.indexOf(r);return t(r,n)?r:void 0}return e.done?void 0:e.value}resetIterator(){this.iterator=new ke.default(this)}indexOf(t){return this.models.indexOf(t)}[Symbol.iterator](){return new ke.default(this,ke.default.ITERATOR_VALUES)}};Ii.default=Ld});var Et=O(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.Request=It.Model=It.DispatcherEvent=It.Dispatcher=It.Core=It.Collection=It.Cache=It.ActiveRecord=void 0;var gb=qu();Object.defineProperty(It,"ActiveRecord",{enumerable:!0,get:function(){return gb.default}});var xb=Id();Object.defineProperty(It,"Cache",{enumerable:!0,get:function(){return xb.default}});var yb=u0();Object.defineProperty(It,"Collection",{enumerable:!0,get:function(){return yb.default}});var wb=Ou();Object.defineProperty(It,"Core",{enumerable:!0,get:function(){return wb.default}});var vb=nd();Object.defineProperty(It,"Dispatcher",{enumerable:!0,get:function(){return vb.default}});var bb=ed();Object.defineProperty(It,"DispatcherEvent",{enumerable:!0,get:function(){return bb.default}});var Mb=Ad();Object.defineProperty(It,"Model",{enumerable:!0,get:function(){return Mb.default}});var Tb=Sd();Object.defineProperty(It,"Request",{enumerable:!0,get:function(){return Tb.default}})});var lf={};g(lf,{Core:()=>Zs,Factory:()=>gn,Model:()=>Ts});var Zs={};g(Zs,{ChalkySticks:()=>vi,Collection:()=>Jt,Constants:()=>U,Core:()=>oc,Enum:()=>Hu,Environment:()=>ce,Event:()=>ht,Exception:()=>Vi,Factory:()=>ju,Input:()=>Gu,Model:()=>j,Provider:()=>vs,Request:()=>E0.Request,Utility:()=>bs,Version:()=>vM});var U={API_URL:"https://api.chalkysticks.com/v3",API_URL_DEV_V1:"http://localhost:8000/v1",API_URL_DEV_V2:"http://localhost:8000/v2",API_URL_V1:"https://api.chalkysticks.com/v1",API_URL_V2:"https://api.chalkysticks.com/v2",API_URL_V3:"https://api.chalkysticks.com/v3",CURRENT_DATE:"",DEFAULT_COLLECTION_LIMIT:20,NOTIFICATION_PREFERENCE:"native",STATIC_URL:"https://static.chalkysticks.com",WALLET_COLLECTION_TIME:60*60*6};var vi=class{static configure(t={}){let e;Object.assign(U,t.constants)}};var Jt={};g(Jt,{Advertisement:()=>Li,Base:()=>dt,Content:()=>qi,ContentTag:()=>ki,Media:()=>Ai,Meta:()=>dn,Rulebook:()=>Hi,Statistic:()=>Ri,User:()=>Fi,Wallet:()=>Bi});var j={};g(j,{Advertisement:()=>Vs,Base:()=>st,Content:()=>Ns,ContentTag:()=>Si,Geocode:()=>Ui,Media:()=>$s,Meta:()=>Pi,Rulebook:()=>zs,Statistic:()=>js,User:()=>Le,Wallet:()=>qe});var ht={};g(ht,{Bus:()=>P,Dispatcher:()=>on,DispatcherEvent:()=>bi});var bi=class{constructor(t,e){this.callbacks=[],this.eventName=t,e&&(this.envelope=e)}clearCallbacks(){this.callbacks=[]}registerCallback(t){this.callbacks.push(t)}unregisterCallback(t){let e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}fire(t){this.callbacks.slice(0).forEach(r=>{r(Object.assign({},this.envelope,t))})}};var on=class{constructor(){this.events={}}dispatch(t,e){let r=this.events[t];r&&r.fire({data:e,event:{name:t,time:Date.now()},target:this})}on(t,e){let r=this.events[t];r||(r=new bi(t),this.events[t]=r),r.registerCallback(e)}once(t,e){let r=n=>{e(n),this.off(t,r)};this.on(t,r)}off(t,e){let r=this.events[t];r&&!e?(r.clearCallbacks(),delete this.events[t]):r&&e&&r.callbacks.indexOf(e)>-1&&(r.unregisterCallback(e),r.callbacks.length===0&&delete this.events[t])}$emit(t,e={}){return this.dispatch(t,e)}trigger(t,e={}){return this.dispatch(t,e)}$on(t,e){return this.on(t,e)}$off(t,e){return this.off(t,e)}},P=new on;var vs={};g(vs,{Store:()=>an});var Gh=class{get(){return this.instance||this.register({actions:{},commit:(t,e)=>{},dispatch:(t,e)=>{},getters:{},mutations:{},state:{}}),this.instance}register(t){this.instance=t}},an=new Gh;var Zh=class{constructor(){this.id=Math.random().toString(36).substr(2,9)}get app(){return Ae.getVariable("app",{apiUrl:"",limit:32,localUrl:""})}get debug(){return Ae.getVariable("debug",!1)}get env(){return Ae.getVariable("env","development")}get google(){return Ae.getVariable("google",{analytics:{id:""},api_key:""})}isLocal(){return Ae.env==="local"||Ae.env==="development"}isProduction(){return Ae.env==="production"}isStaging(){return Ae.env==="staging"}getVariable(t,e){let r=typeof window=="object"&&window.env?window.env:{},n=typeof window=="object"&&window.chalky?window.chalky:{};return{...r,...n}[t]||e}},Ae=new Zh,ce=Ae;var c0=z(Et(),1),st=class extends c0.Model{constructor(t={},e={}){var r;if(super(t,e),this.baseUrl=ce.app.apiUrl,this.baseUrl=e.baseUrl||this.baseUrl||ce.app.apiUrl||U.API_URL,this.setOptions({withCredentials:!1}),e.token)this.setToken(e.token);else{let n=an.get(),i=((r=n==null?void 0:n.state)==null?void 0:r.token)||(n==null?void 0:n.getters["authentication/token"]);i&&this.setToken(i)}this.attachEvents()}attachEvents(){this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),P.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),P.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={model:this};e===401?(this.dispatch("request:unauthorized",r),P.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),P.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),P.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),P.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),P.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),P.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),P.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}getBaseUrl(){return ce.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var Vs=class extends st{constructor(){super(...arguments),this.endpoint="ads",this.fields=["caption","company","image","url"]}getCaption(){return this.attr("caption")}getCompany(){return this.attr("company")}getImage(){return this.attr("image")}getUrl(){return this.attr("url")}};var Di={};g(Di,{isYouTube:()=>qd,parseId:()=>Hd,thumbnailUrl:()=>Eb,toEmbedUrl:()=>Rd});function qd(s){return s.match(/(?:youtube\.com|youtu\.be)/)!==null}function Hd(s){let t=s.match(/(?:\?v=|\/embed\/|\/\d+\/|\.be\/)([a-zA-Z0-9_-]+)/);return t?t[1]:""}function Eb(s){return`https://img.youtube.com/vi/${Hd(s)}/hqdefault.jpg`}function Rd(s){return`https://www.youtube.com/embed/${Hd(s)}`}var Ns=class extends st{constructor(){super(...arguments),this.endpoint="content",this.fields=["title","media_type","media_url","thumbnail_url","content","created_at","updated_at"]}get tags(){return this.hasMany("tags",ki)}getContent(){return this.attr("content")}getMediaType(){return this.attr("media_type")}getMediaUrl(){return this.attr("media_url")}getThumbnailUrl(){return this.attr("thumbnail_url")}getTitle(){return this.attr("title")}getYouTubeEmbed(){return qd(this.getMediaUrl())?Rd(this.getMediaUrl()):""}hasContent(){return!!this.getContent()}isImage(){return this.getMediaType()==="image"}isVideo(){return this.getMediaType()==="video"}};var Si=class extends st{constructor(){super(...arguments),this.fields=["content_id","tag"]}getTag(){return this.attr("tag")}};var Ui=class s extends st{constructor(){super(...arguments),this.endpoint="data/geocode",this.fields=["status","results"]}static async search(t){let e=new s;return await e.fetch({},{address:t}),e}getCityAndState(){var n,i;let t=this.getAddressComponents(),e=((n=t.find(a=>a.types.includes("locality")))==null?void 0:n.long_name)||"",r=((i=t.find(a=>a.types.includes("administrative_area_level_1")))==null?void 0:i.short_name)||"";return`${e}, ${r}`}getCountry(){var e;return((e=this.getAddressComponents().find(r=>r.types.includes("country")))==null?void 0:e.long_name)||""}getFullAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.long_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.long_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.long_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.long_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.long_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.long_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getLocation(){let t=0,e=0;if(this.hasResults()){let n=this.getResults()[0].geometry.location;t=n.lat,e=n.lng}return{latitude:t,longitude:e}}getResults(){return this.attr("results")}getShortAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.short_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.short_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.short_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.short_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.short_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.short_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getStatus(){return this.attributes.status||""}hasResults(){let t=this.getResults();return t&&t[0]&&t[0].geometry}isOK(){return this.getStatus()==="OK"}getAddressComponents(){return this.getResults()[0].address_components}};var $s=class extends st{constructor(){super(...arguments),this.endpoint="media",this.fields=["id","type","url","group","subgroup","created_at","updated_at"],this.proxyUrl="https://d2k0n0ggvekdpx.cloudfront.net"}getGroup(){return this.attr("group")}getSubgroup(){return this.attr("subgroup")}getProxiedUrl(t={width:1024}){let e=this.getUrl(),r=["unsafe"],n=[];if(!e)return e;if(n.push("format(webp)"),t.width||t.height){let i=`${t.width||""}x${t.height||""}`;t.fitIn&&r.push("fit-in"),r.push(i)}if(t.smart&&r.push("smart"),t.filters){if(t.filters.quality&&n.push(`quality(${t.filters.quality})`),t.filters.blur&&n.push(`blur(${t.filters.blur})`),t.filters.brightness&&n.push(`brightness(${t.filters.brightness})`),t.filters.contrast&&n.push(`contrast(${t.filters.contrast})`),t.filters.grayscale&&n.push("grayscale()"),t.filters.watermark){let i=t.filters.watermark;n.push(`watermark(${i.image},${i.x},${i.y},${i.transparency||0})`)}n.length>0&&r.push(`filters:${n.join(":")}`)}return`${this.proxyUrl}/${r.join("/")}/${this.getUrl()}`}getType(){return this.attr("type")}getUrl(){return this.attr("url")}getUrlSmall(){return this.getProxiedUrl({width:256})}getUrlMedium(){return this.getProxiedUrl({width:512})}getUrlLarge(){return this.getProxiedUrl({width:1024})}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var Pi=class extends st{constructor(){super(...arguments),this.fields=["id","group","key","value","created_at","updated_at"]}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var zs=class extends st{constructor(){super(...arguments),this.endpoint="rulebooks",this.fields=["content"]}getContent(){return this.attr("content")}};var js=class extends st{constructor(){super(...arguments),this.endpoint="statistics",this.fields=["beacon_count","city_count","venue_count","user_count","video_duration_as_minutes","video_duration_as_hours"]}getBeaconCount(){return this.attr("beacon_count")}getCityCount(){return this.attr("city_count")}getVenueCount(){return this.attr("venue_count")}getUserCount(){return this.attr("user_count")}getVideoDurationAsMinutes(){return this.attr("video_duration_as_minutes")}getVideoDurationAsHours(){return this.attr("video_duration_as_hours")}};var Le=class extends st{constructor(){super(...arguments),this.endpoint="users",this.fields=["id","lat","lon","name","phone","slug","status","wallet_balance","created_at","updated_at"]}get avatar(){return this.media.primary||new $s}get games(){return this.hasMany("games",dn)}get lastCollection(){return this.hasOne("last_collection",qe)}get media(){let t=this.hasMany("media",Ai);return t.useModifiedEndpoint(this),t}get metadata(){return this.hasMany("meta",dn)}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getName(){return this.attr("name")}getPermissions(){return parseFloat(this.attr("permissions"))}getPhone(){return this.attr("phone")}getSlug(){return this.attr("slug")}getStatus(){return parseFloat(this.attr("status"))}getWalletBalance(){return parseFloat(this.attr("wallet_balance"))}};var qe=class extends st{constructor(){super(...arguments),this.endpoint="wallet",this.fields=["id","user_id","challenger_id","transaction","source","source_id","created_at","updated_at"]}async collect(t){return this.setHeader("Authorization-API",`Bearer ${t}`),this.setHeader("Content-Type","application/json"),this.id="",this.endpoint="wallet/collect",await this.save(),this}get challenger(){return this.hasOne("challenger",Le)}canCollect(){let t=U.WALLET_COLLECTION_TIME,e=new Date,r=new Date(this.getUpdatedAt());return e.getTime()-r.getTime()>=t}getSource(){return this.attr("source")}getTransaction(){return this.attr("transaction")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var l0=z(Et(),1),dt=class extends l0.Collection{constructor(t={}){var e;if(super(t),this.baseUrl=ce.app.apiUrl,this.limit=ce.app.limit,this.baseUrl=t.baseUrl||this.baseUrl||ce.app.apiUrl||U.API_URL,this.setOptions({withCredentials:!1}),this.limit=t.limit||this.limit,this.page=t.page||this.page,this.builder.qp("limit",this.limit),this.builder.qp("page",this.page),t.token)this.setToken(t.token);else{let r=an.get(),n=((e=r==null?void 0:r.state)==null?void 0:e.token)||(r==null?void 0:r.getters["authentication/token"]);n&&this.setToken(n)}this.attachEvents()}attachEvents(){this.on("add:before",t=>{t.detail.model.baseUrl=this.baseUrl}),this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),P.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),P.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={collection:this};e===401?(this.dispatch("request:unauthorized",r),P.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),P.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),P.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),P.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),P.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),P.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),P.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}shouldFetch(){return this.loading?!1:this.models.length===0||this.requestTime<=0}getBaseUrl(){return ce.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var Li=class extends dt{constructor(){super(...arguments),this.model=new Vs}};var qi=class extends dt{constructor(){super(...arguments),this.model=new Ns}news(){return this.tags(["news"])}pad(){return this.tags(["pad"])}tags(t=[]){return this.setQueryParam("tags",t.join(",")),this}tutorials(){return this.tags(["tutorial"])}};var ki=class extends dt{constructor(){super(...arguments),this.model=new Si}getByTag(t){return this.models.filter(e=>e.getTag()===t)}};var Ai=class extends dt{constructor(){super(...arguments),this.model=new $s}get images(){return this.models.filter(t=>t.getType()==="image")}get primary(){return this.models.at(0)}get videos(){return this.models.filter(t=>t.getType()==="video")}};var dn=class extends dt{constructor(){super(...arguments),this.model=new Pi}getByKey(t){return this.models.filter(e=>e.getKey()===t)}getByGroup(t){return this.models.filter(e=>e.getGroup()===t)}getKeys(){return this.models.map(t=>t.getKey())}getValues(){return this.models.map(t=>t.getValue())}getValuesByKey(t){return this.getByKey(t).map(e=>e.getValue())}getValuesByGroup(t){return this.getByGroup(t).map(e=>e.getValue())}};var Hi=class extends dt{constructor(){super(...arguments),this.model=new zs}};var Ri=class extends dt{constructor(){super(...arguments),this.model=new js}};var Fi=class extends dt{constructor(){super(...arguments),this.model=new Le}};var Bi=class extends dt{constructor(){super(...arguments),this.model=new qe}};var Hu={};g(Hu,{Achievement:()=>Fd,ContentMediaType:()=>Bd,ContentType:()=>Vd,Currency:()=>Nd,MediaGroup:()=>$d,MediaType:()=>zd,ProductType:()=>jd});var Fd;(function(s){s.FirstPhoto="first_photo"})(Fd||(Fd={}));var Bd;(function(s){s.Image="image",s.Video="video"})(Bd||(Bd={}));var Vd;(function(s){s.News="news",s.Pad="pool-pad",s.Tutorial="tutorial"})(Vd||(Vd={}));var Nd;(function(s){s.CSX="CSX",s.USD="USD"})(Nd||(Nd={}));var $d;(function(s){s.Default="",s.Community="community",s.Evaluated="evaluated",s.Inappropriate="inappropriate",s.Unknown="unknown"})($d||($d={}));var zd;(function(s){s.Exterior="exterior",s.Interior="interior",s.Person="person",s.Table="table"})(zd||(zd={}));var jd;(function(s){s.Digital="digital",s.Physical="physical"})(jd||(jd={}));var Vi={};g(Vi,{ConnectionRefused:()=>Wd,Geolocation:()=>he,InvalidInput:()=>Qd,InvalidRenderer:()=>Yd,InvalidStorageProvider:()=>Gd,NotImplemented:()=>Zd,ParserFailure:()=>Kd,Unauthorized:()=>Xd});var Wd=class extends Error{};var he=class extends Error{constructor(t){super(t),this.name="GeolocationError"}};var Qd=class extends Error{};var Yd=class extends Error{};var Gd=class extends Error{};var Zd=class extends Error{};var Kd=class extends Error{};var Xd=class extends Error{};var ju={};g(ju,{Advertisement:()=>Ru,Content:()=>Fu,Geocode:()=>Bu,Rulebook:()=>Vu,Statistic:()=>Nu,User:()=>$u,Wallet:()=>zu});var Ru={};g(Ru,{collection:()=>Cb,model:()=>Ob});function Ob(s={}){return new Vs(void 0,Object.assign({baseUrl:U.API_URL_V3},s))}function Cb(s={}){return new Li(Object.assign({baseUrl:U.API_URL_V3},s))}var Fu={};g(Fu,{collection:()=>Ib,model:()=>_b});function _b(s={}){return new Ns(void 0,Object.assign({baseUrl:U.API_URL_V3},s))}function Ib(s={}){return new qi(Object.assign({baseUrl:U.API_URL_V3},s))}var Bu={};g(Bu,{model:()=>Db});function Db(s={}){return new Ui(void 0,Object.assign({baseUrl:U.API_URL_V1},s))}var Vu={};g(Vu,{collection:()=>Sb,model:()=>kb});function kb(s={}){return new zs(void 0,Object.assign({baseUrl:U.API_URL_V3},s))}function Sb(s={}){return new Hi(Object.assign({baseUrl:U.API_URL_V3},s))}var Nu={};g(Nu,{collection:()=>Pb,model:()=>Ub});function Ub(s={}){return new js(void 0,Object.assign({baseUrl:U.API_URL_V3},s))}function Pb(s={}){return new Ri(Object.assign({baseUrl:U.API_URL_V3},s))}var $u={};g($u,{collection:()=>Lb,model:()=>Ab});function Ab(s={}){return new Le(void 0,Object.assign({baseUrl:U.API_URL_V1},s))}function Lb(s={}){return new Fi(Object.assign({baseUrl:U.API_URL_V1},s))}var zu={};g(zu,{collection:()=>Hb,model:()=>qb});function qb(s={}){return new qe(void 0,Object.assign({baseUrl:U.API_URL_V1},s))}function Hb(s={}){return new Bi(Object.assign({baseUrl:U.API_URL_V1},s))}var Gu={};g(Gu,{Keyboard:()=>Qu,Pointer:()=>Jd,Sensor:()=>Yu,Shortcut:()=>Ws,ShortcutSequencer:()=>Wu,Video:()=>tf});var Ws=class extends ht.Dispatcher{static add(t,e){Rb.add(t,e)}constructor(t={}){super(),this.keymap={},this.attached=!1,this.keysDown={},this.options={ignoreInputs:!0},Object.assign(this.options,t||{})}add(t,e){this.ensureSetup(),this.keymap[t]=e}remove(t){delete this.keymap[t]}ensureSetup(){this.attached||(this.attached=!0,document.addEventListener("keydown",this.Handle_OnKeyDown.bind(this)),document.addEventListener("keyup",this.Handle_OnKeyUp.bind(this)))}findMatch(){let t=Object.keys(this.keymap);return t=t.sort((e,r)=>{var n,i;return(((n=r.match(/\+/g))==null?void 0:n.length)||0)-(((i=e.match(/\+/g))==null?void 0:i.length)||0)}),t.find(e=>e.replace(/\s+/g,"").toLowerCase().split("+").every(n=>this.keysDown[n.toLowerCase()]))}normalize(t){return t.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("arrow","")}Handle_OnKeyDown(t){let e=t.target;if(!(t instanceof KeyboardEvent)||this.options.ignoreInputs&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"))return;let r=this.normalize(t.key);this.keysDown[r]=!0;let n=this.findMatch()||"",i=this.keymap[n];i&&(this.trigger("shortcut:found",{match:n}),i())}Handle_OnKeyUp(t){if(!(t instanceof KeyboardEvent))return;let e=this.normalize(t.key);delete this.keysDown[e]}},Wu=class s extends ht.Dispatcher{static add(t,e){h0.add(t,e)}static remove(t){h0.remove(t)}static get instance(){return new s}constructor(){super(),this.matches=[],this.sequences={},this.shortcut=new Ws,this.shortcut.on("shortcut:found",this.Handle_OnShortcutFound.bind(this))}add(t,e){let r=t.join(",");t.forEach(n=>{this.shortcut.add(n,()=>{})}),this.sequences[r]=e}remove(t){let e=t.join(",");t.forEach(r=>{this.shortcut.remove(r)}),delete this.sequences[e]}async Handle_OnShortcutFound(t){let e=t.data.match;this.matches.push(e),this.matches=this.matches.slice(-20);let r=Object.keys(this.sequences).find(i=>{let a=i.split(","),f=this.matches.slice(-a.length);return f.length>=a.length&&f.every((p,o)=>p===a[o])});if(!r)return;let n=this.sequences[r];n&&n()}},Rb=new Ws({ignoreInputs:!0}),h0=new Wu;var Qu=class extends ht.Dispatcher{constructor(){super(...arguments),this.shortcut=new Ws({ignoreInputs:!0})}},KL=new Qu;var Jd=class s extends ht.Dispatcher{static start(t="pointer",e=!1){this.instance||(this.instance=new s(t,e))}constructor(t="pointer",e=!1,r=document){super(),this.angle=0,this.changed=!1,this.distance=0,this.down=!1,this.dx=0,this.dy=0,this.friction=.95,this.inertia=0,this.lastX=0,this.lastY=0,this.moved=!1,this.rx=0,this.rx2=0,this.ry=0,this.ry2=0,this.rox=0,this.roy=0,this.rox2=0,this.roy2=0,this.ox=0,this.oy=0,this.time=Date.now(),this.timeDown=0,this.timeDownDifference=0,this.timeDifference=0,this.touches=0,this.vx=0,this.vy=0,this.x=0,this.x2=0,this.y=0,this.y2=0,this.wheel=!1,this.wheelDelta=0,this.moveThreshold=5,this.cid=Math.random().toString(36).substr(2,9),this.eventType="",this.holdTimeout=null,this.initialPinchDistance=0,this.lastPinchDistance=0,this.lastTapTime=0,this.swipeThreshold=50,this.swipeTimeThreshold=300,this.swipeVelocityThreshold=.3,this.tapCount=0,this.tapTimeout=null,this.twoFingerTapCount=0,this.vxHistory=[],this.vyHistory=[],this.Handle_OnInterval=this.Handle_OnInterval.bind(this),this.Handle_OnPointerDown=this.Handle_OnPointerDown.bind(this),this.Handle_OnPointerMove=this.Handle_OnPointerMove.bind(this),this.Handle_OnPointerUp=this.Handle_OnPointerUp.bind(this),this.Handle_OnWheel=this.Handle_OnWheel.bind(this),this.autoTouchEvents=e,this.eventType=t,this.target=r,this.attachEvents()}attachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.addEventListener("touchstart",this.Handle_OnPointerDown),this.target.addEventListener("touchmove",this.Handle_OnPointerMove),this.target.addEventListener("touchend",this.Handle_OnPointerUp)):(this.target.addEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.addEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.addEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.addEventListener("wheel",this.Handle_OnWheel,{passive:!1}),bs.Interval.add(this.Handle_OnInterval,1e3/60,`${this.cid}-pointer-velocity`)}detachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.removeEventListener("touchstart",this.Handle_OnPointerDown),this.target.removeEventListener("touchmove",this.Handle_OnPointerMove),this.target.removeEventListener("touchend",this.Handle_OnPointerUp)):(this.target.removeEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.removeEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.removeEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.removeEventListener("wheel",this.Handle_OnWheel),bs.Interval.remove(`${this.cid}-pointer-velocity`)}applyForMobile(t=!0,e=!0,r=!0){document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",t&&document.addEventListener("touchmove",function(n){n.preventDefault()},{passive:!1}),e&&document.addEventListener("touchend",function(n){n.preventDefault()},!1),r&&document.addEventListener("contextmenu",function(n){n.preventDefault()})}capturePinchZoom(t){document.addEventListener("wheel",e=>{t&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.Handle_OnWheel(e)},{capture:t,passive:!1}),document.body.style.touchAction="pan-x pan-y",document.body.style.userSelect="none"}configureSwipe(t){return t.distanceThreshold!==void 0&&(this.swipeThreshold=t.distanceThreshold),t.timeThreshold!==void 0&&(this.swipeTimeThreshold=t.timeThreshold),t.velocityThreshold!==void 0&&(this.swipeVelocityThreshold=t.velocityThreshold),this}resetRelative(t=0,e=0){return this.rox=this.rox2=this.rx=this.rx2=t,this.roy=this.roy2=this.ry=this.ry2=e,this}get downEvent(){let t="";switch(this.eventType){case"pointer":t="pointerdown";break;case"touch":t="touchstart";break;default:t="mousedown";break}return t}get moveEvent(){let t="";switch(this.eventType){case"pointer":t="pointermove";break;case"touch":t="touchmove";break;default:t="mousemove";break}return t}get upEvent(){let t="";switch(this.eventType){case"pointer":t="pointerup";break;case"touch":t="touchend";break;default:t="mouseup";break}return t}getDistanceBetweenTouches(t){if(t.touches.length<2)return 0;let e=t.touches[0],r=t.touches[1],n=e.pageX-r.pageX,i=e.pageY-r.pageY;return Math.sqrt(n*n+i*i)}async Handle_OnInterval(){let t=this.vx,e=this.vy;this.vx*=this.friction,this.vy*=this.friction,Math.abs(this.vx)<.025&&(this.vx=0),Math.abs(this.vy)<.025&&(this.vy=0),isFinite(this.vx)||(this.vx=0),isFinite(this.vy)||(this.vy=0),this.down||(this.x2+=this.vx*5,this.y2+=this.vy*5,this.rx2+=this.vx*5,this.ry2+=this.vy*5),this.changed=this.vx!==t||this.vy!==e}async Handle_OnPointerDown(t){let e="touches"in t&&t.touches.length===2;if(this.down=!0,this.moved=!1,this.timeDown=Date.now(),this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=this.getDistanceBetweenTouches(t),this.lastPinchDistance=this.initialPinchDistance),this.ox=this.x="touches"in t?t.touches[0].clientX:t.clientX,this.oy=this.y="touches"in t?t.touches[0].clientY:t.clientY,this.dx=0,this.dy=0,this.target!==document){let n=this.target.getBoundingClientRect();this.ox-=n.left,this.oy-=n.top,this.x-=n.left,this.y-=n.top}this.rox=this.rx,this.roy=this.ry,this.rox2=this.rx2,this.roy2=this.ry2,this.dispatch("down",{touches:this.touches,x:this.x,y:this.y});let r={x:this.x,y:this.y};e?(this.twoFingerTapCount++,this.twoFingerTapCount===1&&setTimeout(()=>{this.twoFingerTapCount===1&&!this.down?this.dispatch("twofingertap",r):this.twoFingerTapCount===2&&this.dispatch("twofingerdoubletap",r),this.twoFingerTapCount=0},300)):(this.tapCount++,this.timeDown-this.lastTapTime<300?(clearTimeout(this.tapTimeout),this.dispatch("doubletap",r),this.tapCount=0):this.tapTimeout=setTimeout(()=>{this.tapCount===1&&!this.down&&this.dispatch("tap",r),this.tapCount=0},300),this.lastTapTime=this.timeDown,this.holdTimeout=setTimeout(()=>{this.down&&this.dispatch("hold",r)},500))}async Handle_OnPointerMove(t){if(this.moved&&this.holdTimeout&&clearTimeout(this.holdTimeout),this.touches>1){let e=this.getDistanceBetweenTouches(t),r=e-this.lastPinchDistance,n=e/this.initialPinchDistance;this.dispatch("zoom",{delta:r,isTrackpad:!1,type:"pinch",scale:n}),this.lastPinchDistance=e}if(this.lastX=this.x,this.lastY=this.y,this.x="touches"in t?t.touches[0].clientX:t.clientX,this.y="touches"in t?t.touches[0].clientY:t.clientY,this.target!==document){let e=this.target.getBoundingClientRect();this.x-=e.left,this.y-=e.top}this.currentTarget=t.currentTarget,this.activeTarget=t.target,this.timeDifference=Date.now()-this.time,this.time=Date.now(),this.dispatch("move",{x:this.x,y:this.y}),this.vxHistory.push((this.x-this.lastX)/this.timeDifference),this.vyHistory.push((this.y-this.lastY)/this.timeDifference),this.vxHistory.length>5&&this.vxHistory.shift(),this.vyHistory.length>5&&this.vyHistory.shift(),this.down&&(this.dx=this.x-this.ox,this.dy=this.y-this.oy,this.rx=this.rox+this.dx,this.ry=this.roy+this.dy,this.rx2=this.rox2+this.dx,this.ry2=this.roy2+this.dy,this.angle=Math.atan2(this.dy,this.dx)*(180/Math.PI),this.distance=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.moved=Math.abs(this.distance)>this.moveThreshold,this.x2=this.x,this.y2=this.y,this.timeDownDifference=this.time-this.timeDown,this.inertia=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.vx=this.vxHistory.reduce((e,r)=>e+r)/(this.vxHistory.length||1),this.vy=this.vyHistory.reduce((e,r)=>e+r)/(this.vyHistory.length||1),this.dispatch("drag",{angle:this.angle,changed:this.changed,distance:this.distance,dx:this.dx,dy:this.dy,inertia:this.inertia,moved:this.moved,ox:this.ox,oy:this.oy,rx:this.rx,ry:this.ry,rx2:this.rx2,ry2:this.ry2,time:this.time,timeDifference:this.timeDifference,timeDown:this.timeDown,timeDownDifference:this.timeDownDifference,touches:this.touches,vx:this.vx,vy:this.vy,x:this.x,y:this.y}))}async Handle_OnPointerUp(t){let e=Date.now()-this.timeDown;if(this.down="touches"in t?t.touches.length>0:!1,this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=0,this.lastPinchDistance=0),this.dispatch("up",{touches:this.touches,x:this.x,y:this.y}),this.moved&&e<this.swipeTimeThreshold){let r=this.x-this.ox,n=this.y-this.oy,i=Math.sqrt(r*r+n*n),a=i/this.timeDifference;if(i>this.swipeThreshold&&a>this.swipeVelocityThreshold){let f=Math.abs(r)>Math.abs(n)?r>0?"right":"left":n>0?"down":"up";this.dispatch("swipe",{direction:f,distance:i,duration:this.timeDifference,velocity:a}),this.dispatch("swipe:"+f,{direction:f,distance:i,duration:this.timeDifference,velocity:a})}}(this.distance<50||!this.distance)&&this.dispatch("tap:small",{x:this.x,y:this.y,distance:this.distance}),(this.distance<20||!this.distance)&&this.dispatch("tap:xsmall",{x:this.x,y:this.y,distance:this.distance}),this.holdTimeout&&clearTimeout(this.holdTimeout),this.distance=0}async Handle_OnWheel(t){let e=~~(Math.abs(t.wheelDeltaY||1)/Math.abs(t.deltaY||1))>1,r=t.deltaY,n=r>0?"out":"in";bs.Debounce.exec(this.cid,()=>{this.wheel=!1,this.wheelDelta=0},100,!0),r&&(this.wheel=!0),this.wheelDelta=r,this.dispatch("zoom",{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"}),this.dispatch("zoom:"+n,{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"})}};var Yu=class extends ht.Dispatcher{get hasMotion(){return"ondevicemotion"in window}get hasOrientation(){return"ondeviceorientation"in window}get hasSensors(){return this.hasOrientation&&this.hasMotion}constructor(){super(),this.Handle_OnDeviceMotion=this.Handle_OnDeviceMotion.bind(this),this.Handle_OnDeviceOrientation=this.Handle_OnDeviceOrientation.bind(this),this.attachEvents()}attachEvents(){window.addEventListener("devicemotion",this.Handle_OnDeviceMotion),window.addEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}detachEvents(){window.removeEventListener("devicemotion",this.Handle_OnDeviceMotion),window.removeEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}async Handle_OnDeviceMotion(t){let{acceleration:e,accelerationIncludingGravity:r,rotationRate:n}=t;this.dispatch("gyroscope",n),this.dispatch("accelerometer",e),this.dispatch("accelerometer:gravity",r)}async Handle_OnDeviceOrientation(t){let{absolute:e,alpha:r,beta:n,gamma:i}=t;this.dispatch("orientation",{absolute:e,alpha:r,beta:n,gamma:i})}},sq=new Yu;var tf=class extends ht.Dispatcher{static async getSources(){return(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput").map(r=>({deviceId:r.deviceId,label:r.label}))}};var bs={};g(bs,{Analytics:()=>Zu,Cache:()=>Ni,Debounce:()=>uf,Device:()=>Ku,Easing:()=>Ms,EasingFunction:()=>W,Format:()=>Xu,Geolocation:()=>sc,Hysteresis:()=>cf,Interval:()=>mn,Math:()=>tc,Presentation:()=>rc,Share:()=>nc,String:()=>ic,YouTube:()=>Di,documentHeight:()=>hM,getCSSVariable:()=>dM,getDate:()=>fM,getEasingMethod:()=>$i,offsetHeight:()=>mM,offsetLeft:()=>pM,offsetTop:()=>gM,offsetWidth:()=>xM,requestAnimationFrame:()=>yM,sleep:()=>wM});var Zu={};g(Zu,{embedGoogleAnalytics:()=>Fb,embedMetaPixel:()=>Vb,embedRedditPixel:()=>Bb});function Fb(s){if(window.gtag){console.warn("Analytics is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+s,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],console.log("GA:",s),window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date),gtag("config",s)}function Bb(s,t={}){if(window.rdt){console.warn("Reddit pixel is already embedded");return}let e=document.createElement("script");e.async=!0,e.src="https://www.redditstatic.com/ads/pixel.js";let r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r),window.rdt=function(){window.rdt.sendEvent?window.rdt.sendEvent(...arguments):window.rdt.callQueue.push(arguments)},window.rdt.callQueue=[],console.log("RP:",s),rdt("init",s,t),rdt("track","PageVisit")}function Vb(s){if(window.fbq){console.warn("Facebook pixel is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js";let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod(...arguments):window.fbq.queue.push(arguments)},window._fbq||(window._fbq=window.fbq),window.fbq.push=window.fbq,window.fbq.queue=[],window.fbq.loaded=!0,window.fbq.version="2.0",console.log("MP:",s),fbq("init",s),fbq("track","PageView")}var Ku={};g(Ku,{getBrowserName:()=>Qs,getBrowserVersion:()=>Zb,getOrientation:()=>Wb,getScreenHeight:()=>Gb,getScreenWidth:()=>Yb,isAndroid:()=>zb,isChrome:()=>Jb,isEdge:()=>Xb,isFirefox:()=>t1,isIE:()=>Kb,isIOS:()=>$b,isLandscape:()=>ef,isMobile:()=>Nb,isOpera:()=>s1,isPortrait:()=>jb,isSafari:()=>e1,isTouchDevice:()=>Qb,userAgent:()=>fn});function fn(){return navigator.userAgent}function Nb(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(fn())}function $b(){return/iphone|ipad|ipod/i.test(fn())}function zb(){return/android/i.test(fn())}function ef(){return window.orientation===90||window.orientation===-90}function jb(){return!ef()}function Wb(){return ef()?"landscape":"portrait"}function Qb(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function Yb(){return window.screen.width}function Gb(){return window.screen.height}function Qs(){let s=fn();return s.indexOf("firefox")>-1?"Firefox":s.indexOf("opera")>-1||s.indexOf("opr")>-1?"Opera":s.indexOf("chrome")>-1?"Chrome":s.indexOf("safari")>-1?"Safari":s.indexOf("msie")>-1||s.indexOf("trident")>-1?"Internet Explorer":"Unknown"}function Zb(){let s=fn(),t=s.match(/version\/(\d+)/i);return t===null&&(t=s.match(/(?:msie |rv:)(\d+)/)),t===null&&(t=s.match(/(?:chrome|safari|firefox|opera|opr|edge)\/(\d+)/i)),t===null?"Unknown":t[1]}function Kb(){return Qs()==="Internet Explorer"}function Xb(){return Qs()==="Edge"}function Jb(){return Qs()==="Chrome"}function t1(){return Qs()==="Firefox"}function e1(){return Qs()==="Safari"}function s1(){return Qs()==="Opera"}var Xu={};g(Xu,{bytesToSize:()=>r1,daysBetweenDates:()=>n1,getRelativeTime:()=>sf,secondsToTime:()=>i1,timeAgo:()=>u1,timeToHuman:()=>a1,timeToSeconds:()=>o1,timeUntil:()=>c1});function r1(s){let t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s==0)return"0 Byte";let e=parseInt(Math.floor(Math.log(s)/Math.log(1024)).toString());return Math.round(s/Math.pow(1024,e))+" "+t[e]}function n1(s,t){let e=Math.abs(t.getTime()-s.getTime());return Math.ceil(e/(1e3*3600*24))}function i1(s,t="00:00:00"){let e=new Date(0);switch(e.setSeconds(s),t){case"00:00:00":return e.toISOString().substr(11,8);case"00:00":return e.toISOString().substr(14,5);case"00":return e.toISOString().substr(17,2)}return e.toISOString().substr(11,8)}function o1(s){let[t,e,r]=s.split(":").map(Number);return t*3600+e*60+r}function d0(s){if(s instanceof Date)return isNaN(s.getTime())?null:s;if(typeof s=="string"){let t=new Date(s);if(!isNaN(t.getTime()))return t;let e=s.split(":").map(Number);if(e.length===3&&e.every(r=>!isNaN(r))){let r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),e[0],e[1],e[2])}}return typeof s=="number"?s<9466848e5?new Date(Date.now()+s*1e3):new Date(s):null}function a1(s,t=!1){let e;if(typeof s=="string"){let a=s.split(":").map(Number);if(a.length===3&&a.every(f=>!isNaN(f)))e=a[0]*3600+a[1]*60+a[2];else{let f=d0(s);if(!f)return"";e=Math.floor((f.getTime()-Date.now())/1e3)}}else s instanceof Date?e=Math.floor((s.getTime()-Date.now())/1e3):s>9466848e5?e=Math.floor((s-Date.now())/1e3):e=s;let r=Math.floor(Math.abs(e)/3600),n=Math.floor(Math.abs(e)%3600/60),i=Math.floor(Math.abs(e)%60);if(t){let a=[];return r>0&&a.push(`${r}h`),n>0&&a.push(`${n}m`),i>0&&a.push(`${i}s`),a.join(" ")||"0s"}return`${r}h ${n}m ${i}s`}function sf(s,t={}){let e=d0(s);if(!e)return"";let{type:r="ago",suffix:n="",shortUnits:i=!1}=t,a=new Date,f=e<a,p=Math.abs(r==="ago"?a.getTime()-e.getTime():e.getTime()-a.getTime()),o=Math.floor(p/1e3),u={year:31536e3,month:2592e3,day:86400,hour:3600,minute:60,second:1},c={year:i?"y":"year",month:i?"mo":"month",day:i?"d":"day",hour:i?"h":"hour",minute:i?"m":"minute",second:i?"s":"second"};for(let[h,m]of Object.entries(u)){let w=o/m;if(w>=1){let y=Math.floor(w),v=c[h],x=!i&&y!==1?v+"s":v,d=`${y} ${x}`;return n?`${d} ${n}`.trim():d}}let l=i?"0s":"0 seconds";return n?`${l} ${n}`.trim():l}function u1(s,t="ago",e="ago"){return sf(s,{suffix:"ago",type:"ago"})}function c1(s,t="until",e="left"){return sf(s,{suffix:"left",type:"until"})}var sc={};g(sc,{CACHE_EXPIRATION:()=>He,cache:()=>Re,clearWatch:()=>V1,config:()=>v0,distanceBetween:()=>j1,getBearing:()=>W1,getBounds:()=>Q1,getLocation:()=>F1,isPointInBounds:()=>Y1,simplifyCoordinates:()=>G1,watchLocation:()=>B1});var Ni=class{constructor(t=-1){this.storage={},this.ttl=t>0?t:0}all(){let t=Object.keys(this.storage),e={},r;for(let n of t)r=this.get(n),r!==void 0&&(e[n]=this.get(n));return e}delete(t){this.storage[t]&&delete this.storage[t]}get(t){let e=this.storage[t],r;return e?e.ttl===0?(r=e.value,this.delete(t)):this.isCachedItemHealthy(e)&&(r=e.value):r=void 0,r}exists(t){return this.storage[t]!==void 0}has(t){return this.get(t)!==void 0}set(t,e,r=0,n=!1){let i=this.has(t),a=Date.now();return i&&this.isImmutable(t)?!1:(this.storage[t]={immutable:n,time:a,ttl:r,value:e},!0)}isCachedItemHealthy(t){let e=Date.now(),r=t.time,n=t.ttl;return r+n>e}isImmutable(t){let e=this.storage[t];return!!(e!=null&&e.immutable)}};var tc={};g(tc,{EARTH_RADIUS:()=>Ju,FOOT_METER_RATIO:()=>rf,MPH_METER_RATIO:()=>nf,angle:()=>f0,angleAsDegrees:()=>l1,angleDifference:()=>p0,angleDifferenceAsDegrees:()=>h1,angleFromVector:()=>d1,angleFromVectors:()=>f1,angleNormalize:()=>p1,clamp:()=>pn,clampUnsigned:()=>m0,degreesToSlope:()=>m1,denormalize:()=>g1,distance:()=>x1,dot:()=>y1,feetToMeters:()=>w1,inverseLerp:()=>g0,lerp:()=>x0,logarithmicZoom:()=>v1,metersToFeet:()=>b1,minMax:()=>M1,minMaxUnsigned:()=>T1,mphToMs:()=>E1,msToMph:()=>O1,normalize:()=>C1,randomInt:()=>I1,randomRange:()=>y0,randomSign:()=>D1,remap:()=>_1,rotate:()=>w0,rotateDeg:()=>k1,round:()=>S1,roundToDecimal:()=>A1,roundToNearest:()=>U1,roundToNearestFraction:()=>P1,slopeToDegrees:()=>L1,smootherstep:()=>H1,smoothstep:()=>q1,toDegrees:()=>Ys,toRadians:()=>Vt,transformRatio:()=>R1});var W=class{static linear(t){return t}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}static easeInCubic(t){return t*t*t}static easeOutCubic(t){return--t*t*t+1}static easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}static easeInQuart(t){return t*t*t*t}static easeOutQuart(t){return 1- --t*t*t*t}static easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}static easeInQuint(t){return t*t*t*t*t}static easeOutQuint(t){return 1+--t*t*t*t*t}static easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}static easeInSine(t){return 1-Math.cos(t*Math.PI/2)}static easeOutSine(t){return Math.sin(t*Math.PI/2)}static easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}static easeInExpo(t){return t===0?0:Math.pow(2,10*(t-1))}static easeOutExpo(t){return t===1?1:-Math.pow(2,-10*t)+1}static easeInOutExpo(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)}static easeInCirc(t){return-(Math.sqrt(1-t*t)-1)}static easeOutCirc(t){return Math.sqrt(1- --t*t)}static easeInOutCirc(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static easeInBack(t,e=1.70158){return t*t*((e+1)*t-e)}static easeOutBack(t,e=1.70158){return--t*t*((e+1)*t+e)+1}static easeInOutBack(t,e=1.70158){return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)}},Ms=class s{static linear(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.linear,n)}static easeInQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInQuad,n)}static easeOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeOutQuad,n)}static easeInOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInOutQuad,n)}static easeInQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInQuart,n)}static easeOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeOutQuart,n)}static easeInOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInOutQuart,n)}static easeInQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInQuint,n)}static easeOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeOutQuint,n)}static easeInOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInOutQuint,n)}static easeInCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInCubic,n)}static easeOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeOutCubic,n)}static easeInOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInOutCubic,n)}static easeInSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInSine,n)}static easeOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeOutSine,n)}static easeInOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInOutSine,n)}static easeInExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInExpo,n)}static easeOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeOutExpo,n)}static easeInOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInOutExpo,n)}static easeInCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInCirc,n)}static easeOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeOutCirc,n)}static easeInOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInOutCirc,n)}static easeInBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInBack,n)}static easeOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeOutBack,n)}static easeInOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,W.easeInOutBack,n)}static normalize(t,e=0,r=1,n,i=!0){let a=s.clamp((t-e)/(r-e),0,1);return i?n(a):e+(r-e)*n(a)}static clamp(t,e=0,r=1){return Math.min(Math.max(t,e),r)}};function $i(s){return Ms.hasOwnProperty(s)?Ms[s]:Ms.easeInOutQuad}var Ju=6371,rf=3.28084,nf=.44704;function f0(s,t,e,r){return Math.atan2(r-t,e-s)}function l1(s,t,e,r){return f0(s,t,e,r)*180/Math.PI}function p0(s,t){return Math.atan2(Math.sin(t-s),Math.cos(t-s))}function h1(s,t){return p0(s,t)*180/Math.PI}function d1(s){return Math.atan2(s.y,s.x)}function f1(s,t){return Math.atan2(t.y-s.y,t.x-s.x)}function p1(s){return s=s%360,s<0&&(s+=360),s}function pn(s,t,e){return Math.min(Math.max(s,t),e)}function m0(s,t,e){return[t,e]=[Math.min(t,e),Math.max(t,e)],Math.sign(s)*Math.min(Math.abs(s),Math.abs(s)>t?e:t)}function m1(s){return Math.tan(s*(Math.PI/180))}function g1(s,t,e,r=!1){let n=s*(e-t)+t;return r&&(n=pn(n,t,e)),n}function x1(s,t,e,r){return Math.sqrt((e-s)**2+(r-t)**2)}function y1(s,t,e,r){return s*e+t*r}function w1(s){return s/rf}function g0(s,t,e){return(e-s)/(t-s)}function x0(s,t,e){return s+(t-s)*e}function v1(s,t,e=.025){let r=Math.log(s),n=Math.log(t+1)||0;return Math.exp(r+n*e)}function b1(s){return s*rf}function M1(s,t,e){return pn(s,t,e)}function T1(s,t,e){return m0(s,t,e)}function E1(s){return s*nf}function O1(s){return s/nf}function C1(s,t,e,r=!1){let n=(s-t)/(e-t);return r&&(n=pn(n,t,e)),n}function _1(s,t,e,r,n){return r+(n-r)*g0(t,e,s)}function y0(s,t){return x0(s,t,Math.random())}function I1(s,t){return Math.floor(y0(s,t+1))}function D1(){return Math.random()<.5?-1:1}function w0(s,t,e){let r=Math.sin(e),n=Math.cos(e);return[s*n-t*r,s*r+t*n]}function k1(s,t,e){return w0(s,t,e*Math.PI/180)}function S1(s,t=2){return Number(s.toFixed(t))}function U1(s,t){return Math.round(s/t)*t}function P1(s,t){return Math.round(s*t)/t}function A1(s,t){return Math.round(s*10**t)/10**t}function L1(s){return Math.atan(s)*(180/Math.PI)}function q1(s,t,e){let r=pn((e-s)/(t-s),0,1);return r*r*(3-2*r)}function H1(s,t,e){let r=pn((e-s)/(t-s),0,1);return r*r*r*(r*(r*6-15)+10)}function Vt(s){return s*Math.PI/180}function Ys(s){return s*180/Math.PI}function R1(s,t=4,e="linear",r=""){r||(r=e);let n=$i(e),i=$i(r);return s<=1/t?n(s/(1/t)):s<=1-1/t?1:i((1-s)/(1/t))}var v0={IP_LOCATION_API:"https://ipapi.co/json/"},He=1e3*6*2,Re=new Ni(He);async function F1(){let s="geolocation",t=Re.get(s);if(t)return t;try{return navigator!=null&&navigator.geolocation?await N1(s):await Z1()?await $1(s):await z1(s)}catch(e){throw e instanceof Error?e:new he("Unknown error occurred")}}function B1(s,t,e={enableHighAccuracy:!0}){let r="geolocation";return navigator!=null&&navigator.geolocation?navigator.geolocation.watchPosition(n=>{let i=Gs(n);Re.set(r,i,He),P.dispatch("location:change",i),s==null||s(i)},async n=>{try{let i=await ec(),a=Gs(i);Re.set(r,a,He),P.dispatch("location:change",a),s==null||s(a)}catch(i){P.dispatch("location:error",n),t==null||t(n)}},e):0}function V1(s){try{if(!(navigator!=null&&navigator.geolocation))throw new he("Geolocation is not supported by this browser.");navigator.geolocation.clearWatch(s)}catch(t){console.error("Error clearing geolocation watch:",t)}}async function N1(s){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(r=>{let n=Gs(r);Re.set(s,n,He),console.info("\u{1F538} Location",n),P.dispatch("location:change",n),t(n)},async r=>{if(console.warn("Browser geolocation error:",r),r.code===r.PERMISSION_DENIED)e(new he("Permission denied for geolocation."));else if(r.code===r.POSITION_UNAVAILABLE)e(new he("Geolocation position unavailable."));else if(r.code===r.TIMEOUT)e(new he("Geolocation request timed out."));else try{let n=await ec(),i=Gs(n);Re.set(s,i,He),console.info("\u{1F53A} Location",i),P.dispatch("location:change",i),t(i)}catch(n){e(new he("Fallback IP location failed."))}})})}async function $1(s){try{let{Geolocation:t}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1)),e=await t.getCurrentPosition(),r=Gs(e);return Re.set(s,r,He),console.info("\u{1F539} Location",r),P.dispatch("location:change",r),r}catch(t){try{let e=await ec(),r=Gs(e);return Re.set(s,r,He),console.info("\u{1F53A} Location",r),P.dispatch("location:change",r),r}catch(e){throw P.dispatch("location:error",t),t}}}async function z1(s){try{let t=await ec(),e=Gs(t);return Re.set(s,e,He),console.info("\u{1F53A} Location",e),P.dispatch("location:change",e),e}catch(t){throw P.dispatch("location:error",t),new he("Failed to get IP location")}}async function ec(){let t=await(await fetch(v0.IP_LOCATION_API)).json();return{coords:{accuracy:5e3,altitude:null,altitudeAccuracy:null,heading:null,latitude:t.latitude,longitude:t.longitude,speed:null},timestamp:Date.now()}}function Gs(s){return{position:s,timestamp:Date.now()}}function j1(s,t,e,r){let n=Ju,i=Vt(e-s),a=Vt(r-t),f=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Vt(s))*Math.cos(Vt(e))*Math.sin(a/2)*Math.sin(a/2),p=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return n*p}function W1(s,t,e,r){let n=Vt(r-t),i=Math.sin(n)*Math.cos(Vt(e)),a=Math.cos(Vt(s))*Math.sin(Vt(e))-Math.sin(Vt(s))*Math.cos(Vt(e))*Math.cos(n);return(Ys(Math.atan2(i,a))+360)%360}function Q1(s,t,e){let r=Ju,n=Vt(s),i=Vt(t),a=e/r;return{latitudeMin:Ys(n-a),latitudeMax:Ys(n+a),longitudeMin:Ys(i-a/Math.cos(n)),longitudeMax:Ys(i+a/Math.cos(n))}}function Y1(s,t,e){return s>=e.latitudeMin&&s<=e.latitudeMax&&t>=e.longitudeMin&&t<=e.longitudeMax}function G1(s,t,e=1e3){var a,f;let r,n,i=e;if(typeof s=="number"&&typeof t=="number")r=s,n=t,i=e;else if(Array.isArray(s))[r,n]=s;else if(typeof s=="object")"position"in s?(r=s.position.lat,n=s.position.lng):(r=(a=s==null?void 0:s.latitude)!=null?a:(s==null?void 0:s.lat)||0,n=(f=s==null?void 0:s.longitude)!=null?f:(s==null?void 0:s.lng)||0);else throw new Error("Invalid coordinates format");if(typeof r!="number"||typeof n!="number")throw new Error("Invalid coordinates: latitude and longitude must be numbers");return{latitude:Math.round(r*i)/i,longitude:Math.round(n*i)/i}}async function Z1(){try{let{Geolocation:s}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1));return!!s}catch(s){return!1}}var rc={};g(rc,{castToDevice:()=>J1,isFullscreenActive:()=>X1,toggleFullscreen:()=>K1});function K1(s=document.body){document.fullscreenElement?document.exitFullscreen().catch(t=>{console.error(`Error attempting to exit fullscreen mode: ${t.message}`)}):s.requestFullscreen().catch(t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message}`)})}function X1(){return!!document.fullscreenElement}async function J1(s){if(!("presentation"in navigator)){console.error("Presentation API is not supported in this browser.");return}try{new PresentationRequest([s]).start().then(e=>{console.log("Connected to presentation:",e),e.onterminate=()=>{console.log("Presentation terminated.")}},e=>{console.error("Error starting presentation:",e)})}catch(t){console.error("Error casting to device:",t)}}var nc={};g(nc,{canShare:()=>M0,hasSupport:()=>of,native:()=>b0,remoteFile:()=>tM});async function b0(s=[],t="",e="",r=""){let n={files:s,text:e,title:t,url:r};if(of()===!1)throw new Error("This browser does not support navigator share");if(M0()===!1)throw new Error("Sharing is not supported, make sure you are on HTTPS");return navigator.canShare(n)?(await navigator.share(n),!0):!1}async function tM(s,t="",e="",r=""){let n=await eM(s);return b0([n],t,e,r)}function of(){return"share"in navigator}function M0(){return of()&&!!navigator.canShare}async function eM(s="",t="my-file.png"){s||(s="https://cdn.glitch.com/f96f78ec-d35d-447b-acf4-86f2b3658491%2Fchuck.png?v=1618311092497");let e=await fetch(s).then(i=>i.blob()),r=e.type.split(";").shift();return new File([e],t,{type:r})}var ic={};g(ic,{basicHash:()=>sM,capitalize:()=>rM,chunkSentences:()=>nM,md5:()=>iM,random:()=>oM,shuffle:()=>aM,slug:()=>uM,trimSentences:()=>lM,truncate:()=>cM});function sM(s){return s.split("").reduce((t,e)=>(t=(t<<5)-t+e.charCodeAt(0),t&t),0).toString()}function rM(s){return s.charAt(0).toUpperCase()+s.slice(1)}function nM(s,t=130){let e=s.replace(/\.$/,"").split(". "),r=[];return e.forEach(n=>{r.length===0||r[r.length-1].length>t?r.push(n+"."):(n=n.trim(),r[r.length-1]+=` ${n}.`)}),r}function iM(s){let t="0123456789abcdef",e=new TextEncoder().encode(s),r=e.length*8,n=(448-(e.length*8+1)%512+512)%512,i=e.length+Math.ceil(n/8)+8,a=new Uint8Array(i);a.set(e),a[e.length]=128;let f=new DataView(a.buffer);f.setUint32(i-8,r>>>0,!0),f.setUint32(i-4,Math.floor(r/4294967296),!0);let p=new Uint32Array(i/4);for(let x=0;x<i;x+=4)p[x/4]=f.getUint32(x,!0);let o=1732584193,u=4023233417,c=2562383102,l=271733878;function h(x,d){return x<<d|x>>>32-d}function m(x,d,M){return x&d|~x&M}function w(x,d,M){return x&M|d&~M}function y(x,d,M){return x^d^M}function v(x,d,M){return d^(x|~M)}for(let x=0;x<p.length;x+=16){let d=p.slice(x,x+16),[M,Ot,Ut,Pt]=[o,u,c,l];o=h(o+m(u,c,l)+d[0]+3614090360,7)+u,l=h(l+m(o,u,c)+d[1]+3905402710,12)+o,c=h(c+m(l,o,u)+d[2]+606105819,17)+l,u=h(u+m(c,l,o)+d[3]+3250441966,22)+c,o=h(o+m(u,c,l)+d[4]+4118548399,7)+u,l=h(l+m(o,u,c)+d[5]+1200080426,12)+o,c=h(c+m(l,o,u)+d[6]+2821735955,17)+l,u=h(u+m(c,l,o)+d[7]+4249261313,22)+c,o=h(o+m(u,c,l)+d[8]+1770035416,7)+u,l=h(l+m(o,u,c)+d[9]+2336552879,12)+o,c=h(c+m(l,o,u)+d[10]+4294925233,17)+l,u=h(u+m(c,l,o)+d[11]+2304563134,22)+c,o=h(o+m(u,c,l)+d[12]+1804603682,7)+u,l=h(l+m(o,u,c)+d[13]+4254626195,12)+o,c=h(c+m(l,o,u)+d[14]+2792965006,17)+l,u=h(u+m(c,l,o)+d[15]+1236535329,22)+c,o=h(o+w(u,c,l)+d[1]+4129170786,5)+u,l=h(l+w(o,u,c)+d[6]+3225465664,9)+o,c=h(c+w(l,o,u)+d[11]+643717713,14)+l,u=h(u+w(c,l,o)+d[0]+3921069994,20)+c,o=h(o+w(u,c,l)+d[5]+3593408605,5)+u,l=h(l+w(o,u,c)+d[10]+38016083,9)+o,c=h(c+w(l,o,u)+d[15]+3634488961,14)+l,u=h(u+w(c,l,o)+d[4]+3889429448,20)+c,o=h(o+w(u,c,l)+d[9]+568446438,5)+u,l=h(l+w(o,u,c)+d[14]+3275163606,9)+o,c=h(c+w(l,o,u)+d[3]+4107603335,14)+l,u=h(u+w(c,l,o)+d[8]+1163531501,20)+c,o=h(o+w(u,c,l)+d[13]+2850285829,5)+u,l=h(l+w(o,u,c)+d[2]+4243563512,9)+o,c=h(c+w(l,o,u)+d[7]+1735328473,14)+l,u=h(u+w(c,l,o)+d[12]+2368359562,20)+c,o=h(o+y(u,c,l)+d[5]+4294588738,4)+u,l=h(l+y(o,u,c)+d[8]+2272392833,11)+o,c=h(c+y(l,o,u)+d[11]+1839030562,16)+l,u=h(u+y(c,l,o)+d[14]+4259657740,23)+c,o=h(o+y(u,c,l)+d[1]+2763975236,4)+u,l=h(l+y(o,u,c)+d[4]+1272893353,11)+o,c=h(c+y(l,o,u)+d[7]+4139469664,16)+l,u=h(u+y(c,l,o)+d[10]+3200236656,23)+c,o=h(o+y(u,c,l)+d[13]+681279174,4)+u,l=h(l+y(o,u,c)+d[0]+3936430074,11)+o,c=h(c+y(l,o,u)+d[3]+3572445317,16)+l,u=h(u+y(c,l,o)+d[6]+76029189,23)+c,o=h(o+y(u,c,l)+d[9]+3654602809,4)+u,l=h(l+y(o,u,c)+d[12]+3873151461,11)+o,c=h(c+y(l,o,u)+d[15]+530742520,16)+l,u=h(u+y(c,l,o)+d[2]+3299628645,23)+c,o=h(o+v(u,c,l)+d[0]+4096336452,6)+u,l=h(l+v(o,u,c)+d[7]+1126891415,10)+o,c=h(c+v(l,o,u)+d[14]+2878612391,15)+l,u=h(u+v(c,l,o)+d[5]+4237533241,21)+c,o=h(o+v(u,c,l)+d[12]+1700485571,6)+u,l=h(l+v(o,u,c)+d[3]+2399980690,10)+o,c=h(c+v(l,o,u)+d[10]+4293915773,15)+l,u=h(u+v(c,l,o)+d[1]+2240044497,21)+c,o=h(o+v(u,c,l)+d[8]+1873313359,6)+u,l=h(l+v(o,u,c)+d[15]+4264355552,10)+o,c=h(c+v(l,o,u)+d[6]+2734768916,15)+l,u=h(u+v(c,l,o)+d[13]+1309151649,21)+c,o=h(o+v(u,c,l)+d[4]+4149444226,6)+u,l=h(l+v(o,u,c)+d[11]+3174756917,10)+o,c=h(c+v(l,o,u)+d[2]+718787259,15)+l,u=h(u+v(c,l,o)+d[9]+3951481745,21)+c,o=o+M>>>0,u=u+Ot>>>0,c=c+Ut>>>0,l=l+Pt>>>0}return[o,u,c,l].map(x=>("00000000"+x.toString(16)).slice(-8)).join("")}function oM(s=7){return Math.random().toString(36).substring(s)}function aM(s){let t=s.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function uM(s){return s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function cM(s,t=30){return s.length>t?s.slice(0,t).trim()+"...":s}function lM(s,t=500){let e=s.indexOf(".",t);return s.substr(0,e>0?e+1:s.length)}var af={},uf=class s{static exec(t,e,r=1e3,n=!1,i=[]){if(!af[t]){let a=new s(e,r,!0,n);af[t]=a.run}af[t](...i)}constructor(t,e=200,r=!1,n=!1){this.inclusive=!1,this.lastTrigger=0,this.timeout=0,this.callback=t,this.inclusive=n,this.threshold=e,n||(this.lastTrigger=Date.now()),this.run=this.run.bind(this)}run(t=!1){let e=Date.now();e-this.lastTrigger>this.threshold&&(this.lastTrigger=e,this.callback.apply(null,arguments)),this.timeout!==0&&(clearTimeout(this.timeout),this.timeout=0),this.inclusive&&!t&&(this.timeout=setTimeout(()=>this.run(!0),this.threshold))}};function hM(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function dM(s,t=document.documentElement){return getComputedStyle(t).getPropertyValue(s).trim()}function fM(s=""){return s||(s=U.CURRENT_DATE),s?new Date(s):new Date}function pM(s){let t=0;do t+=s.offsetLeft,s=s.offsetParent;while(s);return t}function mM(s){return s.offsetHeight}function gM(s){let t=0;do t+=s.offsetTop,s=s.offsetParent;while(s);return t}function xM(s){return s.offsetWidth}var yM=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);function wM(s){return new Promise(t=>setTimeout(t,s))}var T0=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);var mn=class s{static get instance(){return this._instance||(this._instance=new s),this._instance}static add(t,e=16,r=""){let n,i=0,a=0,f=0;return r||(r=Math.random().toString(32).substr(2,6)),t.hasOwnProperty("callback")?(e=t.fps||e,n=t.callback,r=t.name||r,f=t.stopAfter||0):n=t,this.instance.unpause(),this.instance.intervals.push({executions:i,fps:e,func:n,lastTick:a,name:r,stopAfter:f}),r}static fps(t,e,r){return this.instance.intervals.filter(n=>{n.name===t&&(n.fps=e||n.fps,n.func=r||n.func)}),this.instance}static list(){console.log(this.instance.intervals)}static remove(t){this.instance.intervals=this.instance.intervals.filter(e=>e.name!=t)}static start(){this.instance&&this.instance.unpause()}static stop(){this.instance&&this.instance.pause()}constructor(){this.enabled=!1,this.intervals=[],this.lastFrameTime=0,this.Handle_OnRequestAnimationFrame=this.Handle_OnRequestAnimationFrame.bind(this)}pause(){this.enabled=!1}unpause(){this.enabled=!0,this.Handle_OnRequestAnimationFrame()}async Handle_OnRequestAnimationFrame(){if(!this.enabled)return;let t=Date.now();this.intervals.forEach(e=>{if(t-(e.lastTick||0)>e.fps){if(e.stopAfter&&e.executions>=e.stopAfter){s.remove(e.name);return}e.func({}),e.lastTick=t,e.executions++}}),this.lastFrameTime=Date.now(),T0(this.Handle_OnRequestAnimationFrame)}};var cf=class s extends ht.Dispatcher{static add(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),e}static wait(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),new Promise(r=>{e.once("change",n=>{e.stop(),r(n)})})}constructor(t,e=20,r=2e3){super(),this.conditionMetCount=0,this.isVariableSet=!1,this.intervalName="",this.condition=t,this.threshold=e,this.duration=r}reset(){this.conditionMetCount=0}start(){this.intervalName=mn.add(()=>this.checkCondition(),this.duration/this.threshold)}stop(){mn.remove(this.intervalName)}checkCondition(){this.condition()?(this.conditionMetCount=Math.min(this.threshold,this.conditionMetCount+1),this.conditionMetCount>=this.threshold&&!this.isVariableSet&&(this.isVariableSet=!0,this.dispatch("set"),this.dispatch("change",{set:this.isVariableSet}))):(this.conditionMetCount=Math.max(0,this.conditionMetCount-1),this.conditionMetCount<=0&&this.isVariableSet&&(this.isVariableSet=!1,this.dispatch("unset"),this.dispatch("change",{set:this.isVariableSet})))}};var oc=class extends on{};var E0=z(Et(),1),vM="1.31.9";var gn={};g(gn,{Authentication:()=>ac});var ac={};g(ac,{model:()=>MM});var Ts={};g(Ts,{Authentication:()=>ji,Jwt:()=>zi,User:()=>bM});var zi=class extends j.Base{constructor(){super(...arguments),this.fields=["token","type"]}getToken(){return this.attr("token")}getType(){return this.attr("type")}};var ji=class extends j.Base{constructor(){super(...arguments),this.endpoint="auth/login",this.fields=["jwt","user"]}get jwt(){return this.hasOne("jwt",zi)}get user(){return this.hasOne("user",j.User)}isLoggedIn(){var t;return!!((t=this.user)!=null&&t.id)}async login(t,e){return new Promise((r,n)=>{this.post({email:t,password:e}).then(i=>{var f;let a=this.handleResponse(((f=i.response)==null?void 0:f.data)||{});r(a)}).catch(i=>{var f;let a=this.handleError(((f=i.response)==null?void 0:f.data)||{});n(a)})})}async loginWithToken(t){return new Promise((e,r)=>{this.endpoint="auth/login-with-token",this.setHeader("Authorization",`Bearer ${t}`),this.post().then(n=>{var a;let i=this.handleResponse(((a=n.response)==null?void 0:a.data)||{});e(i)}).catch(n=>{var a;let i=this.handleError(((a=n.response)==null?void 0:a.data)||{});r(i)})})}loginSocial(t="google",e="/"){let n=`${this.baseUrl}/auth/${t}?redirectTo=${encodeURIComponent(e)}`;location.href=n}loginWithGoogle(t="/"){this.loginSocial("google",t)}loginWithFacebook(t="/"){this.loginSocial("facebook",t)}async signup(t){return new Promise((e,r)=>{this.endpoint="auth/register",this.post(t).then(n=>{var a;let i=this.handleResponse(((a=n.response)==null?void 0:a.data)||{});e(i)}).catch(n=>{var a;let i=this.handleError(((a=n.response)==null?void 0:a.data)||{});r(i)})})}handleResponse(t={}){let e=t==null?void 0:t.data.permissions,r=t==null?void 0:t.data.token,n=j.User.hydrate(t==null?void 0:t.data.user);this.set({jwt:{permissions:e,token:r},user:n});let i=vs.Store.get();return i.state.token=r,i.state.user=t==null?void 0:t.data.user,i.dispatch("authentication/login",{token:r,user:t==null?void 0:t.data.user}),this.trigger("login",{userModel:n}),this.trigger("success",{userModel:n}),n}handleError(t={}){let e=Object.assign(t.data,{code:t.status||0});return this.trigger("login:error",{error:e}),this.trigger("error",{error:e}),e}static getAuthToken(){return new URLSearchParams(location.search).get("token")||""}};var{User:bM}=j;function MM(s={}){return new ji(void 0,Object.assign({baseUrl:U.API_URL_V1},s))}var En={};g(En,{ChalkySticks:()=>Wi,Collection:()=>V,Constants:()=>D,Core:()=>Dc,Enum:()=>te,Environment:()=>Gt,Event:()=>ft,Exception:()=>sr,Factory:()=>ee,Input:()=>yc,Model:()=>k,Provider:()=>wn,Request:()=>B0.Request,Utility:()=>se,Version:()=>wE});var D={API_URL:"https://api.chalkysticks.com/v3",API_URL_DEV_V1:"http://localhost:8000/v1",API_URL_DEV_V2:"http://localhost:8000/v2",API_URL_V1:"https://api.chalkysticks.com/v1",API_URL_V2:"https://api.chalkysticks.com/v2",API_URL_V3:"https://api.chalkysticks.com/v3",CURRENT_DATE:"",DEFAULT_COLLECTION_LIMIT:20,NOTIFICATION_PREFERENCE:"native",STATIC_URL:"https://static.chalkysticks.com",WALLET_COLLECTION_TIME:60*60*6};var Wi=class{static configure(t={}){let e;Object.assign(D,t.constants)}};var V={};g(V,{Advertisement:()=>to,Base:()=>pt,Content:()=>eo,ContentTag:()=>Gi,Media:()=>Ji,Meta:()=>vn,Rulebook:()=>so,Statistic:()=>ro,User:()=>no,Wallet:()=>io});var k={};g(k,{Advertisement:()=>Ks,Base:()=>rt,Content:()=>Xs,ContentTag:()=>Zi,Geocode:()=>Ki,Media:()=>Js,Meta:()=>Xi,Rulebook:()=>tr,Statistic:()=>er,User:()=>Be,Wallet:()=>Ve});var ft={};g(ft,{Bus:()=>A,Dispatcher:()=>xn,DispatcherEvent:()=>Qi});var Qi=class{constructor(t,e){this.callbacks=[],this.eventName=t,e&&(this.envelope=e)}clearCallbacks(){this.callbacks=[]}registerCallback(t){this.callbacks.push(t)}unregisterCallback(t){let e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}fire(t){this.callbacks.slice(0).forEach(r=>{r(Object.assign({},this.envelope,t))})}};var xn=class{constructor(){this.events={}}dispatch(t,e){let r=this.events[t];r&&r.fire({data:e,event:{name:t,time:Date.now()},target:this})}on(t,e){let r=this.events[t];r||(r=new Qi(t),this.events[t]=r),r.registerCallback(e)}once(t,e){let r=n=>{e(n),this.off(t,r)};this.on(t,r)}off(t,e){let r=this.events[t];r&&!e?(r.clearCallbacks(),delete this.events[t]):r&&e&&r.callbacks.indexOf(e)>-1&&(r.unregisterCallback(e),r.callbacks.length===0&&delete this.events[t])}$emit(t,e={}){return this.dispatch(t,e)}trigger(t,e={}){return this.dispatch(t,e)}$on(t,e){return this.on(t,e)}$off(t,e){return this.off(t,e)}},A=new xn;var wn={};g(wn,{Store:()=>yn});var hf=class{get(){return this.instance||this.register({actions:{},commit:(t,e)=>{},dispatch:(t,e)=>{},getters:{},mutations:{},state:{}}),this.instance}register(t){this.instance=t}},yn=new hf;var df=class{constructor(){this.id=Math.random().toString(36).substr(2,9)}get app(){return Fe.getVariable("app",{apiUrl:"",limit:32,localUrl:""})}get debug(){return Fe.getVariable("debug",!1)}get env(){return Fe.getVariable("env","development")}get google(){return Fe.getVariable("google",{analytics:{id:""},api_key:""})}isLocal(){return Fe.env==="local"||Fe.env==="development"}isProduction(){return Fe.env==="production"}isStaging(){return Fe.env==="staging"}getVariable(t,e){let r=typeof window=="object"&&window.env?window.env:{},n=typeof window=="object"&&window.chalky?window.chalky:{};return{...r,...n}[t]||e}},Fe=new df,Gt=Fe;var O0=z(Et(),1),rt=class extends O0.Model{constructor(t={},e={}){var r;if(super(t,e),this.baseUrl=Gt.app.apiUrl,this.baseUrl=e.baseUrl||this.baseUrl||Gt.app.apiUrl||D.API_URL,this.setOptions({withCredentials:!1}),e.token)this.setToken(e.token);else{let n=yn.get(),i=((r=n==null?void 0:n.state)==null?void 0:r.token)||(n==null?void 0:n.getters["authentication/token"]);i&&this.setToken(i)}this.attachEvents()}attachEvents(){this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),A.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),A.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={model:this};e===401?(this.dispatch("request:unauthorized",r),A.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),A.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),A.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),A.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),A.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),A.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),A.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}getBaseUrl(){return Gt.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var Ks=class extends rt{constructor(){super(...arguments),this.endpoint="ads",this.fields=["caption","company","image","url"]}getCaption(){return this.attr("caption")}getCompany(){return this.attr("company")}getImage(){return this.attr("image")}getUrl(){return this.attr("url")}};var Yi={};g(Yi,{isYouTube:()=>ff,parseId:()=>pf,thumbnailUrl:()=>TM,toEmbedUrl:()=>mf});function ff(s){return s.match(/(?:youtube\.com|youtu\.be)/)!==null}function pf(s){let t=s.match(/(?:\?v=|\/embed\/|\/\d+\/|\.be\/)([a-zA-Z0-9_-]+)/);return t?t[1]:""}function TM(s){return`https://img.youtube.com/vi/${pf(s)}/hqdefault.jpg`}function mf(s){return`https://www.youtube.com/embed/${pf(s)}`}var Xs=class extends rt{constructor(){super(...arguments),this.endpoint="content",this.fields=["title","media_type","media_url","thumbnail_url","content","created_at","updated_at"]}get tags(){return this.hasMany("tags",Gi)}getContent(){return this.attr("content")}getMediaType(){return this.attr("media_type")}getMediaUrl(){return this.attr("media_url")}getThumbnailUrl(){return this.attr("thumbnail_url")}getTitle(){return this.attr("title")}getYouTubeEmbed(){return ff(this.getMediaUrl())?mf(this.getMediaUrl()):""}hasContent(){return!!this.getContent()}isImage(){return this.getMediaType()==="image"}isVideo(){return this.getMediaType()==="video"}};var Zi=class extends rt{constructor(){super(...arguments),this.fields=["content_id","tag"]}getTag(){return this.attr("tag")}};var Ki=class s extends rt{constructor(){super(...arguments),this.endpoint="data/geocode",this.fields=["status","results"]}static async search(t){let e=new s;return await e.fetch({},{address:t}),e}getCityAndState(){var n,i;let t=this.getAddressComponents(),e=((n=t.find(a=>a.types.includes("locality")))==null?void 0:n.long_name)||"",r=((i=t.find(a=>a.types.includes("administrative_area_level_1")))==null?void 0:i.short_name)||"";return`${e}, ${r}`}getCountry(){var e;return((e=this.getAddressComponents().find(r=>r.types.includes("country")))==null?void 0:e.long_name)||""}getFullAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.long_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.long_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.long_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.long_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.long_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.long_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getLocation(){let t=0,e=0;if(this.hasResults()){let n=this.getResults()[0].geometry.location;t=n.lat,e=n.lng}return{latitude:t,longitude:e}}getResults(){return this.attr("results")}getShortAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.short_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.short_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.short_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.short_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.short_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.short_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getStatus(){return this.attributes.status||""}hasResults(){let t=this.getResults();return t&&t[0]&&t[0].geometry}isOK(){return this.getStatus()==="OK"}getAddressComponents(){return this.getResults()[0].address_components}};var Js=class extends rt{constructor(){super(...arguments),this.endpoint="media",this.fields=["id","type","url","group","subgroup","created_at","updated_at"],this.proxyUrl="https://d2k0n0ggvekdpx.cloudfront.net"}getGroup(){return this.attr("group")}getSubgroup(){return this.attr("subgroup")}getProxiedUrl(t={width:1024}){let e=this.getUrl(),r=["unsafe"],n=[];if(!e)return e;if(n.push("format(webp)"),t.width||t.height){let i=`${t.width||""}x${t.height||""}`;t.fitIn&&r.push("fit-in"),r.push(i)}if(t.smart&&r.push("smart"),t.filters){if(t.filters.quality&&n.push(`quality(${t.filters.quality})`),t.filters.blur&&n.push(`blur(${t.filters.blur})`),t.filters.brightness&&n.push(`brightness(${t.filters.brightness})`),t.filters.contrast&&n.push(`contrast(${t.filters.contrast})`),t.filters.grayscale&&n.push("grayscale()"),t.filters.watermark){let i=t.filters.watermark;n.push(`watermark(${i.image},${i.x},${i.y},${i.transparency||0})`)}n.length>0&&r.push(`filters:${n.join(":")}`)}return`${this.proxyUrl}/${r.join("/")}/${this.getUrl()}`}getType(){return this.attr("type")}getUrl(){return this.attr("url")}getUrlSmall(){return this.getProxiedUrl({width:256})}getUrlMedium(){return this.getProxiedUrl({width:512})}getUrlLarge(){return this.getProxiedUrl({width:1024})}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var Xi=class extends rt{constructor(){super(...arguments),this.fields=["id","group","key","value","created_at","updated_at"]}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var tr=class extends rt{constructor(){super(...arguments),this.endpoint="rulebooks",this.fields=["content"]}getContent(){return this.attr("content")}};var er=class extends rt{constructor(){super(...arguments),this.endpoint="statistics",this.fields=["beacon_count","city_count","venue_count","user_count","video_duration_as_minutes","video_duration_as_hours"]}getBeaconCount(){return this.attr("beacon_count")}getCityCount(){return this.attr("city_count")}getVenueCount(){return this.attr("venue_count")}getUserCount(){return this.attr("user_count")}getVideoDurationAsMinutes(){return this.attr("video_duration_as_minutes")}getVideoDurationAsHours(){return this.attr("video_duration_as_hours")}};var Be=class extends rt{constructor(){super(...arguments),this.endpoint="users",this.fields=["id","lat","lon","name","phone","slug","status","wallet_balance","created_at","updated_at"]}get avatar(){return this.media.primary||new Js}get games(){return this.hasMany("games",vn)}get lastCollection(){return this.hasOne("last_collection",Ve)}get media(){let t=this.hasMany("media",Ji);return t.useModifiedEndpoint(this),t}get metadata(){return this.hasMany("meta",vn)}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getName(){return this.attr("name")}getPermissions(){return parseFloat(this.attr("permissions"))}getPhone(){return this.attr("phone")}getSlug(){return this.attr("slug")}getStatus(){return parseFloat(this.attr("status"))}getWalletBalance(){return parseFloat(this.attr("wallet_balance"))}};var Ve=class extends rt{constructor(){super(...arguments),this.endpoint="wallet",this.fields=["id","user_id","challenger_id","transaction","source","source_id","created_at","updated_at"]}async collect(t){return this.setHeader("Authorization-API",`Bearer ${t}`),this.setHeader("Content-Type","application/json"),this.id="",this.endpoint="wallet/collect",await this.save(),this}get challenger(){return this.hasOne("challenger",Be)}canCollect(){let t=D.WALLET_COLLECTION_TIME,e=new Date,r=new Date(this.getUpdatedAt());return e.getTime()-r.getTime()>=t}getSource(){return this.attr("source")}getTransaction(){return this.attr("transaction")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var C0=z(Et(),1),pt=class extends C0.Collection{constructor(t={}){var e;if(super(t),this.baseUrl=Gt.app.apiUrl,this.limit=Gt.app.limit,this.baseUrl=t.baseUrl||this.baseUrl||Gt.app.apiUrl||D.API_URL,this.setOptions({withCredentials:!1}),this.limit=t.limit||this.limit,this.page=t.page||this.page,this.builder.qp("limit",this.limit),this.builder.qp("page",this.page),t.token)this.setToken(t.token);else{let r=yn.get(),n=((e=r==null?void 0:r.state)==null?void 0:e.token)||(r==null?void 0:r.getters["authentication/token"]);n&&this.setToken(n)}this.attachEvents()}attachEvents(){this.on("add:before",t=>{t.detail.model.baseUrl=this.baseUrl}),this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),A.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),A.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={collection:this};e===401?(this.dispatch("request:unauthorized",r),A.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),A.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),A.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),A.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),A.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),A.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),A.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}shouldFetch(){return this.loading?!1:this.models.length===0||this.requestTime<=0}getBaseUrl(){return Gt.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var to=class extends pt{constructor(){super(...arguments),this.model=new Ks}};var eo=class extends pt{constructor(){super(...arguments),this.model=new Xs}news(){return this.tags(["news"])}pad(){return this.tags(["pad"])}tags(t=[]){return this.setQueryParam("tags",t.join(",")),this}tutorials(){return this.tags(["tutorial"])}};var Gi=class extends pt{constructor(){super(...arguments),this.model=new Zi}getByTag(t){return this.models.filter(e=>e.getTag()===t)}};var Ji=class extends pt{constructor(){super(...arguments),this.model=new Js}get images(){return this.models.filter(t=>t.getType()==="image")}get primary(){return this.models.at(0)}get videos(){return this.models.filter(t=>t.getType()==="video")}};var vn=class extends pt{constructor(){super(...arguments),this.model=new Xi}getByKey(t){return this.models.filter(e=>e.getKey()===t)}getByGroup(t){return this.models.filter(e=>e.getGroup()===t)}getKeys(){return this.models.map(t=>t.getKey())}getValues(){return this.models.map(t=>t.getValue())}getValuesByKey(t){return this.getByKey(t).map(e=>e.getValue())}getValuesByGroup(t){return this.getByGroup(t).map(e=>e.getValue())}};var so=class extends pt{constructor(){super(...arguments),this.model=new tr}};var ro=class extends pt{constructor(){super(...arguments),this.model=new er}};var no=class extends pt{constructor(){super(...arguments),this.model=new Be}};var io=class extends pt{constructor(){super(...arguments),this.model=new Ve}};var te={};g(te,{Achievement:()=>gf,ContentMediaType:()=>xf,ContentType:()=>yf,Currency:()=>wf,MediaGroup:()=>vf,MediaType:()=>bf,ProductType:()=>Mf});var gf;(function(s){s.FirstPhoto="first_photo"})(gf||(gf={}));var xf;(function(s){s.Image="image",s.Video="video"})(xf||(xf={}));var yf;(function(s){s.News="news",s.Pad="pool-pad",s.Tutorial="tutorial"})(yf||(yf={}));var wf;(function(s){s.CSX="CSX",s.USD="USD"})(wf||(wf={}));var vf;(function(s){s.Default="",s.Community="community",s.Evaluated="evaluated",s.Inappropriate="inappropriate",s.Unknown="unknown"})(vf||(vf={}));var bf;(function(s){s.Exterior="exterior",s.Interior="interior",s.Person="person",s.Table="table"})(bf||(bf={}));var Mf;(function(s){s.Digital="digital",s.Physical="physical"})(Mf||(Mf={}));var sr={};g(sr,{ConnectionRefused:()=>Tf,Geolocation:()=>de,InvalidInput:()=>Ef,InvalidRenderer:()=>Of,InvalidStorageProvider:()=>Cf,NotImplemented:()=>_f,ParserFailure:()=>If,Unauthorized:()=>Df});var Tf=class extends Error{};var de=class extends Error{constructor(t){super(t),this.name="GeolocationError"}};var Ef=class extends Error{};var Of=class extends Error{};var Cf=class extends Error{};var _f=class extends Error{};var If=class extends Error{};var Df=class extends Error{};var ee={};g(ee,{Advertisement:()=>uc,Content:()=>cc,Geocode:()=>lc,Rulebook:()=>hc,Statistic:()=>dc,User:()=>fc,Wallet:()=>pc});var uc={};g(uc,{collection:()=>OM,model:()=>EM});function EM(s={}){return new Ks(void 0,Object.assign({baseUrl:D.API_URL_V3},s))}function OM(s={}){return new to(Object.assign({baseUrl:D.API_URL_V3},s))}var cc={};g(cc,{collection:()=>_M,model:()=>CM});function CM(s={}){return new Xs(void 0,Object.assign({baseUrl:D.API_URL_V3},s))}function _M(s={}){return new eo(Object.assign({baseUrl:D.API_URL_V3},s))}var lc={};g(lc,{model:()=>IM});function IM(s={}){return new Ki(void 0,Object.assign({baseUrl:D.API_URL_V1},s))}var hc={};g(hc,{collection:()=>kM,model:()=>DM});function DM(s={}){return new tr(void 0,Object.assign({baseUrl:D.API_URL_V3},s))}function kM(s={}){return new so(Object.assign({baseUrl:D.API_URL_V3},s))}var dc={};g(dc,{collection:()=>UM,model:()=>SM});function SM(s={}){return new er(void 0,Object.assign({baseUrl:D.API_URL_V3},s))}function UM(s={}){return new ro(Object.assign({baseUrl:D.API_URL_V3},s))}var fc={};g(fc,{collection:()=>AM,model:()=>PM});function PM(s={}){return new Be(void 0,Object.assign({baseUrl:D.API_URL_V1},s))}function AM(s={}){return new no(Object.assign({baseUrl:D.API_URL_V1},s))}var pc={};g(pc,{collection:()=>qM,model:()=>LM});function LM(s={}){return new Ve(void 0,Object.assign({baseUrl:D.API_URL_V1},s))}function qM(s={}){return new io(Object.assign({baseUrl:D.API_URL_V1},s))}var yc={};g(yc,{Keyboard:()=>gc,Pointer:()=>kf,Sensor:()=>xc,Shortcut:()=>rr,ShortcutSequencer:()=>mc,Video:()=>Sf});var rr=class extends ft.Dispatcher{static add(t,e){HM.add(t,e)}constructor(t={}){super(),this.keymap={},this.attached=!1,this.keysDown={},this.options={ignoreInputs:!0},Object.assign(this.options,t||{})}add(t,e){this.ensureSetup(),this.keymap[t]=e}remove(t){delete this.keymap[t]}ensureSetup(){this.attached||(this.attached=!0,document.addEventListener("keydown",this.Handle_OnKeyDown.bind(this)),document.addEventListener("keyup",this.Handle_OnKeyUp.bind(this)))}findMatch(){let t=Object.keys(this.keymap);return t=t.sort((e,r)=>{var n,i;return(((n=r.match(/\+/g))==null?void 0:n.length)||0)-(((i=e.match(/\+/g))==null?void 0:i.length)||0)}),t.find(e=>e.replace(/\s+/g,"").toLowerCase().split("+").every(n=>this.keysDown[n.toLowerCase()]))}normalize(t){return t.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("arrow","")}Handle_OnKeyDown(t){let e=t.target;if(!(t instanceof KeyboardEvent)||this.options.ignoreInputs&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"))return;let r=this.normalize(t.key);this.keysDown[r]=!0;let n=this.findMatch()||"",i=this.keymap[n];i&&(this.trigger("shortcut:found",{match:n}),i())}Handle_OnKeyUp(t){if(!(t instanceof KeyboardEvent))return;let e=this.normalize(t.key);delete this.keysDown[e]}},mc=class s extends ft.Dispatcher{static add(t,e){_0.add(t,e)}static remove(t){_0.remove(t)}static get instance(){return new s}constructor(){super(),this.matches=[],this.sequences={},this.shortcut=new rr,this.shortcut.on("shortcut:found",this.Handle_OnShortcutFound.bind(this))}add(t,e){let r=t.join(",");t.forEach(n=>{this.shortcut.add(n,()=>{})}),this.sequences[r]=e}remove(t){let e=t.join(",");t.forEach(r=>{this.shortcut.remove(r)}),delete this.sequences[e]}async Handle_OnShortcutFound(t){let e=t.data.match;this.matches.push(e),this.matches=this.matches.slice(-20);let r=Object.keys(this.sequences).find(i=>{let a=i.split(","),f=this.matches.slice(-a.length);return f.length>=a.length&&f.every((p,o)=>p===a[o])});if(!r)return;let n=this.sequences[r];n&&n()}},HM=new rr({ignoreInputs:!0}),_0=new mc;var gc=class extends ft.Dispatcher{constructor(){super(...arguments),this.shortcut=new rr({ignoreInputs:!0})}},s4=new gc;var kf=class s extends ft.Dispatcher{static start(t="pointer",e=!1){this.instance||(this.instance=new s(t,e))}constructor(t="pointer",e=!1,r=document){super(),this.angle=0,this.changed=!1,this.distance=0,this.down=!1,this.dx=0,this.dy=0,this.friction=.95,this.inertia=0,this.lastX=0,this.lastY=0,this.moved=!1,this.rx=0,this.rx2=0,this.ry=0,this.ry2=0,this.rox=0,this.roy=0,this.rox2=0,this.roy2=0,this.ox=0,this.oy=0,this.time=Date.now(),this.timeDown=0,this.timeDownDifference=0,this.timeDifference=0,this.touches=0,this.vx=0,this.vy=0,this.x=0,this.x2=0,this.y=0,this.y2=0,this.wheel=!1,this.wheelDelta=0,this.moveThreshold=5,this.cid=Math.random().toString(36).substr(2,9),this.eventType="",this.holdTimeout=null,this.initialPinchDistance=0,this.lastPinchDistance=0,this.lastTapTime=0,this.swipeThreshold=50,this.swipeTimeThreshold=300,this.swipeVelocityThreshold=.3,this.tapCount=0,this.tapTimeout=null,this.twoFingerTapCount=0,this.vxHistory=[],this.vyHistory=[],this.Handle_OnInterval=this.Handle_OnInterval.bind(this),this.Handle_OnPointerDown=this.Handle_OnPointerDown.bind(this),this.Handle_OnPointerMove=this.Handle_OnPointerMove.bind(this),this.Handle_OnPointerUp=this.Handle_OnPointerUp.bind(this),this.Handle_OnWheel=this.Handle_OnWheel.bind(this),this.autoTouchEvents=e,this.eventType=t,this.target=r,this.attachEvents()}attachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.addEventListener("touchstart",this.Handle_OnPointerDown),this.target.addEventListener("touchmove",this.Handle_OnPointerMove),this.target.addEventListener("touchend",this.Handle_OnPointerUp)):(this.target.addEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.addEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.addEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.addEventListener("wheel",this.Handle_OnWheel,{passive:!1}),se.Interval.add(this.Handle_OnInterval,1e3/60,`${this.cid}-pointer-velocity`)}detachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.removeEventListener("touchstart",this.Handle_OnPointerDown),this.target.removeEventListener("touchmove",this.Handle_OnPointerMove),this.target.removeEventListener("touchend",this.Handle_OnPointerUp)):(this.target.removeEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.removeEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.removeEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.removeEventListener("wheel",this.Handle_OnWheel),se.Interval.remove(`${this.cid}-pointer-velocity`)}applyForMobile(t=!0,e=!0,r=!0){document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",t&&document.addEventListener("touchmove",function(n){n.preventDefault()},{passive:!1}),e&&document.addEventListener("touchend",function(n){n.preventDefault()},!1),r&&document.addEventListener("contextmenu",function(n){n.preventDefault()})}capturePinchZoom(t){document.addEventListener("wheel",e=>{t&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.Handle_OnWheel(e)},{capture:t,passive:!1}),document.body.style.touchAction="pan-x pan-y",document.body.style.userSelect="none"}configureSwipe(t){return t.distanceThreshold!==void 0&&(this.swipeThreshold=t.distanceThreshold),t.timeThreshold!==void 0&&(this.swipeTimeThreshold=t.timeThreshold),t.velocityThreshold!==void 0&&(this.swipeVelocityThreshold=t.velocityThreshold),this}resetRelative(t=0,e=0){return this.rox=this.rox2=this.rx=this.rx2=t,this.roy=this.roy2=this.ry=this.ry2=e,this}get downEvent(){let t="";switch(this.eventType){case"pointer":t="pointerdown";break;case"touch":t="touchstart";break;default:t="mousedown";break}return t}get moveEvent(){let t="";switch(this.eventType){case"pointer":t="pointermove";break;case"touch":t="touchmove";break;default:t="mousemove";break}return t}get upEvent(){let t="";switch(this.eventType){case"pointer":t="pointerup";break;case"touch":t="touchend";break;default:t="mouseup";break}return t}getDistanceBetweenTouches(t){if(t.touches.length<2)return 0;let e=t.touches[0],r=t.touches[1],n=e.pageX-r.pageX,i=e.pageY-r.pageY;return Math.sqrt(n*n+i*i)}async Handle_OnInterval(){let t=this.vx,e=this.vy;this.vx*=this.friction,this.vy*=this.friction,Math.abs(this.vx)<.025&&(this.vx=0),Math.abs(this.vy)<.025&&(this.vy=0),isFinite(this.vx)||(this.vx=0),isFinite(this.vy)||(this.vy=0),this.down||(this.x2+=this.vx*5,this.y2+=this.vy*5,this.rx2+=this.vx*5,this.ry2+=this.vy*5),this.changed=this.vx!==t||this.vy!==e}async Handle_OnPointerDown(t){let e="touches"in t&&t.touches.length===2;if(this.down=!0,this.moved=!1,this.timeDown=Date.now(),this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=this.getDistanceBetweenTouches(t),this.lastPinchDistance=this.initialPinchDistance),this.ox=this.x="touches"in t?t.touches[0].clientX:t.clientX,this.oy=this.y="touches"in t?t.touches[0].clientY:t.clientY,this.dx=0,this.dy=0,this.target!==document){let n=this.target.getBoundingClientRect();this.ox-=n.left,this.oy-=n.top,this.x-=n.left,this.y-=n.top}this.rox=this.rx,this.roy=this.ry,this.rox2=this.rx2,this.roy2=this.ry2,this.dispatch("down",{touches:this.touches,x:this.x,y:this.y});let r={x:this.x,y:this.y};e?(this.twoFingerTapCount++,this.twoFingerTapCount===1&&setTimeout(()=>{this.twoFingerTapCount===1&&!this.down?this.dispatch("twofingertap",r):this.twoFingerTapCount===2&&this.dispatch("twofingerdoubletap",r),this.twoFingerTapCount=0},300)):(this.tapCount++,this.timeDown-this.lastTapTime<300?(clearTimeout(this.tapTimeout),this.dispatch("doubletap",r),this.tapCount=0):this.tapTimeout=setTimeout(()=>{this.tapCount===1&&!this.down&&this.dispatch("tap",r),this.tapCount=0},300),this.lastTapTime=this.timeDown,this.holdTimeout=setTimeout(()=>{this.down&&this.dispatch("hold",r)},500))}async Handle_OnPointerMove(t){if(this.moved&&this.holdTimeout&&clearTimeout(this.holdTimeout),this.touches>1){let e=this.getDistanceBetweenTouches(t),r=e-this.lastPinchDistance,n=e/this.initialPinchDistance;this.dispatch("zoom",{delta:r,isTrackpad:!1,type:"pinch",scale:n}),this.lastPinchDistance=e}if(this.lastX=this.x,this.lastY=this.y,this.x="touches"in t?t.touches[0].clientX:t.clientX,this.y="touches"in t?t.touches[0].clientY:t.clientY,this.target!==document){let e=this.target.getBoundingClientRect();this.x-=e.left,this.y-=e.top}this.currentTarget=t.currentTarget,this.activeTarget=t.target,this.timeDifference=Date.now()-this.time,this.time=Date.now(),this.dispatch("move",{x:this.x,y:this.y}),this.vxHistory.push((this.x-this.lastX)/this.timeDifference),this.vyHistory.push((this.y-this.lastY)/this.timeDifference),this.vxHistory.length>5&&this.vxHistory.shift(),this.vyHistory.length>5&&this.vyHistory.shift(),this.down&&(this.dx=this.x-this.ox,this.dy=this.y-this.oy,this.rx=this.rox+this.dx,this.ry=this.roy+this.dy,this.rx2=this.rox2+this.dx,this.ry2=this.roy2+this.dy,this.angle=Math.atan2(this.dy,this.dx)*(180/Math.PI),this.distance=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.moved=Math.abs(this.distance)>this.moveThreshold,this.x2=this.x,this.y2=this.y,this.timeDownDifference=this.time-this.timeDown,this.inertia=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.vx=this.vxHistory.reduce((e,r)=>e+r)/(this.vxHistory.length||1),this.vy=this.vyHistory.reduce((e,r)=>e+r)/(this.vyHistory.length||1),this.dispatch("drag",{angle:this.angle,changed:this.changed,distance:this.distance,dx:this.dx,dy:this.dy,inertia:this.inertia,moved:this.moved,ox:this.ox,oy:this.oy,rx:this.rx,ry:this.ry,rx2:this.rx2,ry2:this.ry2,time:this.time,timeDifference:this.timeDifference,timeDown:this.timeDown,timeDownDifference:this.timeDownDifference,touches:this.touches,vx:this.vx,vy:this.vy,x:this.x,y:this.y}))}async Handle_OnPointerUp(t){let e=Date.now()-this.timeDown;if(this.down="touches"in t?t.touches.length>0:!1,this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=0,this.lastPinchDistance=0),this.dispatch("up",{touches:this.touches,x:this.x,y:this.y}),this.moved&&e<this.swipeTimeThreshold){let r=this.x-this.ox,n=this.y-this.oy,i=Math.sqrt(r*r+n*n),a=i/this.timeDifference;if(i>this.swipeThreshold&&a>this.swipeVelocityThreshold){let f=Math.abs(r)>Math.abs(n)?r>0?"right":"left":n>0?"down":"up";this.dispatch("swipe",{direction:f,distance:i,duration:this.timeDifference,velocity:a}),this.dispatch("swipe:"+f,{direction:f,distance:i,duration:this.timeDifference,velocity:a})}}(this.distance<50||!this.distance)&&this.dispatch("tap:small",{x:this.x,y:this.y,distance:this.distance}),(this.distance<20||!this.distance)&&this.dispatch("tap:xsmall",{x:this.x,y:this.y,distance:this.distance}),this.holdTimeout&&clearTimeout(this.holdTimeout),this.distance=0}async Handle_OnWheel(t){let e=~~(Math.abs(t.wheelDeltaY||1)/Math.abs(t.deltaY||1))>1,r=t.deltaY,n=r>0?"out":"in";se.Debounce.exec(this.cid,()=>{this.wheel=!1,this.wheelDelta=0},100,!0),r&&(this.wheel=!0),this.wheelDelta=r,this.dispatch("zoom",{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"}),this.dispatch("zoom:"+n,{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"})}};var xc=class extends ft.Dispatcher{get hasMotion(){return"ondevicemotion"in window}get hasOrientation(){return"ondeviceorientation"in window}get hasSensors(){return this.hasOrientation&&this.hasMotion}constructor(){super(),this.Handle_OnDeviceMotion=this.Handle_OnDeviceMotion.bind(this),this.Handle_OnDeviceOrientation=this.Handle_OnDeviceOrientation.bind(this),this.attachEvents()}attachEvents(){window.addEventListener("devicemotion",this.Handle_OnDeviceMotion),window.addEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}detachEvents(){window.removeEventListener("devicemotion",this.Handle_OnDeviceMotion),window.removeEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}async Handle_OnDeviceMotion(t){let{acceleration:e,accelerationIncludingGravity:r,rotationRate:n}=t;this.dispatch("gyroscope",n),this.dispatch("accelerometer",e),this.dispatch("accelerometer:gravity",r)}async Handle_OnDeviceOrientation(t){let{absolute:e,alpha:r,beta:n,gamma:i}=t;this.dispatch("orientation",{absolute:e,alpha:r,beta:n,gamma:i})}},a4=new xc;var Sf=class extends ft.Dispatcher{static async getSources(){return(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput").map(r=>({deviceId:r.deviceId,label:r.label}))}};var se={};g(se,{Analytics:()=>wc,Cache:()=>oo,Debounce:()=>Rf,Device:()=>vc,Easing:()=>Es,EasingFunction:()=>Q,Format:()=>bc,Geolocation:()=>Oc,Hysteresis:()=>Ff,Interval:()=>Tn,Math:()=>Tc,Presentation:()=>Cc,Share:()=>_c,String:()=>Ic,YouTube:()=>Yi,documentHeight:()=>lE,getCSSVariable:()=>hE,getDate:()=>dE,getEasingMethod:()=>ao,offsetHeight:()=>pE,offsetLeft:()=>fE,offsetTop:()=>mE,offsetWidth:()=>gE,requestAnimationFrame:()=>xE,sleep:()=>yE});var wc={};g(wc,{embedGoogleAnalytics:()=>RM,embedMetaPixel:()=>BM,embedRedditPixel:()=>FM});function RM(s){if(window.gtag){console.warn("Analytics is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+s,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],console.log("GA:",s),window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date),gtag("config",s)}function FM(s,t={}){if(window.rdt){console.warn("Reddit pixel is already embedded");return}let e=document.createElement("script");e.async=!0,e.src="https://www.redditstatic.com/ads/pixel.js";let r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r),window.rdt=function(){window.rdt.sendEvent?window.rdt.sendEvent(...arguments):window.rdt.callQueue.push(arguments)},window.rdt.callQueue=[],console.log("RP:",s),rdt("init",s,t),rdt("track","PageVisit")}function BM(s){if(window.fbq){console.warn("Facebook pixel is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js";let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod(...arguments):window.fbq.queue.push(arguments)},window._fbq||(window._fbq=window.fbq),window.fbq.push=window.fbq,window.fbq.queue=[],window.fbq.loaded=!0,window.fbq.version="2.0",console.log("MP:",s),fbq("init",s),fbq("track","PageView")}var vc={};g(vc,{getBrowserName:()=>nr,getBrowserVersion:()=>GM,getOrientation:()=>jM,getScreenHeight:()=>YM,getScreenWidth:()=>QM,isAndroid:()=>$M,isChrome:()=>XM,isEdge:()=>KM,isFirefox:()=>JM,isIE:()=>ZM,isIOS:()=>NM,isLandscape:()=>Uf,isMobile:()=>VM,isOpera:()=>eT,isPortrait:()=>zM,isSafari:()=>tT,isTouchDevice:()=>WM,userAgent:()=>bn});function bn(){return navigator.userAgent}function VM(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(bn())}function NM(){return/iphone|ipad|ipod/i.test(bn())}function $M(){return/android/i.test(bn())}function Uf(){return window.orientation===90||window.orientation===-90}function zM(){return!Uf()}function jM(){return Uf()?"landscape":"portrait"}function WM(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function QM(){return window.screen.width}function YM(){return window.screen.height}function nr(){let s=bn();return s.indexOf("firefox")>-1?"Firefox":s.indexOf("opera")>-1||s.indexOf("opr")>-1?"Opera":s.indexOf("chrome")>-1?"Chrome":s.indexOf("safari")>-1?"Safari":s.indexOf("msie")>-1||s.indexOf("trident")>-1?"Internet Explorer":"Unknown"}function GM(){let s=bn(),t=s.match(/version\/(\d+)/i);return t===null&&(t=s.match(/(?:msie |rv:)(\d+)/)),t===null&&(t=s.match(/(?:chrome|safari|firefox|opera|opr|edge)\/(\d+)/i)),t===null?"Unknown":t[1]}function ZM(){return nr()==="Internet Explorer"}function KM(){return nr()==="Edge"}function XM(){return nr()==="Chrome"}function JM(){return nr()==="Firefox"}function tT(){return nr()==="Safari"}function eT(){return nr()==="Opera"}var bc={};g(bc,{bytesToSize:()=>sT,daysBetweenDates:()=>rT,getRelativeTime:()=>Pf,secondsToTime:()=>nT,timeAgo:()=>aT,timeToHuman:()=>oT,timeToSeconds:()=>iT,timeUntil:()=>uT});function sT(s){let t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s==0)return"0 Byte";let e=parseInt(Math.floor(Math.log(s)/Math.log(1024)).toString());return Math.round(s/Math.pow(1024,e))+" "+t[e]}function rT(s,t){let e=Math.abs(t.getTime()-s.getTime());return Math.ceil(e/(1e3*3600*24))}function nT(s,t="00:00:00"){let e=new Date(0);switch(e.setSeconds(s),t){case"00:00:00":return e.toISOString().substr(11,8);case"00:00":return e.toISOString().substr(14,5);case"00":return e.toISOString().substr(17,2)}return e.toISOString().substr(11,8)}function iT(s){let[t,e,r]=s.split(":").map(Number);return t*3600+e*60+r}function I0(s){if(s instanceof Date)return isNaN(s.getTime())?null:s;if(typeof s=="string"){let t=new Date(s);if(!isNaN(t.getTime()))return t;let e=s.split(":").map(Number);if(e.length===3&&e.every(r=>!isNaN(r))){let r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),e[0],e[1],e[2])}}return typeof s=="number"?s<9466848e5?new Date(Date.now()+s*1e3):new Date(s):null}function oT(s,t=!1){let e;if(typeof s=="string"){let a=s.split(":").map(Number);if(a.length===3&&a.every(f=>!isNaN(f)))e=a[0]*3600+a[1]*60+a[2];else{let f=I0(s);if(!f)return"";e=Math.floor((f.getTime()-Date.now())/1e3)}}else s instanceof Date?e=Math.floor((s.getTime()-Date.now())/1e3):s>9466848e5?e=Math.floor((s-Date.now())/1e3):e=s;let r=Math.floor(Math.abs(e)/3600),n=Math.floor(Math.abs(e)%3600/60),i=Math.floor(Math.abs(e)%60);if(t){let a=[];return r>0&&a.push(`${r}h`),n>0&&a.push(`${n}m`),i>0&&a.push(`${i}s`),a.join(" ")||"0s"}return`${r}h ${n}m ${i}s`}function Pf(s,t={}){let e=I0(s);if(!e)return"";let{type:r="ago",suffix:n="",shortUnits:i=!1}=t,a=new Date,f=e<a,p=Math.abs(r==="ago"?a.getTime()-e.getTime():e.getTime()-a.getTime()),o=Math.floor(p/1e3),u={year:31536e3,month:2592e3,day:86400,hour:3600,minute:60,second:1},c={year:i?"y":"year",month:i?"mo":"month",day:i?"d":"day",hour:i?"h":"hour",minute:i?"m":"minute",second:i?"s":"second"};for(let[h,m]of Object.entries(u)){let w=o/m;if(w>=1){let y=Math.floor(w),v=c[h],x=!i&&y!==1?v+"s":v,d=`${y} ${x}`;return n?`${d} ${n}`.trim():d}}let l=i?"0s":"0 seconds";return n?`${l} ${n}`.trim():l}function aT(s,t="ago",e="ago"){return Pf(s,{suffix:"ago",type:"ago"})}function uT(s,t="until",e="left"){return Pf(s,{suffix:"left",type:"until"})}var Oc={};g(Oc,{CACHE_EXPIRATION:()=>Ne,cache:()=>$e,clearWatch:()=>BT,config:()=>q0,distanceBetween:()=>zT,getBearing:()=>jT,getBounds:()=>WT,getLocation:()=>RT,isPointInBounds:()=>QT,simplifyCoordinates:()=>YT,watchLocation:()=>FT});var oo=class{constructor(t=-1){this.storage={},this.ttl=t>0?t:0}all(){let t=Object.keys(this.storage),e={},r;for(let n of t)r=this.get(n),r!==void 0&&(e[n]=this.get(n));return e}delete(t){this.storage[t]&&delete this.storage[t]}get(t){let e=this.storage[t],r;return e?e.ttl===0?(r=e.value,this.delete(t)):this.isCachedItemHealthy(e)&&(r=e.value):r=void 0,r}exists(t){return this.storage[t]!==void 0}has(t){return this.get(t)!==void 0}set(t,e,r=0,n=!1){let i=this.has(t),a=Date.now();return i&&this.isImmutable(t)?!1:(this.storage[t]={immutable:n,time:a,ttl:r,value:e},!0)}isCachedItemHealthy(t){let e=Date.now(),r=t.time,n=t.ttl;return r+n>e}isImmutable(t){let e=this.storage[t];return!!(e!=null&&e.immutable)}};var Tc={};g(Tc,{EARTH_RADIUS:()=>Mc,FOOT_METER_RATIO:()=>Af,MPH_METER_RATIO:()=>Lf,angle:()=>D0,angleAsDegrees:()=>cT,angleDifference:()=>k0,angleDifferenceAsDegrees:()=>lT,angleFromVector:()=>hT,angleFromVectors:()=>dT,angleNormalize:()=>fT,clamp:()=>Mn,clampUnsigned:()=>S0,degreesToSlope:()=>pT,denormalize:()=>mT,distance:()=>gT,dot:()=>xT,feetToMeters:()=>yT,inverseLerp:()=>U0,lerp:()=>P0,logarithmicZoom:()=>wT,metersToFeet:()=>vT,minMax:()=>bT,minMaxUnsigned:()=>MT,mphToMs:()=>TT,msToMph:()=>ET,normalize:()=>OT,randomInt:()=>_T,randomRange:()=>A0,randomSign:()=>IT,remap:()=>CT,rotate:()=>L0,rotateDeg:()=>DT,round:()=>kT,roundToDecimal:()=>PT,roundToNearest:()=>ST,roundToNearestFraction:()=>UT,slopeToDegrees:()=>AT,smootherstep:()=>qT,smoothstep:()=>LT,toDegrees:()=>ir,toRadians:()=>Nt,transformRatio:()=>HT});var Q=class{static linear(t){return t}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}static easeInCubic(t){return t*t*t}static easeOutCubic(t){return--t*t*t+1}static easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}static easeInQuart(t){return t*t*t*t}static easeOutQuart(t){return 1- --t*t*t*t}static easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}static easeInQuint(t){return t*t*t*t*t}static easeOutQuint(t){return 1+--t*t*t*t*t}static easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}static easeInSine(t){return 1-Math.cos(t*Math.PI/2)}static easeOutSine(t){return Math.sin(t*Math.PI/2)}static easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}static easeInExpo(t){return t===0?0:Math.pow(2,10*(t-1))}static easeOutExpo(t){return t===1?1:-Math.pow(2,-10*t)+1}static easeInOutExpo(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)}static easeInCirc(t){return-(Math.sqrt(1-t*t)-1)}static easeOutCirc(t){return Math.sqrt(1- --t*t)}static easeInOutCirc(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static easeInBack(t,e=1.70158){return t*t*((e+1)*t-e)}static easeOutBack(t,e=1.70158){return--t*t*((e+1)*t+e)+1}static easeInOutBack(t,e=1.70158){return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)}},Es=class s{static linear(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.linear,n)}static easeInQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInQuad,n)}static easeOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeOutQuad,n)}static easeInOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInOutQuad,n)}static easeInQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInQuart,n)}static easeOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeOutQuart,n)}static easeInOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInOutQuart,n)}static easeInQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInQuint,n)}static easeOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeOutQuint,n)}static easeInOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInOutQuint,n)}static easeInCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInCubic,n)}static easeOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeOutCubic,n)}static easeInOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInOutCubic,n)}static easeInSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInSine,n)}static easeOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeOutSine,n)}static easeInOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInOutSine,n)}static easeInExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInExpo,n)}static easeOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeOutExpo,n)}static easeInOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInOutExpo,n)}static easeInCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInCirc,n)}static easeOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeOutCirc,n)}static easeInOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInOutCirc,n)}static easeInBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInBack,n)}static easeOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeOutBack,n)}static easeInOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Q.easeInOutBack,n)}static normalize(t,e=0,r=1,n,i=!0){let a=s.clamp((t-e)/(r-e),0,1);return i?n(a):e+(r-e)*n(a)}static clamp(t,e=0,r=1){return Math.min(Math.max(t,e),r)}};function ao(s){return Es.hasOwnProperty(s)?Es[s]:Es.easeInOutQuad}var Mc=6371,Af=3.28084,Lf=.44704;function D0(s,t,e,r){return Math.atan2(r-t,e-s)}function cT(s,t,e,r){return D0(s,t,e,r)*180/Math.PI}function k0(s,t){return Math.atan2(Math.sin(t-s),Math.cos(t-s))}function lT(s,t){return k0(s,t)*180/Math.PI}function hT(s){return Math.atan2(s.y,s.x)}function dT(s,t){return Math.atan2(t.y-s.y,t.x-s.x)}function fT(s){return s=s%360,s<0&&(s+=360),s}function Mn(s,t,e){return Math.min(Math.max(s,t),e)}function S0(s,t,e){return[t,e]=[Math.min(t,e),Math.max(t,e)],Math.sign(s)*Math.min(Math.abs(s),Math.abs(s)>t?e:t)}function pT(s){return Math.tan(s*(Math.PI/180))}function mT(s,t,e,r=!1){let n=s*(e-t)+t;return r&&(n=Mn(n,t,e)),n}function gT(s,t,e,r){return Math.sqrt((e-s)**2+(r-t)**2)}function xT(s,t,e,r){return s*e+t*r}function yT(s){return s/Af}function U0(s,t,e){return(e-s)/(t-s)}function P0(s,t,e){return s+(t-s)*e}function wT(s,t,e=.025){let r=Math.log(s),n=Math.log(t+1)||0;return Math.exp(r+n*e)}function vT(s){return s*Af}function bT(s,t,e){return Mn(s,t,e)}function MT(s,t,e){return S0(s,t,e)}function TT(s){return s*Lf}function ET(s){return s/Lf}function OT(s,t,e,r=!1){let n=(s-t)/(e-t);return r&&(n=Mn(n,t,e)),n}function CT(s,t,e,r,n){return r+(n-r)*U0(t,e,s)}function A0(s,t){return P0(s,t,Math.random())}function _T(s,t){return Math.floor(A0(s,t+1))}function IT(){return Math.random()<.5?-1:1}function L0(s,t,e){let r=Math.sin(e),n=Math.cos(e);return[s*n-t*r,s*r+t*n]}function DT(s,t,e){return L0(s,t,e*Math.PI/180)}function kT(s,t=2){return Number(s.toFixed(t))}function ST(s,t){return Math.round(s/t)*t}function UT(s,t){return Math.round(s*t)/t}function PT(s,t){return Math.round(s*10**t)/10**t}function AT(s){return Math.atan(s)*(180/Math.PI)}function LT(s,t,e){let r=Mn((e-s)/(t-s),0,1);return r*r*(3-2*r)}function qT(s,t,e){let r=Mn((e-s)/(t-s),0,1);return r*r*r*(r*(r*6-15)+10)}function Nt(s){return s*Math.PI/180}function ir(s){return s*180/Math.PI}function HT(s,t=4,e="linear",r=""){r||(r=e);let n=ao(e),i=ao(r);return s<=1/t?n(s/(1/t)):s<=1-1/t?1:i((1-s)/(1/t))}var q0={IP_LOCATION_API:"https://ipapi.co/json/"},Ne=1e3*6*2,$e=new oo(Ne);async function RT(){let s="geolocation",t=$e.get(s);if(t)return t;try{return navigator!=null&&navigator.geolocation?await VT(s):await GT()?await NT(s):await $T(s)}catch(e){throw e instanceof Error?e:new de("Unknown error occurred")}}function FT(s,t,e={enableHighAccuracy:!0}){let r="geolocation";return navigator!=null&&navigator.geolocation?navigator.geolocation.watchPosition(n=>{let i=or(n);$e.set(r,i,Ne),A.dispatch("location:change",i),s==null||s(i)},async n=>{try{let i=await Ec(),a=or(i);$e.set(r,a,Ne),A.dispatch("location:change",a),s==null||s(a)}catch(i){A.dispatch("location:error",n),t==null||t(n)}},e):0}function BT(s){try{if(!(navigator!=null&&navigator.geolocation))throw new de("Geolocation is not supported by this browser.");navigator.geolocation.clearWatch(s)}catch(t){console.error("Error clearing geolocation watch:",t)}}async function VT(s){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(r=>{let n=or(r);$e.set(s,n,Ne),console.info("\u{1F538} Location",n),A.dispatch("location:change",n),t(n)},async r=>{if(console.warn("Browser geolocation error:",r),r.code===r.PERMISSION_DENIED)e(new de("Permission denied for geolocation."));else if(r.code===r.POSITION_UNAVAILABLE)e(new de("Geolocation position unavailable."));else if(r.code===r.TIMEOUT)e(new de("Geolocation request timed out."));else try{let n=await Ec(),i=or(n);$e.set(s,i,Ne),console.info("\u{1F53A} Location",i),A.dispatch("location:change",i),t(i)}catch(n){e(new de("Fallback IP location failed."))}})})}async function NT(s){try{let{Geolocation:t}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1)),e=await t.getCurrentPosition(),r=or(e);return $e.set(s,r,Ne),console.info("\u{1F539} Location",r),A.dispatch("location:change",r),r}catch(t){try{let e=await Ec(),r=or(e);return $e.set(s,r,Ne),console.info("\u{1F53A} Location",r),A.dispatch("location:change",r),r}catch(e){throw A.dispatch("location:error",t),t}}}async function $T(s){try{let t=await Ec(),e=or(t);return $e.set(s,e,Ne),console.info("\u{1F53A} Location",e),A.dispatch("location:change",e),e}catch(t){throw A.dispatch("location:error",t),new de("Failed to get IP location")}}async function Ec(){let t=await(await fetch(q0.IP_LOCATION_API)).json();return{coords:{accuracy:5e3,altitude:null,altitudeAccuracy:null,heading:null,latitude:t.latitude,longitude:t.longitude,speed:null},timestamp:Date.now()}}function or(s){return{position:s,timestamp:Date.now()}}function zT(s,t,e,r){let n=Mc,i=Nt(e-s),a=Nt(r-t),f=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Nt(s))*Math.cos(Nt(e))*Math.sin(a/2)*Math.sin(a/2),p=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return n*p}function jT(s,t,e,r){let n=Nt(r-t),i=Math.sin(n)*Math.cos(Nt(e)),a=Math.cos(Nt(s))*Math.sin(Nt(e))-Math.sin(Nt(s))*Math.cos(Nt(e))*Math.cos(n);return(ir(Math.atan2(i,a))+360)%360}function WT(s,t,e){let r=Mc,n=Nt(s),i=Nt(t),a=e/r;return{latitudeMin:ir(n-a),latitudeMax:ir(n+a),longitudeMin:ir(i-a/Math.cos(n)),longitudeMax:ir(i+a/Math.cos(n))}}function QT(s,t,e){return s>=e.latitudeMin&&s<=e.latitudeMax&&t>=e.longitudeMin&&t<=e.longitudeMax}function YT(s,t,e=1e3){var a,f;let r,n,i=e;if(typeof s=="number"&&typeof t=="number")r=s,n=t,i=e;else if(Array.isArray(s))[r,n]=s;else if(typeof s=="object")"position"in s?(r=s.position.lat,n=s.position.lng):(r=(a=s==null?void 0:s.latitude)!=null?a:(s==null?void 0:s.lat)||0,n=(f=s==null?void 0:s.longitude)!=null?f:(s==null?void 0:s.lng)||0);else throw new Error("Invalid coordinates format");if(typeof r!="number"||typeof n!="number")throw new Error("Invalid coordinates: latitude and longitude must be numbers");return{latitude:Math.round(r*i)/i,longitude:Math.round(n*i)/i}}async function GT(){try{let{Geolocation:s}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1));return!!s}catch(s){return!1}}var Cc={};g(Cc,{castToDevice:()=>XT,isFullscreenActive:()=>KT,toggleFullscreen:()=>ZT});function ZT(s=document.body){document.fullscreenElement?document.exitFullscreen().catch(t=>{console.error(`Error attempting to exit fullscreen mode: ${t.message}`)}):s.requestFullscreen().catch(t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message}`)})}function KT(){return!!document.fullscreenElement}async function XT(s){if(!("presentation"in navigator)){console.error("Presentation API is not supported in this browser.");return}try{new PresentationRequest([s]).start().then(e=>{console.log("Connected to presentation:",e),e.onterminate=()=>{console.log("Presentation terminated.")}},e=>{console.error("Error starting presentation:",e)})}catch(t){console.error("Error casting to device:",t)}}var _c={};g(_c,{canShare:()=>R0,hasSupport:()=>qf,native:()=>H0,remoteFile:()=>JT});async function H0(s=[],t="",e="",r=""){let n={files:s,text:e,title:t,url:r};if(qf()===!1)throw new Error("This browser does not support navigator share");if(R0()===!1)throw new Error("Sharing is not supported, make sure you are on HTTPS");return navigator.canShare(n)?(await navigator.share(n),!0):!1}async function JT(s,t="",e="",r=""){let n=await tE(s);return H0([n],t,e,r)}function qf(){return"share"in navigator}function R0(){return qf()&&!!navigator.canShare}async function tE(s="",t="my-file.png"){s||(s="https://cdn.glitch.com/f96f78ec-d35d-447b-acf4-86f2b3658491%2Fchuck.png?v=1618311092497");let e=await fetch(s).then(i=>i.blob()),r=e.type.split(";").shift();return new File([e],t,{type:r})}var Ic={};g(Ic,{basicHash:()=>eE,capitalize:()=>sE,chunkSentences:()=>rE,md5:()=>nE,random:()=>iE,shuffle:()=>oE,slug:()=>aE,trimSentences:()=>cE,truncate:()=>uE});function eE(s){return s.split("").reduce((t,e)=>(t=(t<<5)-t+e.charCodeAt(0),t&t),0).toString()}function sE(s){return s.charAt(0).toUpperCase()+s.slice(1)}function rE(s,t=130){let e=s.replace(/\.$/,"").split(". "),r=[];return e.forEach(n=>{r.length===0||r[r.length-1].length>t?r.push(n+"."):(n=n.trim(),r[r.length-1]+=` ${n}.`)}),r}function nE(s){let t="0123456789abcdef",e=new TextEncoder().encode(s),r=e.length*8,n=(448-(e.length*8+1)%512+512)%512,i=e.length+Math.ceil(n/8)+8,a=new Uint8Array(i);a.set(e),a[e.length]=128;let f=new DataView(a.buffer);f.setUint32(i-8,r>>>0,!0),f.setUint32(i-4,Math.floor(r/4294967296),!0);let p=new Uint32Array(i/4);for(let x=0;x<i;x+=4)p[x/4]=f.getUint32(x,!0);let o=1732584193,u=4023233417,c=2562383102,l=271733878;function h(x,d){return x<<d|x>>>32-d}function m(x,d,M){return x&d|~x&M}function w(x,d,M){return x&M|d&~M}function y(x,d,M){return x^d^M}function v(x,d,M){return d^(x|~M)}for(let x=0;x<p.length;x+=16){let d=p.slice(x,x+16),[M,Ot,Ut,Pt]=[o,u,c,l];o=h(o+m(u,c,l)+d[0]+3614090360,7)+u,l=h(l+m(o,u,c)+d[1]+3905402710,12)+o,c=h(c+m(l,o,u)+d[2]+606105819,17)+l,u=h(u+m(c,l,o)+d[3]+3250441966,22)+c,o=h(o+m(u,c,l)+d[4]+4118548399,7)+u,l=h(l+m(o,u,c)+d[5]+1200080426,12)+o,c=h(c+m(l,o,u)+d[6]+2821735955,17)+l,u=h(u+m(c,l,o)+d[7]+4249261313,22)+c,o=h(o+m(u,c,l)+d[8]+1770035416,7)+u,l=h(l+m(o,u,c)+d[9]+2336552879,12)+o,c=h(c+m(l,o,u)+d[10]+4294925233,17)+l,u=h(u+m(c,l,o)+d[11]+2304563134,22)+c,o=h(o+m(u,c,l)+d[12]+1804603682,7)+u,l=h(l+m(o,u,c)+d[13]+4254626195,12)+o,c=h(c+m(l,o,u)+d[14]+2792965006,17)+l,u=h(u+m(c,l,o)+d[15]+1236535329,22)+c,o=h(o+w(u,c,l)+d[1]+4129170786,5)+u,l=h(l+w(o,u,c)+d[6]+3225465664,9)+o,c=h(c+w(l,o,u)+d[11]+643717713,14)+l,u=h(u+w(c,l,o)+d[0]+3921069994,20)+c,o=h(o+w(u,c,l)+d[5]+3593408605,5)+u,l=h(l+w(o,u,c)+d[10]+38016083,9)+o,c=h(c+w(l,o,u)+d[15]+3634488961,14)+l,u=h(u+w(c,l,o)+d[4]+3889429448,20)+c,o=h(o+w(u,c,l)+d[9]+568446438,5)+u,l=h(l+w(o,u,c)+d[14]+3275163606,9)+o,c=h(c+w(l,o,u)+d[3]+4107603335,14)+l,u=h(u+w(c,l,o)+d[8]+1163531501,20)+c,o=h(o+w(u,c,l)+d[13]+2850285829,5)+u,l=h(l+w(o,u,c)+d[2]+4243563512,9)+o,c=h(c+w(l,o,u)+d[7]+1735328473,14)+l,u=h(u+w(c,l,o)+d[12]+2368359562,20)+c,o=h(o+y(u,c,l)+d[5]+4294588738,4)+u,l=h(l+y(o,u,c)+d[8]+2272392833,11)+o,c=h(c+y(l,o,u)+d[11]+1839030562,16)+l,u=h(u+y(c,l,o)+d[14]+4259657740,23)+c,o=h(o+y(u,c,l)+d[1]+2763975236,4)+u,l=h(l+y(o,u,c)+d[4]+1272893353,11)+o,c=h(c+y(l,o,u)+d[7]+4139469664,16)+l,u=h(u+y(c,l,o)+d[10]+3200236656,23)+c,o=h(o+y(u,c,l)+d[13]+681279174,4)+u,l=h(l+y(o,u,c)+d[0]+3936430074,11)+o,c=h(c+y(l,o,u)+d[3]+3572445317,16)+l,u=h(u+y(c,l,o)+d[6]+76029189,23)+c,o=h(o+y(u,c,l)+d[9]+3654602809,4)+u,l=h(l+y(o,u,c)+d[12]+3873151461,11)+o,c=h(c+y(l,o,u)+d[15]+530742520,16)+l,u=h(u+y(c,l,o)+d[2]+3299628645,23)+c,o=h(o+v(u,c,l)+d[0]+4096336452,6)+u,l=h(l+v(o,u,c)+d[7]+1126891415,10)+o,c=h(c+v(l,o,u)+d[14]+2878612391,15)+l,u=h(u+v(c,l,o)+d[5]+4237533241,21)+c,o=h(o+v(u,c,l)+d[12]+1700485571,6)+u,l=h(l+v(o,u,c)+d[3]+2399980690,10)+o,c=h(c+v(l,o,u)+d[10]+4293915773,15)+l,u=h(u+v(c,l,o)+d[1]+2240044497,21)+c,o=h(o+v(u,c,l)+d[8]+1873313359,6)+u,l=h(l+v(o,u,c)+d[15]+4264355552,10)+o,c=h(c+v(l,o,u)+d[6]+2734768916,15)+l,u=h(u+v(c,l,o)+d[13]+1309151649,21)+c,o=h(o+v(u,c,l)+d[4]+4149444226,6)+u,l=h(l+v(o,u,c)+d[11]+3174756917,10)+o,c=h(c+v(l,o,u)+d[2]+718787259,15)+l,u=h(u+v(c,l,o)+d[9]+3951481745,21)+c,o=o+M>>>0,u=u+Ot>>>0,c=c+Ut>>>0,l=l+Pt>>>0}return[o,u,c,l].map(x=>("00000000"+x.toString(16)).slice(-8)).join("")}function iE(s=7){return Math.random().toString(36).substring(s)}function oE(s){let t=s.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function aE(s){return s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function uE(s,t=30){return s.length>t?s.slice(0,t).trim()+"...":s}function cE(s,t=500){let e=s.indexOf(".",t);return s.substr(0,e>0?e+1:s.length)}var Hf={},Rf=class s{static exec(t,e,r=1e3,n=!1,i=[]){if(!Hf[t]){let a=new s(e,r,!0,n);Hf[t]=a.run}Hf[t](...i)}constructor(t,e=200,r=!1,n=!1){this.inclusive=!1,this.lastTrigger=0,this.timeout=0,this.callback=t,this.inclusive=n,this.threshold=e,n||(this.lastTrigger=Date.now()),this.run=this.run.bind(this)}run(t=!1){let e=Date.now();e-this.lastTrigger>this.threshold&&(this.lastTrigger=e,this.callback.apply(null,arguments)),this.timeout!==0&&(clearTimeout(this.timeout),this.timeout=0),this.inclusive&&!t&&(this.timeout=setTimeout(()=>this.run(!0),this.threshold))}};function lE(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function hE(s,t=document.documentElement){return getComputedStyle(t).getPropertyValue(s).trim()}function dE(s=""){return s||(s=D.CURRENT_DATE),s?new Date(s):new Date}function fE(s){let t=0;do t+=s.offsetLeft,s=s.offsetParent;while(s);return t}function pE(s){return s.offsetHeight}function mE(s){let t=0;do t+=s.offsetTop,s=s.offsetParent;while(s);return t}function gE(s){return s.offsetWidth}var xE=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);function yE(s){return new Promise(t=>setTimeout(t,s))}var F0=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);var Tn=class s{static get instance(){return this._instance||(this._instance=new s),this._instance}static add(t,e=16,r=""){let n,i=0,a=0,f=0;return r||(r=Math.random().toString(32).substr(2,6)),t.hasOwnProperty("callback")?(e=t.fps||e,n=t.callback,r=t.name||r,f=t.stopAfter||0):n=t,this.instance.unpause(),this.instance.intervals.push({executions:i,fps:e,func:n,lastTick:a,name:r,stopAfter:f}),r}static fps(t,e,r){return this.instance.intervals.filter(n=>{n.name===t&&(n.fps=e||n.fps,n.func=r||n.func)}),this.instance}static list(){console.log(this.instance.intervals)}static remove(t){this.instance.intervals=this.instance.intervals.filter(e=>e.name!=t)}static start(){this.instance&&this.instance.unpause()}static stop(){this.instance&&this.instance.pause()}constructor(){this.enabled=!1,this.intervals=[],this.lastFrameTime=0,this.Handle_OnRequestAnimationFrame=this.Handle_OnRequestAnimationFrame.bind(this)}pause(){this.enabled=!1}unpause(){this.enabled=!0,this.Handle_OnRequestAnimationFrame()}async Handle_OnRequestAnimationFrame(){if(!this.enabled)return;let t=Date.now();this.intervals.forEach(e=>{if(t-(e.lastTick||0)>e.fps){if(e.stopAfter&&e.executions>=e.stopAfter){s.remove(e.name);return}e.func({}),e.lastTick=t,e.executions++}}),this.lastFrameTime=Date.now(),F0(this.Handle_OnRequestAnimationFrame)}};var Ff=class s extends ft.Dispatcher{static add(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),e}static wait(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),new Promise(r=>{e.once("change",n=>{e.stop(),r(n)})})}constructor(t,e=20,r=2e3){super(),this.conditionMetCount=0,this.isVariableSet=!1,this.intervalName="",this.condition=t,this.threshold=e,this.duration=r}reset(){this.conditionMetCount=0}start(){this.intervalName=Tn.add(()=>this.checkCondition(),this.duration/this.threshold)}stop(){Tn.remove(this.intervalName)}checkCondition(){this.condition()?(this.conditionMetCount=Math.min(this.threshold,this.conditionMetCount+1),this.conditionMetCount>=this.threshold&&!this.isVariableSet&&(this.isVariableSet=!0,this.dispatch("set"),this.dispatch("change",{set:this.isVariableSet}))):(this.conditionMetCount=Math.max(0,this.conditionMetCount-1),this.conditionMetCount<=0&&this.isVariableSet&&(this.isVariableSet=!1,this.dispatch("unset"),this.dispatch("change",{set:this.isVariableSet})))}};var Dc=class extends xn{};var B0=z(Et(),1),wE="1.31.9";var Tr={};g(Tr,{Media:()=>es,UserMedia:()=>ha,VenueMedia:()=>da});var Co={};g(Co,{ChalkySticks:()=>uo,Collection:()=>tt,Constants:()=>C,Core:()=>Xc,Enum:()=>Qe,Environment:()=>fe,Event:()=>mt,Exception:()=>To,Factory:()=>Hc,Input:()=>Vc,Model:()=>N,Provider:()=>_n,Request:()=>sy.Request,Utility:()=>Se,Version:()=>gC});var C={API_URL:"https://api.chalkysticks.com/v3",API_URL_DEV_V1:"http://localhost:8000/v1",API_URL_DEV_V2:"http://localhost:8000/v2",API_URL_V1:"https://api.chalkysticks.com/v1",API_URL_V2:"https://api.chalkysticks.com/v2",API_URL_V3:"https://api.chalkysticks.com/v3",CURRENT_DATE:"",DEFAULT_COLLECTION_LIMIT:20,NOTIFICATION_PREFERENCE:"native",STATIC_URL:"https://static.chalkysticks.com",WALLET_COLLECTION_TIME:60*60*6};var uo=class{static configure(t={}){let e;Object.assign(C,t.constants)}};var tt={};g(tt,{Advertisement:()=>xo,Base:()=>gt,Content:()=>yo,ContentTag:()=>ho,Media:()=>go,Meta:()=>In,Rulebook:()=>wo,Statistic:()=>vo,User:()=>bo,Wallet:()=>Mo});var N={};g(N,{Advertisement:()=>ar,Base:()=>nt,Content:()=>ur,ContentTag:()=>fo,Geocode:()=>po,Media:()=>cr,Meta:()=>mo,Rulebook:()=>lr,Statistic:()=>hr,User:()=>je,Wallet:()=>We});var mt={};g(mt,{Bus:()=>L,Dispatcher:()=>On,DispatcherEvent:()=>co});var co=class{constructor(t,e){this.callbacks=[],this.eventName=t,e&&(this.envelope=e)}clearCallbacks(){this.callbacks=[]}registerCallback(t){this.callbacks.push(t)}unregisterCallback(t){let e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}fire(t){this.callbacks.slice(0).forEach(r=>{r(Object.assign({},this.envelope,t))})}};var On=class{constructor(){this.events={}}dispatch(t,e){let r=this.events[t];r&&r.fire({data:e,event:{name:t,time:Date.now()},target:this})}on(t,e){let r=this.events[t];r||(r=new co(t),this.events[t]=r),r.registerCallback(e)}once(t,e){let r=n=>{e(n),this.off(t,r)};this.on(t,r)}off(t,e){let r=this.events[t];r&&!e?(r.clearCallbacks(),delete this.events[t]):r&&e&&r.callbacks.indexOf(e)>-1&&(r.unregisterCallback(e),r.callbacks.length===0&&delete this.events[t])}$emit(t,e={}){return this.dispatch(t,e)}trigger(t,e={}){return this.dispatch(t,e)}$on(t,e){return this.on(t,e)}$off(t,e){return this.off(t,e)}},L=new On;var _n={};g(_n,{Store:()=>Cn});var Bf=class{get(){return this.instance||this.register({actions:{},commit:(t,e)=>{},dispatch:(t,e)=>{},getters:{},mutations:{},state:{}}),this.instance}register(t){this.instance=t}},Cn=new Bf;var Vf=class{constructor(){this.id=Math.random().toString(36).substr(2,9)}get app(){return ze.getVariable("app",{apiUrl:"",limit:32,localUrl:""})}get debug(){return ze.getVariable("debug",!1)}get env(){return ze.getVariable("env","development")}get google(){return ze.getVariable("google",{analytics:{id:""},api_key:""})}isLocal(){return ze.env==="local"||ze.env==="development"}isProduction(){return ze.env==="production"}isStaging(){return ze.env==="staging"}getVariable(t,e){let r=typeof window=="object"&&window.env?window.env:{},n=typeof window=="object"&&window.chalky?window.chalky:{};return{...r,...n}[t]||e}},ze=new Vf,fe=ze;var V0=z(Et(),1),nt=class extends V0.Model{constructor(t={},e={}){var r;if(super(t,e),this.baseUrl=fe.app.apiUrl,this.baseUrl=e.baseUrl||this.baseUrl||fe.app.apiUrl||C.API_URL,this.setOptions({withCredentials:!1}),e.token)this.setToken(e.token);else{let n=Cn.get(),i=((r=n==null?void 0:n.state)==null?void 0:r.token)||(n==null?void 0:n.getters["authentication/token"]);i&&this.setToken(i)}this.attachEvents()}attachEvents(){this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),L.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),L.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={model:this};e===401?(this.dispatch("request:unauthorized",r),L.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),L.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),L.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),L.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),L.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),L.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),L.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}getBaseUrl(){return fe.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var ar=class extends nt{constructor(){super(...arguments),this.endpoint="ads",this.fields=["caption","company","image","url"]}getCaption(){return this.attr("caption")}getCompany(){return this.attr("company")}getImage(){return this.attr("image")}getUrl(){return this.attr("url")}};var lo={};g(lo,{isYouTube:()=>Nf,parseId:()=>$f,thumbnailUrl:()=>vE,toEmbedUrl:()=>zf});function Nf(s){return s.match(/(?:youtube\.com|youtu\.be)/)!==null}function $f(s){let t=s.match(/(?:\?v=|\/embed\/|\/\d+\/|\.be\/)([a-zA-Z0-9_-]+)/);return t?t[1]:""}function vE(s){return`https://img.youtube.com/vi/${$f(s)}/hqdefault.jpg`}function zf(s){return`https://www.youtube.com/embed/${$f(s)}`}var ur=class extends nt{constructor(){super(...arguments),this.endpoint="content",this.fields=["title","media_type","media_url","thumbnail_url","content","created_at","updated_at"]}get tags(){return this.hasMany("tags",ho)}getContent(){return this.attr("content")}getMediaType(){return this.attr("media_type")}getMediaUrl(){return this.attr("media_url")}getThumbnailUrl(){return this.attr("thumbnail_url")}getTitle(){return this.attr("title")}getYouTubeEmbed(){return Nf(this.getMediaUrl())?zf(this.getMediaUrl()):""}hasContent(){return!!this.getContent()}isImage(){return this.getMediaType()==="image"}isVideo(){return this.getMediaType()==="video"}};var fo=class extends nt{constructor(){super(...arguments),this.fields=["content_id","tag"]}getTag(){return this.attr("tag")}};var po=class s extends nt{constructor(){super(...arguments),this.endpoint="data/geocode",this.fields=["status","results"]}static async search(t){let e=new s;return await e.fetch({},{address:t}),e}getCityAndState(){var n,i;let t=this.getAddressComponents(),e=((n=t.find(a=>a.types.includes("locality")))==null?void 0:n.long_name)||"",r=((i=t.find(a=>a.types.includes("administrative_area_level_1")))==null?void 0:i.short_name)||"";return`${e}, ${r}`}getCountry(){var e;return((e=this.getAddressComponents().find(r=>r.types.includes("country")))==null?void 0:e.long_name)||""}getFullAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.long_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.long_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.long_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.long_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.long_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.long_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getLocation(){let t=0,e=0;if(this.hasResults()){let n=this.getResults()[0].geometry.location;t=n.lat,e=n.lng}return{latitude:t,longitude:e}}getResults(){return this.attr("results")}getShortAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.short_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.short_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.short_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.short_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.short_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.short_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getStatus(){return this.attributes.status||""}hasResults(){let t=this.getResults();return t&&t[0]&&t[0].geometry}isOK(){return this.getStatus()==="OK"}getAddressComponents(){return this.getResults()[0].address_components}};var cr=class extends nt{constructor(){super(...arguments),this.endpoint="media",this.fields=["id","type","url","group","subgroup","created_at","updated_at"],this.proxyUrl="https://d2k0n0ggvekdpx.cloudfront.net"}getGroup(){return this.attr("group")}getSubgroup(){return this.attr("subgroup")}getProxiedUrl(t={width:1024}){let e=this.getUrl(),r=["unsafe"],n=[];if(!e)return e;if(n.push("format(webp)"),t.width||t.height){let i=`${t.width||""}x${t.height||""}`;t.fitIn&&r.push("fit-in"),r.push(i)}if(t.smart&&r.push("smart"),t.filters){if(t.filters.quality&&n.push(`quality(${t.filters.quality})`),t.filters.blur&&n.push(`blur(${t.filters.blur})`),t.filters.brightness&&n.push(`brightness(${t.filters.brightness})`),t.filters.contrast&&n.push(`contrast(${t.filters.contrast})`),t.filters.grayscale&&n.push("grayscale()"),t.filters.watermark){let i=t.filters.watermark;n.push(`watermark(${i.image},${i.x},${i.y},${i.transparency||0})`)}n.length>0&&r.push(`filters:${n.join(":")}`)}return`${this.proxyUrl}/${r.join("/")}/${this.getUrl()}`}getType(){return this.attr("type")}getUrl(){return this.attr("url")}getUrlSmall(){return this.getProxiedUrl({width:256})}getUrlMedium(){return this.getProxiedUrl({width:512})}getUrlLarge(){return this.getProxiedUrl({width:1024})}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var mo=class extends nt{constructor(){super(...arguments),this.fields=["id","group","key","value","created_at","updated_at"]}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var lr=class extends nt{constructor(){super(...arguments),this.endpoint="rulebooks",this.fields=["content"]}getContent(){return this.attr("content")}};var hr=class extends nt{constructor(){super(...arguments),this.endpoint="statistics",this.fields=["beacon_count","city_count","venue_count","user_count","video_duration_as_minutes","video_duration_as_hours"]}getBeaconCount(){return this.attr("beacon_count")}getCityCount(){return this.attr("city_count")}getVenueCount(){return this.attr("venue_count")}getUserCount(){return this.attr("user_count")}getVideoDurationAsMinutes(){return this.attr("video_duration_as_minutes")}getVideoDurationAsHours(){return this.attr("video_duration_as_hours")}};var je=class extends nt{constructor(){super(...arguments),this.endpoint="users",this.fields=["id","lat","lon","name","phone","slug","status","wallet_balance","created_at","updated_at"]}get avatar(){return this.media.primary||new cr}get games(){return this.hasMany("games",In)}get lastCollection(){return this.hasOne("last_collection",We)}get media(){let t=this.hasMany("media",go);return t.useModifiedEndpoint(this),t}get metadata(){return this.hasMany("meta",In)}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getName(){return this.attr("name")}getPermissions(){return parseFloat(this.attr("permissions"))}getPhone(){return this.attr("phone")}getSlug(){return this.attr("slug")}getStatus(){return parseFloat(this.attr("status"))}getWalletBalance(){return parseFloat(this.attr("wallet_balance"))}};var We=class extends nt{constructor(){super(...arguments),this.endpoint="wallet",this.fields=["id","user_id","challenger_id","transaction","source","source_id","created_at","updated_at"]}async collect(t){return this.setHeader("Authorization-API",`Bearer ${t}`),this.setHeader("Content-Type","application/json"),this.id="",this.endpoint="wallet/collect",await this.save(),this}get challenger(){return this.hasOne("challenger",je)}canCollect(){let t=C.WALLET_COLLECTION_TIME,e=new Date,r=new Date(this.getUpdatedAt());return e.getTime()-r.getTime()>=t}getSource(){return this.attr("source")}getTransaction(){return this.attr("transaction")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var N0=z(Et(),1),gt=class extends N0.Collection{constructor(t={}){var e;if(super(t),this.baseUrl=fe.app.apiUrl,this.limit=fe.app.limit,this.baseUrl=t.baseUrl||this.baseUrl||fe.app.apiUrl||C.API_URL,this.setOptions({withCredentials:!1}),this.limit=t.limit||this.limit,this.page=t.page||this.page,this.builder.qp("limit",this.limit),this.builder.qp("page",this.page),t.token)this.setToken(t.token);else{let r=Cn.get(),n=((e=r==null?void 0:r.state)==null?void 0:e.token)||(r==null?void 0:r.getters["authentication/token"]);n&&this.setToken(n)}this.attachEvents()}attachEvents(){this.on("add:before",t=>{t.detail.model.baseUrl=this.baseUrl}),this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),L.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),L.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={collection:this};e===401?(this.dispatch("request:unauthorized",r),L.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),L.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),L.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),L.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),L.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),L.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),L.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}shouldFetch(){return this.loading?!1:this.models.length===0||this.requestTime<=0}getBaseUrl(){return fe.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var xo=class extends gt{constructor(){super(...arguments),this.model=new ar}};var yo=class extends gt{constructor(){super(...arguments),this.model=new ur}news(){return this.tags(["news"])}pad(){return this.tags(["pad"])}tags(t=[]){return this.setQueryParam("tags",t.join(",")),this}tutorials(){return this.tags(["tutorial"])}};var ho=class extends gt{constructor(){super(...arguments),this.model=new fo}getByTag(t){return this.models.filter(e=>e.getTag()===t)}};var go=class extends gt{constructor(){super(...arguments),this.model=new cr}get images(){return this.models.filter(t=>t.getType()==="image")}get primary(){return this.models.at(0)}get videos(){return this.models.filter(t=>t.getType()==="video")}};var In=class extends gt{constructor(){super(...arguments),this.model=new mo}getByKey(t){return this.models.filter(e=>e.getKey()===t)}getByGroup(t){return this.models.filter(e=>e.getGroup()===t)}getKeys(){return this.models.map(t=>t.getKey())}getValues(){return this.models.map(t=>t.getValue())}getValuesByKey(t){return this.getByKey(t).map(e=>e.getValue())}getValuesByGroup(t){return this.getByGroup(t).map(e=>e.getValue())}};var wo=class extends gt{constructor(){super(...arguments),this.model=new lr}};var vo=class extends gt{constructor(){super(...arguments),this.model=new hr}};var bo=class extends gt{constructor(){super(...arguments),this.model=new je}};var Mo=class extends gt{constructor(){super(...arguments),this.model=new We}};var Qe={};g(Qe,{Achievement:()=>jf,ContentMediaType:()=>Wf,ContentType:()=>Qf,Currency:()=>Yf,MediaGroup:()=>Gf,MediaType:()=>Zf,ProductType:()=>Kf});var jf;(function(s){s.FirstPhoto="first_photo"})(jf||(jf={}));var Wf;(function(s){s.Image="image",s.Video="video"})(Wf||(Wf={}));var Qf;(function(s){s.News="news",s.Pad="pool-pad",s.Tutorial="tutorial"})(Qf||(Qf={}));var Yf;(function(s){s.CSX="CSX",s.USD="USD"})(Yf||(Yf={}));var Gf;(function(s){s.Default="",s.Community="community",s.Evaluated="evaluated",s.Inappropriate="inappropriate",s.Unknown="unknown"})(Gf||(Gf={}));var Zf;(function(s){s.Exterior="exterior",s.Interior="interior",s.Person="person",s.Table="table"})(Zf||(Zf={}));var Kf;(function(s){s.Digital="digital",s.Physical="physical"})(Kf||(Kf={}));var To={};g(To,{ConnectionRefused:()=>Xf,Geolocation:()=>pe,InvalidInput:()=>Jf,InvalidRenderer:()=>tp,InvalidStorageProvider:()=>ep,NotImplemented:()=>sp,ParserFailure:()=>rp,Unauthorized:()=>np});var Xf=class extends Error{};var pe=class extends Error{constructor(t){super(t),this.name="GeolocationError"}};var Jf=class extends Error{};var tp=class extends Error{};var ep=class extends Error{};var sp=class extends Error{};var rp=class extends Error{};var np=class extends Error{};var Hc={};g(Hc,{Advertisement:()=>kc,Content:()=>Sc,Geocode:()=>Uc,Rulebook:()=>Pc,Statistic:()=>Ac,User:()=>Lc,Wallet:()=>qc});var kc={};g(kc,{collection:()=>ME,model:()=>bE});function bE(s={}){return new ar(void 0,Object.assign({baseUrl:C.API_URL_V3},s))}function ME(s={}){return new xo(Object.assign({baseUrl:C.API_URL_V3},s))}var Sc={};g(Sc,{collection:()=>EE,model:()=>TE});function TE(s={}){return new ur(void 0,Object.assign({baseUrl:C.API_URL_V3},s))}function EE(s={}){return new yo(Object.assign({baseUrl:C.API_URL_V3},s))}var Uc={};g(Uc,{model:()=>OE});function OE(s={}){return new po(void 0,Object.assign({baseUrl:C.API_URL_V1},s))}var Pc={};g(Pc,{collection:()=>_E,model:()=>CE});function CE(s={}){return new lr(void 0,Object.assign({baseUrl:C.API_URL_V3},s))}function _E(s={}){return new wo(Object.assign({baseUrl:C.API_URL_V3},s))}var Ac={};g(Ac,{collection:()=>DE,model:()=>IE});function IE(s={}){return new hr(void 0,Object.assign({baseUrl:C.API_URL_V3},s))}function DE(s={}){return new vo(Object.assign({baseUrl:C.API_URL_V3},s))}var Lc={};g(Lc,{collection:()=>SE,model:()=>kE});function kE(s={}){return new je(void 0,Object.assign({baseUrl:C.API_URL_V1},s))}function SE(s={}){return new bo(Object.assign({baseUrl:C.API_URL_V1},s))}var qc={};g(qc,{collection:()=>PE,model:()=>UE});function UE(s={}){return new We(void 0,Object.assign({baseUrl:C.API_URL_V1},s))}function PE(s={}){return new Mo(Object.assign({baseUrl:C.API_URL_V1},s))}var Vc={};g(Vc,{Keyboard:()=>Fc,Pointer:()=>ip,Sensor:()=>Bc,Shortcut:()=>dr,ShortcutSequencer:()=>Rc,Video:()=>op});var dr=class extends mt.Dispatcher{static add(t,e){AE.add(t,e)}constructor(t={}){super(),this.keymap={},this.attached=!1,this.keysDown={},this.options={ignoreInputs:!0},Object.assign(this.options,t||{})}add(t,e){this.ensureSetup(),this.keymap[t]=e}remove(t){delete this.keymap[t]}ensureSetup(){this.attached||(this.attached=!0,document.addEventListener("keydown",this.Handle_OnKeyDown.bind(this)),document.addEventListener("keyup",this.Handle_OnKeyUp.bind(this)))}findMatch(){let t=Object.keys(this.keymap);return t=t.sort((e,r)=>{var n,i;return(((n=r.match(/\+/g))==null?void 0:n.length)||0)-(((i=e.match(/\+/g))==null?void 0:i.length)||0)}),t.find(e=>e.replace(/\s+/g,"").toLowerCase().split("+").every(n=>this.keysDown[n.toLowerCase()]))}normalize(t){return t.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("arrow","")}Handle_OnKeyDown(t){let e=t.target;if(!(t instanceof KeyboardEvent)||this.options.ignoreInputs&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"))return;let r=this.normalize(t.key);this.keysDown[r]=!0;let n=this.findMatch()||"",i=this.keymap[n];i&&(this.trigger("shortcut:found",{match:n}),i())}Handle_OnKeyUp(t){if(!(t instanceof KeyboardEvent))return;let e=this.normalize(t.key);delete this.keysDown[e]}},Rc=class s extends mt.Dispatcher{static add(t,e){$0.add(t,e)}static remove(t){$0.remove(t)}static get instance(){return new s}constructor(){super(),this.matches=[],this.sequences={},this.shortcut=new dr,this.shortcut.on("shortcut:found",this.Handle_OnShortcutFound.bind(this))}add(t,e){let r=t.join(",");t.forEach(n=>{this.shortcut.add(n,()=>{})}),this.sequences[r]=e}remove(t){let e=t.join(",");t.forEach(r=>{this.shortcut.remove(r)}),delete this.sequences[e]}async Handle_OnShortcutFound(t){let e=t.data.match;this.matches.push(e),this.matches=this.matches.slice(-20);let r=Object.keys(this.sequences).find(i=>{let a=i.split(","),f=this.matches.slice(-a.length);return f.length>=a.length&&f.every((p,o)=>p===a[o])});if(!r)return;let n=this.sequences[r];n&&n()}},AE=new dr({ignoreInputs:!0}),$0=new Rc;var Fc=class extends mt.Dispatcher{constructor(){super(...arguments),this.shortcut=new dr({ignoreInputs:!0})}},XR=new Fc;var ip=class s extends mt.Dispatcher{static start(t="pointer",e=!1){this.instance||(this.instance=new s(t,e))}constructor(t="pointer",e=!1,r=document){super(),this.angle=0,this.changed=!1,this.distance=0,this.down=!1,this.dx=0,this.dy=0,this.friction=.95,this.inertia=0,this.lastX=0,this.lastY=0,this.moved=!1,this.rx=0,this.rx2=0,this.ry=0,this.ry2=0,this.rox=0,this.roy=0,this.rox2=0,this.roy2=0,this.ox=0,this.oy=0,this.time=Date.now(),this.timeDown=0,this.timeDownDifference=0,this.timeDifference=0,this.touches=0,this.vx=0,this.vy=0,this.x=0,this.x2=0,this.y=0,this.y2=0,this.wheel=!1,this.wheelDelta=0,this.moveThreshold=5,this.cid=Math.random().toString(36).substr(2,9),this.eventType="",this.holdTimeout=null,this.initialPinchDistance=0,this.lastPinchDistance=0,this.lastTapTime=0,this.swipeThreshold=50,this.swipeTimeThreshold=300,this.swipeVelocityThreshold=.3,this.tapCount=0,this.tapTimeout=null,this.twoFingerTapCount=0,this.vxHistory=[],this.vyHistory=[],this.Handle_OnInterval=this.Handle_OnInterval.bind(this),this.Handle_OnPointerDown=this.Handle_OnPointerDown.bind(this),this.Handle_OnPointerMove=this.Handle_OnPointerMove.bind(this),this.Handle_OnPointerUp=this.Handle_OnPointerUp.bind(this),this.Handle_OnWheel=this.Handle_OnWheel.bind(this),this.autoTouchEvents=e,this.eventType=t,this.target=r,this.attachEvents()}attachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.addEventListener("touchstart",this.Handle_OnPointerDown),this.target.addEventListener("touchmove",this.Handle_OnPointerMove),this.target.addEventListener("touchend",this.Handle_OnPointerUp)):(this.target.addEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.addEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.addEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.addEventListener("wheel",this.Handle_OnWheel,{passive:!1}),Se.Interval.add(this.Handle_OnInterval,1e3/60,`${this.cid}-pointer-velocity`)}detachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.removeEventListener("touchstart",this.Handle_OnPointerDown),this.target.removeEventListener("touchmove",this.Handle_OnPointerMove),this.target.removeEventListener("touchend",this.Handle_OnPointerUp)):(this.target.removeEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.removeEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.removeEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.removeEventListener("wheel",this.Handle_OnWheel),Se.Interval.remove(`${this.cid}-pointer-velocity`)}applyForMobile(t=!0,e=!0,r=!0){document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",t&&document.addEventListener("touchmove",function(n){n.preventDefault()},{passive:!1}),e&&document.addEventListener("touchend",function(n){n.preventDefault()},!1),r&&document.addEventListener("contextmenu",function(n){n.preventDefault()})}capturePinchZoom(t){document.addEventListener("wheel",e=>{t&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.Handle_OnWheel(e)},{capture:t,passive:!1}),document.body.style.touchAction="pan-x pan-y",document.body.style.userSelect="none"}configureSwipe(t){return t.distanceThreshold!==void 0&&(this.swipeThreshold=t.distanceThreshold),t.timeThreshold!==void 0&&(this.swipeTimeThreshold=t.timeThreshold),t.velocityThreshold!==void 0&&(this.swipeVelocityThreshold=t.velocityThreshold),this}resetRelative(t=0,e=0){return this.rox=this.rox2=this.rx=this.rx2=t,this.roy=this.roy2=this.ry=this.ry2=e,this}get downEvent(){let t="";switch(this.eventType){case"pointer":t="pointerdown";break;case"touch":t="touchstart";break;default:t="mousedown";break}return t}get moveEvent(){let t="";switch(this.eventType){case"pointer":t="pointermove";break;case"touch":t="touchmove";break;default:t="mousemove";break}return t}get upEvent(){let t="";switch(this.eventType){case"pointer":t="pointerup";break;case"touch":t="touchend";break;default:t="mouseup";break}return t}getDistanceBetweenTouches(t){if(t.touches.length<2)return 0;let e=t.touches[0],r=t.touches[1],n=e.pageX-r.pageX,i=e.pageY-r.pageY;return Math.sqrt(n*n+i*i)}async Handle_OnInterval(){let t=this.vx,e=this.vy;this.vx*=this.friction,this.vy*=this.friction,Math.abs(this.vx)<.025&&(this.vx=0),Math.abs(this.vy)<.025&&(this.vy=0),isFinite(this.vx)||(this.vx=0),isFinite(this.vy)||(this.vy=0),this.down||(this.x2+=this.vx*5,this.y2+=this.vy*5,this.rx2+=this.vx*5,this.ry2+=this.vy*5),this.changed=this.vx!==t||this.vy!==e}async Handle_OnPointerDown(t){let e="touches"in t&&t.touches.length===2;if(this.down=!0,this.moved=!1,this.timeDown=Date.now(),this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=this.getDistanceBetweenTouches(t),this.lastPinchDistance=this.initialPinchDistance),this.ox=this.x="touches"in t?t.touches[0].clientX:t.clientX,this.oy=this.y="touches"in t?t.touches[0].clientY:t.clientY,this.dx=0,this.dy=0,this.target!==document){let n=this.target.getBoundingClientRect();this.ox-=n.left,this.oy-=n.top,this.x-=n.left,this.y-=n.top}this.rox=this.rx,this.roy=this.ry,this.rox2=this.rx2,this.roy2=this.ry2,this.dispatch("down",{touches:this.touches,x:this.x,y:this.y});let r={x:this.x,y:this.y};e?(this.twoFingerTapCount++,this.twoFingerTapCount===1&&setTimeout(()=>{this.twoFingerTapCount===1&&!this.down?this.dispatch("twofingertap",r):this.twoFingerTapCount===2&&this.dispatch("twofingerdoubletap",r),this.twoFingerTapCount=0},300)):(this.tapCount++,this.timeDown-this.lastTapTime<300?(clearTimeout(this.tapTimeout),this.dispatch("doubletap",r),this.tapCount=0):this.tapTimeout=setTimeout(()=>{this.tapCount===1&&!this.down&&this.dispatch("tap",r),this.tapCount=0},300),this.lastTapTime=this.timeDown,this.holdTimeout=setTimeout(()=>{this.down&&this.dispatch("hold",r)},500))}async Handle_OnPointerMove(t){if(this.moved&&this.holdTimeout&&clearTimeout(this.holdTimeout),this.touches>1){let e=this.getDistanceBetweenTouches(t),r=e-this.lastPinchDistance,n=e/this.initialPinchDistance;this.dispatch("zoom",{delta:r,isTrackpad:!1,type:"pinch",scale:n}),this.lastPinchDistance=e}if(this.lastX=this.x,this.lastY=this.y,this.x="touches"in t?t.touches[0].clientX:t.clientX,this.y="touches"in t?t.touches[0].clientY:t.clientY,this.target!==document){let e=this.target.getBoundingClientRect();this.x-=e.left,this.y-=e.top}this.currentTarget=t.currentTarget,this.activeTarget=t.target,this.timeDifference=Date.now()-this.time,this.time=Date.now(),this.dispatch("move",{x:this.x,y:this.y}),this.vxHistory.push((this.x-this.lastX)/this.timeDifference),this.vyHistory.push((this.y-this.lastY)/this.timeDifference),this.vxHistory.length>5&&this.vxHistory.shift(),this.vyHistory.length>5&&this.vyHistory.shift(),this.down&&(this.dx=this.x-this.ox,this.dy=this.y-this.oy,this.rx=this.rox+this.dx,this.ry=this.roy+this.dy,this.rx2=this.rox2+this.dx,this.ry2=this.roy2+this.dy,this.angle=Math.atan2(this.dy,this.dx)*(180/Math.PI),this.distance=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.moved=Math.abs(this.distance)>this.moveThreshold,this.x2=this.x,this.y2=this.y,this.timeDownDifference=this.time-this.timeDown,this.inertia=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.vx=this.vxHistory.reduce((e,r)=>e+r)/(this.vxHistory.length||1),this.vy=this.vyHistory.reduce((e,r)=>e+r)/(this.vyHistory.length||1),this.dispatch("drag",{angle:this.angle,changed:this.changed,distance:this.distance,dx:this.dx,dy:this.dy,inertia:this.inertia,moved:this.moved,ox:this.ox,oy:this.oy,rx:this.rx,ry:this.ry,rx2:this.rx2,ry2:this.ry2,time:this.time,timeDifference:this.timeDifference,timeDown:this.timeDown,timeDownDifference:this.timeDownDifference,touches:this.touches,vx:this.vx,vy:this.vy,x:this.x,y:this.y}))}async Handle_OnPointerUp(t){let e=Date.now()-this.timeDown;if(this.down="touches"in t?t.touches.length>0:!1,this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=0,this.lastPinchDistance=0),this.dispatch("up",{touches:this.touches,x:this.x,y:this.y}),this.moved&&e<this.swipeTimeThreshold){let r=this.x-this.ox,n=this.y-this.oy,i=Math.sqrt(r*r+n*n),a=i/this.timeDifference;if(i>this.swipeThreshold&&a>this.swipeVelocityThreshold){let f=Math.abs(r)>Math.abs(n)?r>0?"right":"left":n>0?"down":"up";this.dispatch("swipe",{direction:f,distance:i,duration:this.timeDifference,velocity:a}),this.dispatch("swipe:"+f,{direction:f,distance:i,duration:this.timeDifference,velocity:a})}}(this.distance<50||!this.distance)&&this.dispatch("tap:small",{x:this.x,y:this.y,distance:this.distance}),(this.distance<20||!this.distance)&&this.dispatch("tap:xsmall",{x:this.x,y:this.y,distance:this.distance}),this.holdTimeout&&clearTimeout(this.holdTimeout),this.distance=0}async Handle_OnWheel(t){let e=~~(Math.abs(t.wheelDeltaY||1)/Math.abs(t.deltaY||1))>1,r=t.deltaY,n=r>0?"out":"in";Se.Debounce.exec(this.cid,()=>{this.wheel=!1,this.wheelDelta=0},100,!0),r&&(this.wheel=!0),this.wheelDelta=r,this.dispatch("zoom",{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"}),this.dispatch("zoom:"+n,{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"})}};var Bc=class extends mt.Dispatcher{get hasMotion(){return"ondevicemotion"in window}get hasOrientation(){return"ondeviceorientation"in window}get hasSensors(){return this.hasOrientation&&this.hasMotion}constructor(){super(),this.Handle_OnDeviceMotion=this.Handle_OnDeviceMotion.bind(this),this.Handle_OnDeviceOrientation=this.Handle_OnDeviceOrientation.bind(this),this.attachEvents()}attachEvents(){window.addEventListener("devicemotion",this.Handle_OnDeviceMotion),window.addEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}detachEvents(){window.removeEventListener("devicemotion",this.Handle_OnDeviceMotion),window.removeEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}async Handle_OnDeviceMotion(t){let{acceleration:e,accelerationIncludingGravity:r,rotationRate:n}=t;this.dispatch("gyroscope",n),this.dispatch("accelerometer",e),this.dispatch("accelerometer:gravity",r)}async Handle_OnDeviceOrientation(t){let{absolute:e,alpha:r,beta:n,gamma:i}=t;this.dispatch("orientation",{absolute:e,alpha:r,beta:n,gamma:i})}},rF=new Bc;var op=class extends mt.Dispatcher{static async getSources(){return(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput").map(r=>({deviceId:r.deviceId,label:r.label}))}};var Se={};g(Se,{Analytics:()=>Nc,Cache:()=>Eo,Debounce:()=>fp,Device:()=>$c,Easing:()=>Os,EasingFunction:()=>Y,Format:()=>zc,Geolocation:()=>Yc,Hysteresis:()=>pp,Interval:()=>Sn,Math:()=>Wc,Presentation:()=>Gc,Share:()=>Zc,String:()=>Kc,YouTube:()=>lo,documentHeight:()=>aC,getCSSVariable:()=>uC,getDate:()=>cC,getEasingMethod:()=>Oo,offsetHeight:()=>hC,offsetLeft:()=>lC,offsetTop:()=>dC,offsetWidth:()=>fC,requestAnimationFrame:()=>pC,sleep:()=>mC});var Nc={};g(Nc,{embedGoogleAnalytics:()=>LE,embedMetaPixel:()=>HE,embedRedditPixel:()=>qE});function LE(s){if(window.gtag){console.warn("Analytics is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+s,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],console.log("GA:",s),window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date),gtag("config",s)}function qE(s,t={}){if(window.rdt){console.warn("Reddit pixel is already embedded");return}let e=document.createElement("script");e.async=!0,e.src="https://www.redditstatic.com/ads/pixel.js";let r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r),window.rdt=function(){window.rdt.sendEvent?window.rdt.sendEvent(...arguments):window.rdt.callQueue.push(arguments)},window.rdt.callQueue=[],console.log("RP:",s),rdt("init",s,t),rdt("track","PageVisit")}function HE(s){if(window.fbq){console.warn("Facebook pixel is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js";let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod(...arguments):window.fbq.queue.push(arguments)},window._fbq||(window._fbq=window.fbq),window.fbq.push=window.fbq,window.fbq.queue=[],window.fbq.loaded=!0,window.fbq.version="2.0",console.log("MP:",s),fbq("init",s),fbq("track","PageView")}var $c={};g($c,{getBrowserName:()=>fr,getBrowserVersion:()=>WE,getOrientation:()=>NE,getScreenHeight:()=>jE,getScreenWidth:()=>zE,isAndroid:()=>BE,isChrome:()=>GE,isEdge:()=>YE,isFirefox:()=>ZE,isIE:()=>QE,isIOS:()=>FE,isLandscape:()=>ap,isMobile:()=>RE,isOpera:()=>XE,isPortrait:()=>VE,isSafari:()=>KE,isTouchDevice:()=>$E,userAgent:()=>Dn});function Dn(){return navigator.userAgent}function RE(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(Dn())}function FE(){return/iphone|ipad|ipod/i.test(Dn())}function BE(){return/android/i.test(Dn())}function ap(){return window.orientation===90||window.orientation===-90}function VE(){return!ap()}function NE(){return ap()?"landscape":"portrait"}function $E(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function zE(){return window.screen.width}function jE(){return window.screen.height}function fr(){let s=Dn();return s.indexOf("firefox")>-1?"Firefox":s.indexOf("opera")>-1||s.indexOf("opr")>-1?"Opera":s.indexOf("chrome")>-1?"Chrome":s.indexOf("safari")>-1?"Safari":s.indexOf("msie")>-1||s.indexOf("trident")>-1?"Internet Explorer":"Unknown"}function WE(){let s=Dn(),t=s.match(/version\/(\d+)/i);return t===null&&(t=s.match(/(?:msie |rv:)(\d+)/)),t===null&&(t=s.match(/(?:chrome|safari|firefox|opera|opr|edge)\/(\d+)/i)),t===null?"Unknown":t[1]}function QE(){return fr()==="Internet Explorer"}function YE(){return fr()==="Edge"}function GE(){return fr()==="Chrome"}function ZE(){return fr()==="Firefox"}function KE(){return fr()==="Safari"}function XE(){return fr()==="Opera"}var zc={};g(zc,{bytesToSize:()=>JE,daysBetweenDates:()=>tO,getRelativeTime:()=>up,secondsToTime:()=>eO,timeAgo:()=>nO,timeToHuman:()=>rO,timeToSeconds:()=>sO,timeUntil:()=>iO});function JE(s){let t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s==0)return"0 Byte";let e=parseInt(Math.floor(Math.log(s)/Math.log(1024)).toString());return Math.round(s/Math.pow(1024,e))+" "+t[e]}function tO(s,t){let e=Math.abs(t.getTime()-s.getTime());return Math.ceil(e/(1e3*3600*24))}function eO(s,t="00:00:00"){let e=new Date(0);switch(e.setSeconds(s),t){case"00:00:00":return e.toISOString().substr(11,8);case"00:00":return e.toISOString().substr(14,5);case"00":return e.toISOString().substr(17,2)}return e.toISOString().substr(11,8)}function sO(s){let[t,e,r]=s.split(":").map(Number);return t*3600+e*60+r}function z0(s){if(s instanceof Date)return isNaN(s.getTime())?null:s;if(typeof s=="string"){let t=new Date(s);if(!isNaN(t.getTime()))return t;let e=s.split(":").map(Number);if(e.length===3&&e.every(r=>!isNaN(r))){let r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),e[0],e[1],e[2])}}return typeof s=="number"?s<9466848e5?new Date(Date.now()+s*1e3):new Date(s):null}function rO(s,t=!1){let e;if(typeof s=="string"){let a=s.split(":").map(Number);if(a.length===3&&a.every(f=>!isNaN(f)))e=a[0]*3600+a[1]*60+a[2];else{let f=z0(s);if(!f)return"";e=Math.floor((f.getTime()-Date.now())/1e3)}}else s instanceof Date?e=Math.floor((s.getTime()-Date.now())/1e3):s>9466848e5?e=Math.floor((s-Date.now())/1e3):e=s;let r=Math.floor(Math.abs(e)/3600),n=Math.floor(Math.abs(e)%3600/60),i=Math.floor(Math.abs(e)%60);if(t){let a=[];return r>0&&a.push(`${r}h`),n>0&&a.push(`${n}m`),i>0&&a.push(`${i}s`),a.join(" ")||"0s"}return`${r}h ${n}m ${i}s`}function up(s,t={}){let e=z0(s);if(!e)return"";let{type:r="ago",suffix:n="",shortUnits:i=!1}=t,a=new Date,f=e<a,p=Math.abs(r==="ago"?a.getTime()-e.getTime():e.getTime()-a.getTime()),o=Math.floor(p/1e3),u={year:31536e3,month:2592e3,day:86400,hour:3600,minute:60,second:1},c={year:i?"y":"year",month:i?"mo":"month",day:i?"d":"day",hour:i?"h":"hour",minute:i?"m":"minute",second:i?"s":"second"};for(let[h,m]of Object.entries(u)){let w=o/m;if(w>=1){let y=Math.floor(w),v=c[h],x=!i&&y!==1?v+"s":v,d=`${y} ${x}`;return n?`${d} ${n}`.trim():d}}let l=i?"0s":"0 seconds";return n?`${l} ${n}`.trim():l}function nO(s,t="ago",e="ago"){return up(s,{suffix:"ago",type:"ago"})}function iO(s,t="until",e="left"){return up(s,{suffix:"left",type:"until"})}var Yc={};g(Yc,{CACHE_EXPIRATION:()=>Ye,cache:()=>Ge,clearWatch:()=>HO,config:()=>X0,distanceBetween:()=>VO,getBearing:()=>NO,getBounds:()=>$O,getLocation:()=>LO,isPointInBounds:()=>zO,simplifyCoordinates:()=>jO,watchLocation:()=>qO});var Eo=class{constructor(t=-1){this.storage={},this.ttl=t>0?t:0}all(){let t=Object.keys(this.storage),e={},r;for(let n of t)r=this.get(n),r!==void 0&&(e[n]=this.get(n));return e}delete(t){this.storage[t]&&delete this.storage[t]}get(t){let e=this.storage[t],r;return e?e.ttl===0?(r=e.value,this.delete(t)):this.isCachedItemHealthy(e)&&(r=e.value):r=void 0,r}exists(t){return this.storage[t]!==void 0}has(t){return this.get(t)!==void 0}set(t,e,r=0,n=!1){let i=this.has(t),a=Date.now();return i&&this.isImmutable(t)?!1:(this.storage[t]={immutable:n,time:a,ttl:r,value:e},!0)}isCachedItemHealthy(t){let e=Date.now(),r=t.time,n=t.ttl;return r+n>e}isImmutable(t){let e=this.storage[t];return!!(e!=null&&e.immutable)}};var Wc={};g(Wc,{EARTH_RADIUS:()=>jc,FOOT_METER_RATIO:()=>cp,MPH_METER_RATIO:()=>lp,angle:()=>j0,angleAsDegrees:()=>oO,angleDifference:()=>W0,angleDifferenceAsDegrees:()=>aO,angleFromVector:()=>uO,angleFromVectors:()=>cO,angleNormalize:()=>lO,clamp:()=>kn,clampUnsigned:()=>Q0,degreesToSlope:()=>hO,denormalize:()=>dO,distance:()=>fO,dot:()=>pO,feetToMeters:()=>mO,inverseLerp:()=>Y0,lerp:()=>G0,logarithmicZoom:()=>gO,metersToFeet:()=>xO,minMax:()=>yO,minMaxUnsigned:()=>wO,mphToMs:()=>vO,msToMph:()=>bO,normalize:()=>MO,randomInt:()=>EO,randomRange:()=>Z0,randomSign:()=>OO,remap:()=>TO,rotate:()=>K0,rotateDeg:()=>CO,round:()=>_O,roundToDecimal:()=>kO,roundToNearest:()=>IO,roundToNearestFraction:()=>DO,slopeToDegrees:()=>SO,smootherstep:()=>PO,smoothstep:()=>UO,toDegrees:()=>pr,toRadians:()=>$t,transformRatio:()=>AO});var Y=class{static linear(t){return t}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}static easeInCubic(t){return t*t*t}static easeOutCubic(t){return--t*t*t+1}static easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}static easeInQuart(t){return t*t*t*t}static easeOutQuart(t){return 1- --t*t*t*t}static easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}static easeInQuint(t){return t*t*t*t*t}static easeOutQuint(t){return 1+--t*t*t*t*t}static easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}static easeInSine(t){return 1-Math.cos(t*Math.PI/2)}static easeOutSine(t){return Math.sin(t*Math.PI/2)}static easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}static easeInExpo(t){return t===0?0:Math.pow(2,10*(t-1))}static easeOutExpo(t){return t===1?1:-Math.pow(2,-10*t)+1}static easeInOutExpo(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)}static easeInCirc(t){return-(Math.sqrt(1-t*t)-1)}static easeOutCirc(t){return Math.sqrt(1- --t*t)}static easeInOutCirc(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static easeInBack(t,e=1.70158){return t*t*((e+1)*t-e)}static easeOutBack(t,e=1.70158){return--t*t*((e+1)*t+e)+1}static easeInOutBack(t,e=1.70158){return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)}},Os=class s{static linear(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.linear,n)}static easeInQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInQuad,n)}static easeOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeOutQuad,n)}static easeInOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInOutQuad,n)}static easeInQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInQuart,n)}static easeOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeOutQuart,n)}static easeInOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInOutQuart,n)}static easeInQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInQuint,n)}static easeOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeOutQuint,n)}static easeInOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInOutQuint,n)}static easeInCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInCubic,n)}static easeOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeOutCubic,n)}static easeInOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInOutCubic,n)}static easeInSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInSine,n)}static easeOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeOutSine,n)}static easeInOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInOutSine,n)}static easeInExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInExpo,n)}static easeOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeOutExpo,n)}static easeInOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInOutExpo,n)}static easeInCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInCirc,n)}static easeOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeOutCirc,n)}static easeInOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInOutCirc,n)}static easeInBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInBack,n)}static easeOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeOutBack,n)}static easeInOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Y.easeInOutBack,n)}static normalize(t,e=0,r=1,n,i=!0){let a=s.clamp((t-e)/(r-e),0,1);return i?n(a):e+(r-e)*n(a)}static clamp(t,e=0,r=1){return Math.min(Math.max(t,e),r)}};function Oo(s){return Os.hasOwnProperty(s)?Os[s]:Os.easeInOutQuad}var jc=6371,cp=3.28084,lp=.44704;function j0(s,t,e,r){return Math.atan2(r-t,e-s)}function oO(s,t,e,r){return j0(s,t,e,r)*180/Math.PI}function W0(s,t){return Math.atan2(Math.sin(t-s),Math.cos(t-s))}function aO(s,t){return W0(s,t)*180/Math.PI}function uO(s){return Math.atan2(s.y,s.x)}function cO(s,t){return Math.atan2(t.y-s.y,t.x-s.x)}function lO(s){return s=s%360,s<0&&(s+=360),s}function kn(s,t,e){return Math.min(Math.max(s,t),e)}function Q0(s,t,e){return[t,e]=[Math.min(t,e),Math.max(t,e)],Math.sign(s)*Math.min(Math.abs(s),Math.abs(s)>t?e:t)}function hO(s){return Math.tan(s*(Math.PI/180))}function dO(s,t,e,r=!1){let n=s*(e-t)+t;return r&&(n=kn(n,t,e)),n}function fO(s,t,e,r){return Math.sqrt((e-s)**2+(r-t)**2)}function pO(s,t,e,r){return s*e+t*r}function mO(s){return s/cp}function Y0(s,t,e){return(e-s)/(t-s)}function G0(s,t,e){return s+(t-s)*e}function gO(s,t,e=.025){let r=Math.log(s),n=Math.log(t+1)||0;return Math.exp(r+n*e)}function xO(s){return s*cp}function yO(s,t,e){return kn(s,t,e)}function wO(s,t,e){return Q0(s,t,e)}function vO(s){return s*lp}function bO(s){return s/lp}function MO(s,t,e,r=!1){let n=(s-t)/(e-t);return r&&(n=kn(n,t,e)),n}function TO(s,t,e,r,n){return r+(n-r)*Y0(t,e,s)}function Z0(s,t){return G0(s,t,Math.random())}function EO(s,t){return Math.floor(Z0(s,t+1))}function OO(){return Math.random()<.5?-1:1}function K0(s,t,e){let r=Math.sin(e),n=Math.cos(e);return[s*n-t*r,s*r+t*n]}function CO(s,t,e){return K0(s,t,e*Math.PI/180)}function _O(s,t=2){return Number(s.toFixed(t))}function IO(s,t){return Math.round(s/t)*t}function DO(s,t){return Math.round(s*t)/t}function kO(s,t){return Math.round(s*10**t)/10**t}function SO(s){return Math.atan(s)*(180/Math.PI)}function UO(s,t,e){let r=kn((e-s)/(t-s),0,1);return r*r*(3-2*r)}function PO(s,t,e){let r=kn((e-s)/(t-s),0,1);return r*r*r*(r*(r*6-15)+10)}function $t(s){return s*Math.PI/180}function pr(s){return s*180/Math.PI}function AO(s,t=4,e="linear",r=""){r||(r=e);let n=Oo(e),i=Oo(r);return s<=1/t?n(s/(1/t)):s<=1-1/t?1:i((1-s)/(1/t))}var X0={IP_LOCATION_API:"https://ipapi.co/json/"},Ye=1e3*6*2,Ge=new Eo(Ye);async function LO(){let s="geolocation",t=Ge.get(s);if(t)return t;try{return navigator!=null&&navigator.geolocation?await RO(s):await WO()?await FO(s):await BO(s)}catch(e){throw e instanceof Error?e:new pe("Unknown error occurred")}}function qO(s,t,e={enableHighAccuracy:!0}){let r="geolocation";return navigator!=null&&navigator.geolocation?navigator.geolocation.watchPosition(n=>{let i=mr(n);Ge.set(r,i,Ye),L.dispatch("location:change",i),s==null||s(i)},async n=>{try{let i=await Qc(),a=mr(i);Ge.set(r,a,Ye),L.dispatch("location:change",a),s==null||s(a)}catch(i){L.dispatch("location:error",n),t==null||t(n)}},e):0}function HO(s){try{if(!(navigator!=null&&navigator.geolocation))throw new pe("Geolocation is not supported by this browser.");navigator.geolocation.clearWatch(s)}catch(t){console.error("Error clearing geolocation watch:",t)}}async function RO(s){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(r=>{let n=mr(r);Ge.set(s,n,Ye),console.info("\u{1F538} Location",n),L.dispatch("location:change",n),t(n)},async r=>{if(console.warn("Browser geolocation error:",r),r.code===r.PERMISSION_DENIED)e(new pe("Permission denied for geolocation."));else if(r.code===r.POSITION_UNAVAILABLE)e(new pe("Geolocation position unavailable."));else if(r.code===r.TIMEOUT)e(new pe("Geolocation request timed out."));else try{let n=await Qc(),i=mr(n);Ge.set(s,i,Ye),console.info("\u{1F53A} Location",i),L.dispatch("location:change",i),t(i)}catch(n){e(new pe("Fallback IP location failed."))}})})}async function FO(s){try{let{Geolocation:t}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1)),e=await t.getCurrentPosition(),r=mr(e);return Ge.set(s,r,Ye),console.info("\u{1F539} Location",r),L.dispatch("location:change",r),r}catch(t){try{let e=await Qc(),r=mr(e);return Ge.set(s,r,Ye),console.info("\u{1F53A} Location",r),L.dispatch("location:change",r),r}catch(e){throw L.dispatch("location:error",t),t}}}async function BO(s){try{let t=await Qc(),e=mr(t);return Ge.set(s,e,Ye),console.info("\u{1F53A} Location",e),L.dispatch("location:change",e),e}catch(t){throw L.dispatch("location:error",t),new pe("Failed to get IP location")}}async function Qc(){let t=await(await fetch(X0.IP_LOCATION_API)).json();return{coords:{accuracy:5e3,altitude:null,altitudeAccuracy:null,heading:null,latitude:t.latitude,longitude:t.longitude,speed:null},timestamp:Date.now()}}function mr(s){return{position:s,timestamp:Date.now()}}function VO(s,t,e,r){let n=jc,i=$t(e-s),a=$t(r-t),f=Math.sin(i/2)*Math.sin(i/2)+Math.cos($t(s))*Math.cos($t(e))*Math.sin(a/2)*Math.sin(a/2),p=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return n*p}function NO(s,t,e,r){let n=$t(r-t),i=Math.sin(n)*Math.cos($t(e)),a=Math.cos($t(s))*Math.sin($t(e))-Math.sin($t(s))*Math.cos($t(e))*Math.cos(n);return(pr(Math.atan2(i,a))+360)%360}function $O(s,t,e){let r=jc,n=$t(s),i=$t(t),a=e/r;return{latitudeMin:pr(n-a),latitudeMax:pr(n+a),longitudeMin:pr(i-a/Math.cos(n)),longitudeMax:pr(i+a/Math.cos(n))}}function zO(s,t,e){return s>=e.latitudeMin&&s<=e.latitudeMax&&t>=e.longitudeMin&&t<=e.longitudeMax}function jO(s,t,e=1e3){var a,f;let r,n,i=e;if(typeof s=="number"&&typeof t=="number")r=s,n=t,i=e;else if(Array.isArray(s))[r,n]=s;else if(typeof s=="object")"position"in s?(r=s.position.lat,n=s.position.lng):(r=(a=s==null?void 0:s.latitude)!=null?a:(s==null?void 0:s.lat)||0,n=(f=s==null?void 0:s.longitude)!=null?f:(s==null?void 0:s.lng)||0);else throw new Error("Invalid coordinates format");if(typeof r!="number"||typeof n!="number")throw new Error("Invalid coordinates: latitude and longitude must be numbers");return{latitude:Math.round(r*i)/i,longitude:Math.round(n*i)/i}}async function WO(){try{let{Geolocation:s}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1));return!!s}catch(s){return!1}}var Gc={};g(Gc,{castToDevice:()=>GO,isFullscreenActive:()=>YO,toggleFullscreen:()=>QO});function QO(s=document.body){document.fullscreenElement?document.exitFullscreen().catch(t=>{console.error(`Error attempting to exit fullscreen mode: ${t.message}`)}):s.requestFullscreen().catch(t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message}`)})}function YO(){return!!document.fullscreenElement}async function GO(s){if(!("presentation"in navigator)){console.error("Presentation API is not supported in this browser.");return}try{new PresentationRequest([s]).start().then(e=>{console.log("Connected to presentation:",e),e.onterminate=()=>{console.log("Presentation terminated.")}},e=>{console.error("Error starting presentation:",e)})}catch(t){console.error("Error casting to device:",t)}}var Zc={};g(Zc,{canShare:()=>ty,hasSupport:()=>hp,native:()=>J0,remoteFile:()=>ZO});async function J0(s=[],t="",e="",r=""){let n={files:s,text:e,title:t,url:r};if(hp()===!1)throw new Error("This browser does not support navigator share");if(ty()===!1)throw new Error("Sharing is not supported, make sure you are on HTTPS");return navigator.canShare(n)?(await navigator.share(n),!0):!1}async function ZO(s,t="",e="",r=""){let n=await KO(s);return J0([n],t,e,r)}function hp(){return"share"in navigator}function ty(){return hp()&&!!navigator.canShare}async function KO(s="",t="my-file.png"){s||(s="https://cdn.glitch.com/f96f78ec-d35d-447b-acf4-86f2b3658491%2Fchuck.png?v=1618311092497");let e=await fetch(s).then(i=>i.blob()),r=e.type.split(";").shift();return new File([e],t,{type:r})}var Kc={};g(Kc,{basicHash:()=>XO,capitalize:()=>JO,chunkSentences:()=>tC,md5:()=>eC,random:()=>sC,shuffle:()=>rC,slug:()=>nC,trimSentences:()=>oC,truncate:()=>iC});function XO(s){return s.split("").reduce((t,e)=>(t=(t<<5)-t+e.charCodeAt(0),t&t),0).toString()}function JO(s){return s.charAt(0).toUpperCase()+s.slice(1)}function tC(s,t=130){let e=s.replace(/\.$/,"").split(". "),r=[];return e.forEach(n=>{r.length===0||r[r.length-1].length>t?r.push(n+"."):(n=n.trim(),r[r.length-1]+=` ${n}.`)}),r}function eC(s){let t="0123456789abcdef",e=new TextEncoder().encode(s),r=e.length*8,n=(448-(e.length*8+1)%512+512)%512,i=e.length+Math.ceil(n/8)+8,a=new Uint8Array(i);a.set(e),a[e.length]=128;let f=new DataView(a.buffer);f.setUint32(i-8,r>>>0,!0),f.setUint32(i-4,Math.floor(r/4294967296),!0);let p=new Uint32Array(i/4);for(let x=0;x<i;x+=4)p[x/4]=f.getUint32(x,!0);let o=1732584193,u=4023233417,c=2562383102,l=271733878;function h(x,d){return x<<d|x>>>32-d}function m(x,d,M){return x&d|~x&M}function w(x,d,M){return x&M|d&~M}function y(x,d,M){return x^d^M}function v(x,d,M){return d^(x|~M)}for(let x=0;x<p.length;x+=16){let d=p.slice(x,x+16),[M,Ot,Ut,Pt]=[o,u,c,l];o=h(o+m(u,c,l)+d[0]+3614090360,7)+u,l=h(l+m(o,u,c)+d[1]+3905402710,12)+o,c=h(c+m(l,o,u)+d[2]+606105819,17)+l,u=h(u+m(c,l,o)+d[3]+3250441966,22)+c,o=h(o+m(u,c,l)+d[4]+4118548399,7)+u,l=h(l+m(o,u,c)+d[5]+1200080426,12)+o,c=h(c+m(l,o,u)+d[6]+2821735955,17)+l,u=h(u+m(c,l,o)+d[7]+4249261313,22)+c,o=h(o+m(u,c,l)+d[8]+1770035416,7)+u,l=h(l+m(o,u,c)+d[9]+2336552879,12)+o,c=h(c+m(l,o,u)+d[10]+4294925233,17)+l,u=h(u+m(c,l,o)+d[11]+2304563134,22)+c,o=h(o+m(u,c,l)+d[12]+1804603682,7)+u,l=h(l+m(o,u,c)+d[13]+4254626195,12)+o,c=h(c+m(l,o,u)+d[14]+2792965006,17)+l,u=h(u+m(c,l,o)+d[15]+1236535329,22)+c,o=h(o+w(u,c,l)+d[1]+4129170786,5)+u,l=h(l+w(o,u,c)+d[6]+3225465664,9)+o,c=h(c+w(l,o,u)+d[11]+643717713,14)+l,u=h(u+w(c,l,o)+d[0]+3921069994,20)+c,o=h(o+w(u,c,l)+d[5]+3593408605,5)+u,l=h(l+w(o,u,c)+d[10]+38016083,9)+o,c=h(c+w(l,o,u)+d[15]+3634488961,14)+l,u=h(u+w(c,l,o)+d[4]+3889429448,20)+c,o=h(o+w(u,c,l)+d[9]+568446438,5)+u,l=h(l+w(o,u,c)+d[14]+3275163606,9)+o,c=h(c+w(l,o,u)+d[3]+4107603335,14)+l,u=h(u+w(c,l,o)+d[8]+1163531501,20)+c,o=h(o+w(u,c,l)+d[13]+2850285829,5)+u,l=h(l+w(o,u,c)+d[2]+4243563512,9)+o,c=h(c+w(l,o,u)+d[7]+1735328473,14)+l,u=h(u+w(c,l,o)+d[12]+2368359562,20)+c,o=h(o+y(u,c,l)+d[5]+4294588738,4)+u,l=h(l+y(o,u,c)+d[8]+2272392833,11)+o,c=h(c+y(l,o,u)+d[11]+1839030562,16)+l,u=h(u+y(c,l,o)+d[14]+4259657740,23)+c,o=h(o+y(u,c,l)+d[1]+2763975236,4)+u,l=h(l+y(o,u,c)+d[4]+1272893353,11)+o,c=h(c+y(l,o,u)+d[7]+4139469664,16)+l,u=h(u+y(c,l,o)+d[10]+3200236656,23)+c,o=h(o+y(u,c,l)+d[13]+681279174,4)+u,l=h(l+y(o,u,c)+d[0]+3936430074,11)+o,c=h(c+y(l,o,u)+d[3]+3572445317,16)+l,u=h(u+y(c,l,o)+d[6]+76029189,23)+c,o=h(o+y(u,c,l)+d[9]+3654602809,4)+u,l=h(l+y(o,u,c)+d[12]+3873151461,11)+o,c=h(c+y(l,o,u)+d[15]+530742520,16)+l,u=h(u+y(c,l,o)+d[2]+3299628645,23)+c,o=h(o+v(u,c,l)+d[0]+4096336452,6)+u,l=h(l+v(o,u,c)+d[7]+1126891415,10)+o,c=h(c+v(l,o,u)+d[14]+2878612391,15)+l,u=h(u+v(c,l,o)+d[5]+4237533241,21)+c,o=h(o+v(u,c,l)+d[12]+1700485571,6)+u,l=h(l+v(o,u,c)+d[3]+2399980690,10)+o,c=h(c+v(l,o,u)+d[10]+4293915773,15)+l,u=h(u+v(c,l,o)+d[1]+2240044497,21)+c,o=h(o+v(u,c,l)+d[8]+1873313359,6)+u,l=h(l+v(o,u,c)+d[15]+4264355552,10)+o,c=h(c+v(l,o,u)+d[6]+2734768916,15)+l,u=h(u+v(c,l,o)+d[13]+1309151649,21)+c,o=h(o+v(u,c,l)+d[4]+4149444226,6)+u,l=h(l+v(o,u,c)+d[11]+3174756917,10)+o,c=h(c+v(l,o,u)+d[2]+718787259,15)+l,u=h(u+v(c,l,o)+d[9]+3951481745,21)+c,o=o+M>>>0,u=u+Ot>>>0,c=c+Ut>>>0,l=l+Pt>>>0}return[o,u,c,l].map(x=>("00000000"+x.toString(16)).slice(-8)).join("")}function sC(s=7){return Math.random().toString(36).substring(s)}function rC(s){let t=s.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function nC(s){return s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function iC(s,t=30){return s.length>t?s.slice(0,t).trim()+"...":s}function oC(s,t=500){let e=s.indexOf(".",t);return s.substr(0,e>0?e+1:s.length)}var dp={},fp=class s{static exec(t,e,r=1e3,n=!1,i=[]){if(!dp[t]){let a=new s(e,r,!0,n);dp[t]=a.run}dp[t](...i)}constructor(t,e=200,r=!1,n=!1){this.inclusive=!1,this.lastTrigger=0,this.timeout=0,this.callback=t,this.inclusive=n,this.threshold=e,n||(this.lastTrigger=Date.now()),this.run=this.run.bind(this)}run(t=!1){let e=Date.now();e-this.lastTrigger>this.threshold&&(this.lastTrigger=e,this.callback.apply(null,arguments)),this.timeout!==0&&(clearTimeout(this.timeout),this.timeout=0),this.inclusive&&!t&&(this.timeout=setTimeout(()=>this.run(!0),this.threshold))}};function aC(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function uC(s,t=document.documentElement){return getComputedStyle(t).getPropertyValue(s).trim()}function cC(s=""){return s||(s=C.CURRENT_DATE),s?new Date(s):new Date}function lC(s){let t=0;do t+=s.offsetLeft,s=s.offsetParent;while(s);return t}function hC(s){return s.offsetHeight}function dC(s){let t=0;do t+=s.offsetTop,s=s.offsetParent;while(s);return t}function fC(s){return s.offsetWidth}var pC=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);function mC(s){return new Promise(t=>setTimeout(t,s))}var ey=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);var Sn=class s{static get instance(){return this._instance||(this._instance=new s),this._instance}static add(t,e=16,r=""){let n,i=0,a=0,f=0;return r||(r=Math.random().toString(32).substr(2,6)),t.hasOwnProperty("callback")?(e=t.fps||e,n=t.callback,r=t.name||r,f=t.stopAfter||0):n=t,this.instance.unpause(),this.instance.intervals.push({executions:i,fps:e,func:n,lastTick:a,name:r,stopAfter:f}),r}static fps(t,e,r){return this.instance.intervals.filter(n=>{n.name===t&&(n.fps=e||n.fps,n.func=r||n.func)}),this.instance}static list(){console.log(this.instance.intervals)}static remove(t){this.instance.intervals=this.instance.intervals.filter(e=>e.name!=t)}static start(){this.instance&&this.instance.unpause()}static stop(){this.instance&&this.instance.pause()}constructor(){this.enabled=!1,this.intervals=[],this.lastFrameTime=0,this.Handle_OnRequestAnimationFrame=this.Handle_OnRequestAnimationFrame.bind(this)}pause(){this.enabled=!1}unpause(){this.enabled=!0,this.Handle_OnRequestAnimationFrame()}async Handle_OnRequestAnimationFrame(){if(!this.enabled)return;let t=Date.now();this.intervals.forEach(e=>{if(t-(e.lastTick||0)>e.fps){if(e.stopAfter&&e.executions>=e.stopAfter){s.remove(e.name);return}e.func({}),e.lastTick=t,e.executions++}}),this.lastFrameTime=Date.now(),ey(this.Handle_OnRequestAnimationFrame)}};var pp=class s extends mt.Dispatcher{static add(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),e}static wait(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),new Promise(r=>{e.once("change",n=>{e.stop(),r(n)})})}constructor(t,e=20,r=2e3){super(),this.conditionMetCount=0,this.isVariableSet=!1,this.intervalName="",this.condition=t,this.threshold=e,this.duration=r}reset(){this.conditionMetCount=0}start(){this.intervalName=Sn.add(()=>this.checkCondition(),this.duration/this.threshold)}stop(){Sn.remove(this.intervalName)}checkCondition(){this.condition()?(this.conditionMetCount=Math.min(this.threshold,this.conditionMetCount+1),this.conditionMetCount>=this.threshold&&!this.isVariableSet&&(this.isVariableSet=!0,this.dispatch("set"),this.dispatch("change",{set:this.isVariableSet}))):(this.conditionMetCount=Math.max(0,this.conditionMetCount-1),this.conditionMetCount<=0&&this.isVariableSet&&(this.isVariableSet=!1,this.dispatch("unset"),this.dispatch("change",{set:this.isVariableSet})))}};var Xc=class extends On{};var sy=z(Et(),1),gC="1.31.9";var la={};g(la,{Media:()=>Mr});var Do={};g(Do,{Venue:()=>ua,VenueDetail:()=>_o,VenueHour:()=>Io});var ts={};g(ts,{Venue:()=>gr,VenueDetail:()=>ko,VenueHour:()=>aa});var gr=class extends N.Base{constructor(){super(...arguments),this.endpoint="venues",this.fields=["id","name","slug","description","website","phone","notes","status","address","city","state","country","zip","type","lat","long","created_at","updated_at"]}async checkin(){let t=this.clone();t.endpoint=`${this.endpoint}/${this.id}/checkin`,t.setId("");let e=await t.post();return this.set(e.attributes),this}get checkins(){return this.hasMany("checkins",tt.User)}get details(){return this.hasMany("details",_o)}get hours(){return this.hasMany("hours",Io)}get media(){return this.hasMany("media",tt.Media)}get meta(){return this.hasMany("meta",tt.Meta)}isOpenNow(t=""){return this.hours.isOpenNow(t)}getAddress(){return this.attr("address")}getCity(){return this.attr("city")}getCountry(){return this.attr("country")}getCreatedAt(){return this.attr("created_at")}getDescription(){return this.attr("description")}getDistance(t,e,r="km"){let n=u=>u*Math.PI/180,i=r==="km"?6371:3958.8,a=n(t-this.getLatitude()),f=n(e-this.getLongitude()),p=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n(this.getLatitude()))*Math.cos(n(t))*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p));return i*o}getFullAddress(){return[this.getAddress(),this.getCity(),this.getState(),this.getZip(),this.getCountry()].filter(Boolean).join(", ")}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getName(){return this.attr("name")}getNotes(){return this.attr("notes")}getRating(){var r;let t=((r=this.details.findWhere({key:"google-rating"}))==null?void 0:r.getValue())||"0.0";return parseFloat(t)}getPhone(){return this.attr("phone")}getSlug(){return this.attr("slug")}getState(){return this.attr("state")}getStatus(){return parseFloat(this.attr("status"))}getType(){return this.attr("type")}getUpdatedAt(){return this.attr("updated_at")}getWebsite(){return this.attr("website")}getZip(){return this.attr("zip")}};var ko=class extends N.Base{constructor(){super(...arguments),this.fields=["id","group","key","value","subgroup"]}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}};var Ze=class extends Error{},Jc=class extends Ze{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}},tl=class extends Ze{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}},el=class extends Ze{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}},me=class extends Ze{},Un=class extends Ze{constructor(t){super(`Invalid unit ${t}`)}},lt=class extends Ze{},ge=class extends Ze{constructor(){super("Zone is an abstract class")}};var b="numeric",xe="short",Zt="long",Cs={year:b,month:b,day:b},So={year:b,month:xe,day:b},mp={year:b,month:xe,day:b,weekday:xe},Uo={year:b,month:Zt,day:b},Po={year:b,month:Zt,day:b,weekday:Zt},Ao={hour:b,minute:b},Lo={hour:b,minute:b,second:b},qo={hour:b,minute:b,second:b,timeZoneName:xe},Ho={hour:b,minute:b,second:b,timeZoneName:Zt},Ro={hour:b,minute:b,hourCycle:"h23"},Fo={hour:b,minute:b,second:b,hourCycle:"h23"},Bo={hour:b,minute:b,second:b,hourCycle:"h23",timeZoneName:xe},Vo={hour:b,minute:b,second:b,hourCycle:"h23",timeZoneName:Zt},No={year:b,month:b,day:b,hour:b,minute:b},$o={year:b,month:b,day:b,hour:b,minute:b,second:b},zo={year:b,month:xe,day:b,hour:b,minute:b},jo={year:b,month:xe,day:b,hour:b,minute:b,second:b},gp={year:b,month:xe,day:b,weekday:xe,hour:b,minute:b},Wo={year:b,month:Zt,day:b,hour:b,minute:b,timeZoneName:xe},Qo={year:b,month:Zt,day:b,hour:b,minute:b,second:b,timeZoneName:xe},Yo={year:b,month:Zt,day:b,weekday:Zt,hour:b,minute:b,timeZoneName:Zt},Go={year:b,month:Zt,day:b,weekday:Zt,hour:b,minute:b,second:b,timeZoneName:Zt};var zt=class{get type(){throw new ge}get name(){throw new ge}get ianaName(){return this.name}get isUniversal(){throw new ge}offsetName(t,e){throw new ge}formatOffset(t,e){throw new ge}offset(t){throw new ge}equals(t){throw new ge}get isValid(){throw new ge}};var xp=null,_s=class s extends zt{static get instance(){return xp===null&&(xp=new s),xp}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:e,locale:r}){return rl(t,e,r)}formatOffset(t,e){return Is(this.offset(t),e)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}};var il={};function xC(s){return il[s]||(il[s]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:s,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),il[s]}var yC={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function wC(s,t){let e=s.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(e),[,n,i,a,f,p,o,u]=r;return[a,n,i,f,p,o,u]}function vC(s,t){let e=s.formatToParts(t),r=[];for(let n=0;n<e.length;n++){let{type:i,value:a}=e[n],f=yC[i];i==="era"?r[f]=a:T(f)||(r[f]=parseInt(a,10))}return r}var nl={},qt=class s extends zt{static create(t){return nl[t]||(nl[t]=new s(t)),nl[t]}static resetCache(){nl={},il={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch(e){return!1}}constructor(t){super(),this.zoneName=t,this.valid=s.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:e,locale:r}){return rl(t,e,r,this.name)}formatOffset(t,e){return Is(this.offset(t),e)}offset(t){let e=new Date(t);if(isNaN(e))return NaN;let r=xC(this.name),[n,i,a,f,p,o,u]=r.formatToParts?vC(r,e):wC(r,e);f==="BC"&&(n=-Math.abs(n)+1);let l=Pn({year:n,month:i,day:a,hour:p===24?0:p,minute:o,second:u,millisecond:0}),h=+e,m=h%1e3;return h-=m>=0?m:1e3+m,(l-h)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}};var ry={};function bC(s,t={}){let e=JSON.stringify([s,t]),r=ry[e];return r||(r=new Intl.ListFormat(s,t),ry[e]=r),r}var yp={};function wp(s,t={}){let e=JSON.stringify([s,t]),r=yp[e];return r||(r=new Intl.DateTimeFormat(s,t),yp[e]=r),r}var vp={};function MC(s,t={}){let e=JSON.stringify([s,t]),r=vp[e];return r||(r=new Intl.NumberFormat(s,t),vp[e]=r),r}var bp={};function TC(s,t={}){let{base:e,...r}=t,n=JSON.stringify([s,r]),i=bp[n];return i||(i=new Intl.RelativeTimeFormat(s,t),bp[n]=i),i}var Zo=null;function EC(){return Zo||(Zo=new Intl.DateTimeFormat().resolvedOptions().locale,Zo)}var ny={};function OC(s){let t=ny[s];if(!t){let e=new Intl.Locale(s);t="getWeekInfo"in e?e.getWeekInfo():e.weekInfo,ny[s]=t}return t}function CC(s){let t=s.indexOf("-x-");t!==-1&&(s=s.substring(0,t));let e=s.indexOf("-u-");if(e===-1)return[s];{let r,n;try{r=wp(s).resolvedOptions(),n=s}catch(f){let p=s.substring(0,e);r=wp(p).resolvedOptions(),n=p}let{numberingSystem:i,calendar:a}=r;return[n,i,a]}}function _C(s,t,e){return(e||t)&&(s.includes("-u-")||(s+="-u"),e&&(s+=`-ca-${e}`),t&&(s+=`-nu-${t}`)),s}function IC(s){let t=[];for(let e=1;e<=12;e++){let r=E.utc(2009,e,1);t.push(s(r))}return t}function DC(s){let t=[];for(let e=1;e<=7;e++){let r=E.utc(2016,11,13+e);t.push(s(r))}return t}function ol(s,t,e,r){let n=s.listingMode();return n==="error"?null:n==="en"?e(t):r(t)}function kC(s){return s.numberingSystem&&s.numberingSystem!=="latn"?!1:s.numberingSystem==="latn"||!s.locale||s.locale.startsWith("en")||new Intl.DateTimeFormat(s.intl).resolvedOptions().numberingSystem==="latn"}var Mp=class{constructor(t,e,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:n,floor:i,...a}=r;if(!e||Object.keys(a).length>0){let f={useGrouping:!1,...r};r.padTo>0&&(f.minimumIntegerDigits=r.padTo),this.inf=MC(t,f)}}format(t){if(this.inf){let e=this.floor?Math.floor(t):t;return this.inf.format(e)}else{let e=this.floor?Math.floor(t):An(t,3);return it(e,this.padTo)}}},Tp=class{constructor(t,e,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){let a=-1*(t.offset/60),f=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;t.offset!==0&&qt.create(f).valid?(n=f,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);let i={...this.opts};i.timeZone=i.timeZone||n,this.dtf=wp(e,i)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(e=>{if(e.type==="timeZoneName"){let r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:r}}else return e}):t}resolvedOptions(){return this.dtf.resolvedOptions()}},Ep=class{constructor(t,e,r){this.opts={style:"long",...r},!e&&al()&&(this.rtf=TC(t,r))}format(t,e){return this.rtf?this.rtf.format(t,e):iy(e,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}},SC={firstDay:1,minimalDays:4,weekend:[6,7]},B=class s{static fromOpts(t){return s.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,e,r,n,i=!1){let a=t||F.defaultLocale,f=a||(i?"en-US":EC()),p=e||F.defaultNumberingSystem,o=r||F.defaultOutputCalendar,u=Ko(n)||F.defaultWeekSettings;return new s(f,p,o,u,a)}static resetCache(){Zo=null,yp={},vp={},bp={}}static fromObject({locale:t,numberingSystem:e,outputCalendar:r,weekSettings:n}={}){return s.create(t,e,r,n)}constructor(t,e,r,n,i){let[a,f,p]=CC(t);this.locale=a,this.numberingSystem=e||f||null,this.outputCalendar=r||p||null,this.weekSettings=n,this.intl=_C(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=kC(this)),this.fastNumbersCached}listingMode(){let t=this.isEnglish(),e=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&e?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:s.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Ko(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,e=!1){return ol(this,t,Op,()=>{let r=e?{month:t,day:"numeric"}:{month:t},n=e?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=IC(i=>this.extract(i,r,"month"))),this.monthsCache[n][t]})}weekdays(t,e=!1){return ol(this,t,Cp,()=>{let r=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=e?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=DC(i=>this.extract(i,r,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return ol(this,void 0,()=>_p,()=>{if(!this.meridiemCache){let t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[E.utc(2016,11,13,9),E.utc(2016,11,13,19)].map(e=>this.extract(e,t,"dayperiod"))}return this.meridiemCache})}eras(t){return ol(this,t,Ip,()=>{let e={era:t};return this.eraCache[t]||(this.eraCache[t]=[E.utc(-40,1,1),E.utc(2017,1,1)].map(r=>this.extract(r,e,"era"))),this.eraCache[t]})}extract(t,e,r){let n=this.dtFormatter(t,e),i=n.formatToParts(),a=i.find(f=>f.type.toLowerCase()===r);return a?a.value:null}numberFormatter(t={}){return new Mp(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,e={}){return new Tp(t,this.intl,e)}relFormatter(t={}){return new Ep(this.intl,this.isEnglish(),t)}listFormatter(t={}){return bC(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:ul()?OC(this.locale):SC}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}};var kp=null,Dt=class s extends zt{static get utcInstance(){return kp===null&&(kp=new s(0)),kp}static instance(t){return t===0?s.utcInstance:new s(t)}static parseSpecifier(t){if(t){let e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new s(xr(e[1],e[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Is(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Is(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,e){return Is(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}};var Ln=class extends zt{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function ye(s,t){let e;if(T(s)||s===null)return t;if(s instanceof zt)return s;if(oy(s)){let r=s.toLowerCase();return r==="default"?t:r==="local"||r==="system"?_s.instance:r==="utc"||r==="gmt"?Dt.utcInstance:Dt.parseSpecifier(r)||qt.create(s)}else return we(s)?Dt.instance(s):typeof s=="object"&&"offset"in s&&typeof s.offset=="function"?s:new Ln(s)}var Sp={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},ay={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},UC=Sp.hanidec.replace(/[\[|\]]/g,"").split("");function uy(s){let t=parseInt(s,10);if(isNaN(t)){t="";for(let e=0;e<s.length;e++){let r=s.charCodeAt(e);if(s[e].search(Sp.hanidec)!==-1)t+=UC.indexOf(s[e]);else for(let n in ay){let[i,a]=ay[n];r>=i&&r<=a&&(t+=r-i)}}return parseInt(t,10)}else return t}var qn={};function cy(){qn={}}function re({numberingSystem:s},t=""){let e=s||"latn";return qn[e]||(qn[e]={}),qn[e][t]||(qn[e][t]=new RegExp(`${Sp[e]}${t}`)),qn[e][t]}var ly=()=>Date.now(),hy="system",dy=null,fy=null,py=null,my=60,gy,xy=null,F=class{static get now(){return ly}static set now(t){ly=t}static set defaultZone(t){hy=t}static get defaultZone(){return ye(hy,_s.instance)}static get defaultLocale(){return dy}static set defaultLocale(t){dy=t}static get defaultNumberingSystem(){return fy}static set defaultNumberingSystem(t){fy=t}static get defaultOutputCalendar(){return py}static set defaultOutputCalendar(t){py=t}static get defaultWeekSettings(){return xy}static set defaultWeekSettings(t){xy=Ko(t)}static get twoDigitCutoffYear(){return my}static set twoDigitCutoffYear(t){my=t%100}static get throwOnInvalid(){return gy}static set throwOnInvalid(t){gy=t}static resetCaches(){B.resetCache(),qt.resetCache(),E.resetCache(),cy()}};var kt=class{constructor(t,e){this.reason=t,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var yy=[0,31,59,90,120,151,181,212,243,273,304,334],wy=[0,31,60,91,121,152,182,213,244,274,305,335];function ne(s,t){return new kt("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${s}, which is invalid`)}function cl(s,t,e){let r=new Date(Date.UTC(s,t-1,e));s<100&&s>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let n=r.getUTCDay();return n===0?7:n}function vy(s,t,e){return e+(wr(s)?wy:yy)[t-1]}function by(s,t){let e=wr(s)?wy:yy,r=e.findIndex(i=>i<t),n=t-e[r];return{month:r+1,day:n}}function ll(s,t){return(s-t+7)%7+1}function Xo(s,t=4,e=1){let{year:r,month:n,day:i}=s,a=vy(r,n,i),f=ll(cl(r,n,i),e),p=Math.floor((a-f+14-t)/7),o;return p<1?(o=r-1,p=yr(o,t,e)):p>yr(r,t,e)?(o=r+1,p=1):o=r,{weekYear:o,weekNumber:p,weekday:f,...ta(s)}}function Up(s,t=4,e=1){let{weekYear:r,weekNumber:n,weekday:i}=s,a=ll(cl(r,1,t),e),f=Ds(r),p=n*7+i-a-7+t,o;p<1?(o=r-1,p+=Ds(o)):p>f?(o=r+1,p-=Ds(r)):o=r;let{month:u,day:c}=by(o,p);return{year:o,month:u,day:c,...ta(s)}}function hl(s){let{year:t,month:e,day:r}=s,n=vy(t,e,r);return{year:t,ordinal:n,...ta(s)}}function Pp(s){let{year:t,ordinal:e}=s,{month:r,day:n}=by(t,e);return{year:t,month:r,day:n,...ta(s)}}function Ap(s,t){if(!T(s.localWeekday)||!T(s.localWeekNumber)||!T(s.localWeekYear)){if(!T(s.weekday)||!T(s.weekNumber)||!T(s.weekYear))throw new me("Cannot mix locale-based week fields with ISO-based week fields");return T(s.localWeekday)||(s.weekday=s.localWeekday),T(s.localWeekNumber)||(s.weekNumber=s.localWeekNumber),T(s.localWeekYear)||(s.weekYear=s.localWeekYear),delete s.localWeekday,delete s.localWeekNumber,delete s.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function My(s,t=4,e=1){let r=Jo(s.weekYear),n=Kt(s.weekNumber,1,yr(s.weekYear,t,e)),i=Kt(s.weekday,1,7);return r?n?i?!1:ne("weekday",s.weekday):ne("week",s.weekNumber):ne("weekYear",s.weekYear)}function Ty(s){let t=Jo(s.year),e=Kt(s.ordinal,1,Ds(s.year));return t?e?!1:ne("ordinal",s.ordinal):ne("year",s.year)}function Lp(s){let t=Jo(s.year),e=Kt(s.month,1,12),r=Kt(s.day,1,Hn(s.year,s.month));return t?e?r?!1:ne("day",s.day):ne("month",s.month):ne("year",s.year)}function qp(s){let{hour:t,minute:e,second:r,millisecond:n}=s,i=Kt(t,0,23)||t===24&&e===0&&r===0&&n===0,a=Kt(e,0,59),f=Kt(r,0,59),p=Kt(n,0,999);return i?a?f?p?!1:ne("millisecond",n):ne("second",r):ne("minute",e):ne("hour",t)}function T(s){return typeof s>"u"}function we(s){return typeof s=="number"}function Jo(s){return typeof s=="number"&&s%1===0}function oy(s){return typeof s=="string"}function Oy(s){return Object.prototype.toString.call(s)==="[object Date]"}function al(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch(s){return!1}}function ul(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(s){return!1}}function Cy(s){return Array.isArray(s)?s:[s]}function Hp(s,t,e){if(s.length!==0)return s.reduce((r,n)=>{let i=[t(n),n];return r&&e(r[0],i[0])===r[0]?r:i},null)[1]}function _y(s,t){return t.reduce((e,r)=>(e[r]=s[r],e),{})}function ks(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Ko(s){if(s==null)return null;if(typeof s!="object")throw new lt("Week settings must be an object");if(!Kt(s.firstDay,1,7)||!Kt(s.minimalDays,1,7)||!Array.isArray(s.weekend)||s.weekend.some(t=>!Kt(t,1,7)))throw new lt("Invalid week settings");return{firstDay:s.firstDay,minimalDays:s.minimalDays,weekend:Array.from(s.weekend)}}function Kt(s,t,e){return Jo(s)&&s>=t&&s<=e}function PC(s,t){return s-t*Math.floor(s/t)}function it(s,t=2){let e=s<0,r;return e?r="-"+(""+-s).padStart(t,"0"):r=(""+s).padStart(t,"0"),r}function Ke(s){if(!(T(s)||s===null||s===""))return parseInt(s,10)}function Ss(s){if(!(T(s)||s===null||s===""))return parseFloat(s)}function ea(s){if(!(T(s)||s===null||s==="")){let t=parseFloat("0."+s)*1e3;return Math.floor(t)}}function An(s,t,e=!1){let r=10**t;return(e?Math.trunc:Math.round)(s*r)/r}function wr(s){return s%4===0&&(s%100!==0||s%400===0)}function Ds(s){return wr(s)?366:365}function Hn(s,t){let e=PC(t-1,12)+1,r=s+(t-e)/12;return e===2?wr(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][e-1]}function Pn(s){let t=Date.UTC(s.year,s.month-1,s.day,s.hour,s.minute,s.second,s.millisecond);return s.year<100&&s.year>=0&&(t=new Date(t),t.setUTCFullYear(s.year,s.month-1,s.day)),+t}function Ey(s,t,e){return-ll(cl(s,1,t),e)+t-1}function yr(s,t=4,e=1){let r=Ey(s,t,e),n=Ey(s+1,t,e);return(Ds(s)-r+n)/7}function sa(s){return s>99?s:s>F.twoDigitCutoffYear?1900+s:2e3+s}function rl(s,t,e,r=null){let n=new Date(s),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(i.timeZone=r);let a={timeZoneName:t,...i},f=new Intl.DateTimeFormat(e,a).formatToParts(n).find(p=>p.type.toLowerCase()==="timezonename");return f?f.value:null}function xr(s,t){let e=parseInt(s,10);Number.isNaN(e)&&(e=0);let r=parseInt(t,10)||0,n=e<0||Object.is(e,-0)?-r:r;return e*60+n}function Rp(s){let t=Number(s);if(typeof s=="boolean"||s===""||Number.isNaN(t))throw new lt(`Invalid unit value ${s}`);return t}function Rn(s,t){let e={};for(let r in s)if(ks(s,r)){let n=s[r];if(n==null)continue;e[t(r)]=Rp(n)}return e}function Is(s,t){let e=Math.trunc(Math.abs(s/60)),r=Math.trunc(Math.abs(s%60)),n=s>=0?"+":"-";switch(t){case"short":return`${n}${it(e,2)}:${it(r,2)}`;case"narrow":return`${n}${e}${r>0?`:${r}`:""}`;case"techie":return`${n}${it(e,2)}${it(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function ta(s){return _y(s,["hour","minute","second","millisecond"])}var AC=["January","February","March","April","May","June","July","August","September","October","November","December"],Fp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],LC=["J","F","M","A","M","J","J","A","S","O","N","D"];function Op(s){switch(s){case"narrow":return[...LC];case"short":return[...Fp];case"long":return[...AC];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Bp=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Vp=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],qC=["M","T","W","T","F","S","S"];function Cp(s){switch(s){case"narrow":return[...qC];case"short":return[...Vp];case"long":return[...Bp];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var _p=["AM","PM"],HC=["Before Christ","Anno Domini"],RC=["BC","AD"],FC=["B","A"];function Ip(s){switch(s){case"narrow":return[...FC];case"short":return[...RC];case"long":return[...HC];default:return null}}function Iy(s){return _p[s.hour<12?0:1]}function Dy(s,t){return Cp(t)[s.weekday-1]}function ky(s,t){return Op(t)[s.month-1]}function Sy(s,t){return Ip(t)[s.year<0?0:1]}function iy(s,t,e="always",r=!1){let n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=["hours","minutes","seconds"].indexOf(s)===-1;if(e==="auto"&&i){let c=s==="days";switch(t){case 1:return c?"tomorrow":`next ${n[s][0]}`;case-1:return c?"yesterday":`last ${n[s][0]}`;case 0:return c?"today":`this ${n[s][0]}`;default:}}let a=Object.is(t,-0)||t<0,f=Math.abs(t),p=f===1,o=n[s],u=r?p?o[1]:o[2]||o[1]:p?n[s][0]:s;return a?`${f} ${u} ago`:`in ${f} ${u}`}function Uy(s,t){let e="";for(let r of s)r.literal?e+=r.val:e+=t(r.val);return e}var BC={D:Cs,DD:So,DDD:Uo,DDDD:Po,t:Ao,tt:Lo,ttt:qo,tttt:Ho,T:Ro,TT:Fo,TTT:Bo,TTTT:Vo,f:No,ff:zo,fff:Wo,ffff:Yo,F:$o,FF:jo,FFF:Qo,FFFF:Go},St=class s{static create(t,e={}){return new s(t,e)}static parseFormat(t){let e=null,r="",n=!1,i=[];for(let a=0;a<t.length;a++){let f=t.charAt(a);f==="'"?(r.length>0&&i.push({literal:n||/^\s+$/.test(r),val:r}),e=null,r="",n=!n):n||f===e?r+=f:(r.length>0&&i.push({literal:/^\s+$/.test(r),val:r}),r=f,e=f)}return r.length>0&&i.push({literal:n||/^\s+$/.test(r),val:r}),i}static macroTokenToFormatOpts(t){return BC[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...e}).format()}dtFormatter(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e})}formatDateTime(t,e){return this.dtFormatter(t,e).format()}formatDateTimeParts(t,e){return this.dtFormatter(t,e).formatToParts()}formatInterval(t,e){return this.dtFormatter(t.start,e).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,e){return this.dtFormatter(t,e).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return it(t,e);let r={...this.opts};return e>0&&(r.padTo=e),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,e){let r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",i=(h,m)=>this.loc.extract(t,h,m),a=h=>t.isOffsetFixed&&t.offset===0&&h.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,h.format):"",f=()=>r?Iy(t):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),p=(h,m)=>r?ky(t,h):i(m?{month:h}:{month:h,day:"numeric"},"month"),o=(h,m)=>r?Dy(t,h):i(m?{weekday:h}:{weekday:h,month:"long",day:"numeric"},"weekday"),u=h=>{let m=s.macroTokenToFormatOpts(h);return m?this.formatWithSystemDefault(t,m):h},c=h=>r?Sy(t,h):i({era:h},"era"),l=h=>{switch(h){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return f();case"d":return n?i({day:"numeric"},"day"):this.num(t.day);case"dd":return n?i({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return o("short",!0);case"cccc":return o("long",!0);case"ccccc":return o("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return o("short",!1);case"EEEE":return o("long",!1);case"EEEEE":return o("narrow",!1);case"L":return n?i({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?i({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return p("short",!0);case"LLLL":return p("long",!0);case"LLLLL":return p("narrow",!0);case"M":return n?i({month:"numeric"},"month"):this.num(t.month);case"MM":return n?i({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return p("short",!1);case"MMMM":return p("long",!1);case"MMMMM":return p("narrow",!1);case"y":return n?i({year:"numeric"},"year"):this.num(t.year);case"yy":return n?i({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?i({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?i({year:"numeric"},"year"):this.num(t.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(h)}};return Uy(s.parseFormat(e),l)}formatDurationFromString(t,e){let r=p=>{switch(p[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=p=>o=>{let u=r(o);return u?this.num(p.get(u),o.length):o},i=s.parseFormat(e),a=i.reduce((p,{literal:o,val:u})=>o?p:p.concat(u),[]),f=t.shiftTo(...a.map(r).filter(p=>p));return Uy(i,n(f))}};var Ay=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Bn(...s){let t=s.reduce((e,r)=>e+r.source,"");return RegExp(`^${t}$`)}function Vn(...s){return t=>s.reduce(([e,r,n],i)=>{let[a,f,p]=i(t,n);return[{...e,...a},f||r,p]},[{},null,1]).slice(0,2)}function Nn(s,...t){if(s==null)return[null,null];for(let[e,r]of t){let n=e.exec(s);if(n)return r(n)}return[null,null]}function Ly(...s){return(t,e)=>{let r={},n;for(n=0;n<s.length;n++)r[s[n]]=Ke(t[e+n]);return[r,null,e+n]}}var qy=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,VC=`(?:${qy.source}?(?:\\[(${Ay.source})\\])?)?`,Np=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Hy=RegExp(`${Np.source}${VC}`),$p=RegExp(`(?:T${Hy.source})?`),NC=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,$C=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zC=/(\d{4})-?(\d{3})/,jC=Ly("weekYear","weekNumber","weekDay"),WC=Ly("year","ordinal"),QC=/(\d{4})-(\d\d)-(\d\d)/,Ry=RegExp(`${Np.source} ?(?:${qy.source}|(${Ay.source}))?`),YC=RegExp(`(?: ${Ry.source})?`);function Fn(s,t,e){let r=s[t];return T(r)?e:Ke(r)}function GC(s,t){return[{year:Fn(s,t),month:Fn(s,t+1,1),day:Fn(s,t+2,1)},null,t+3]}function $n(s,t){return[{hours:Fn(s,t,0),minutes:Fn(s,t+1,0),seconds:Fn(s,t+2,0),milliseconds:ea(s[t+3])},null,t+4]}function ra(s,t){let e=!s[t]&&!s[t+1],r=xr(s[t+1],s[t+2]),n=e?null:Dt.instance(r);return[{},n,t+3]}function na(s,t){let e=s[t]?qt.create(s[t]):null;return[{},e,t+1]}var ZC=RegExp(`^T?${Np.source}$`),KC=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function XC(s){let[t,e,r,n,i,a,f,p,o]=s,u=t[0]==="-",c=p&&p[0]==="-",l=(h,m=!1)=>h!==void 0&&(m||h&&u)?-h:h;return[{years:l(Ss(e)),months:l(Ss(r)),weeks:l(Ss(n)),days:l(Ss(i)),hours:l(Ss(a)),minutes:l(Ss(f)),seconds:l(Ss(p),p==="-0"),milliseconds:l(ea(o),c)}]}var JC={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function zp(s,t,e,r,n,i,a){let f={year:t.length===2?sa(Ke(t)):Ke(t),month:Fp.indexOf(e)+1,day:Ke(r),hour:Ke(n),minute:Ke(i)};return a&&(f.second=Ke(a)),s&&(f.weekday=s.length>3?Bp.indexOf(s)+1:Vp.indexOf(s)+1),f}var t_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function e_(s){let[,t,e,r,n,i,a,f,p,o,u,c]=s,l=zp(t,n,r,e,i,a,f),h;return p?h=JC[p]:o?h=0:h=xr(u,c),[l,new Dt(h)]}function s_(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var r_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,n_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,i_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Py(s){let[,t,e,r,n,i,a,f]=s;return[zp(t,n,r,e,i,a,f),Dt.utcInstance]}function o_(s){let[,t,e,r,n,i,a,f]=s;return[zp(t,f,e,r,n,i,a),Dt.utcInstance]}var a_=Bn(NC,$p),u_=Bn($C,$p),c_=Bn(zC,$p),l_=Bn(Hy),Fy=Vn(GC,$n,ra,na),h_=Vn(jC,$n,ra,na),d_=Vn(WC,$n,ra,na),f_=Vn($n,ra,na);function By(s){return Nn(s,[a_,Fy],[u_,h_],[c_,d_],[l_,f_])}function Vy(s){return Nn(s_(s),[t_,e_])}function Ny(s){return Nn(s,[r_,Py],[n_,Py],[i_,o_])}function $y(s){return Nn(s,[KC,XC])}var p_=Vn($n);function zy(s){return Nn(s,[ZC,p_])}var m_=Bn(QC,YC),g_=Bn(Ry),x_=Vn($n,ra,na);function jy(s){return Nn(s,[m_,Fy],[g_,x_])}var Wy="Invalid Duration",Yy={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},y_={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Yy},ie=146097/400,zn=146097/4800,w_={years:{quarters:4,months:12,weeks:ie/7,days:ie,hours:ie*24,minutes:ie*24*60,seconds:ie*24*60*60,milliseconds:ie*24*60*60*1e3},quarters:{months:3,weeks:ie/28,days:ie/4,hours:ie*24/4,minutes:ie*24*60/4,seconds:ie*24*60*60/4,milliseconds:ie*24*60*60*1e3/4},months:{weeks:zn/7,days:zn,hours:zn*24,minutes:zn*24*60,seconds:zn*24*60*60,milliseconds:zn*24*60*60*1e3},...Yy},vr=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],v_=vr.slice(0).reverse();function Us(s,t,e=!1){let r={values:e?t.values:{...s.values,...t.values||{}},loc:s.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||s.conversionAccuracy,matrix:t.matrix||s.matrix};return new ot(r)}function Gy(s,t){var r;let e=(r=t.milliseconds)!=null?r:0;for(let n of v_.slice(1))t[n]&&(e+=t[n]*s[n].milliseconds);return e}function Qy(s,t){let e=Gy(s,t)<0?-1:1;vr.reduceRight((r,n)=>{if(T(t[n]))return r;if(r){let i=t[r]*e,a=s[n][r],f=Math.floor(i/a);t[n]+=f*e,t[r]-=f*a*e}return n},null),vr.reduce((r,n)=>{if(T(t[n]))return r;if(r){let i=t[r]%1;t[r]-=i,t[n]+=i*s[r][n]}return n},null)}function b_(s){let t={};for(let[e,r]of Object.entries(s))r!==0&&(t[e]=r);return t}var ot=class s{constructor(t){let e=t.conversionAccuracy==="longterm"||!1,r=e?w_:y_;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||B.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,e){return s.fromObject({milliseconds:t},e)}static fromObject(t,e={}){if(t==null||typeof t!="object")throw new lt(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new s({values:Rn(t,s.normalizeUnit),loc:B.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(t){if(we(t))return s.fromMillis(t);if(s.isDuration(t))return t;if(typeof t=="object")return s.fromObject(t);throw new lt(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,e){let[r]=$y(t);return r?s.fromObject(r,e):s.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,e){let[r]=zy(t);return r?s.fromObject(r,e):s.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,e=null){if(!t)throw new lt("need to specify a reason the Duration is invalid");let r=t instanceof kt?t:new kt(t,e);if(F.throwOnInvalid)throw new el(r);return new s({invalid:r})}static normalizeUnit(t){let e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!e)throw new Un(t);return e}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,e={}){let r={...e,floor:e.round!==!1&&e.floor!==!1};return this.isValid?St.create(this.loc,r).formatDurationFromString(this,t):Wy}toHuman(t={}){if(!this.isValid)return Wy;let e=vr.map(r=>{let n=this.values[r];return T(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(e)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=An(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;let e=this.toMillis();return e<0||e>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},E.fromMillis(e,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Gy(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;let e=s.fromDurationLike(t),r={};for(let n of vr)(ks(e.values,n)||ks(this.values,n))&&(r[n]=e.get(n)+this.get(n));return Us(this,{values:r},!0)}minus(t){if(!this.isValid)return this;let e=s.fromDurationLike(t);return this.plus(e.negate())}mapUnits(t){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=Rp(t(this.values[r],r));return Us(this,{values:e},!0)}get(t){return this[s.normalizeUnit(t)]}set(t){if(!this.isValid)return this;let e={...this.values,...Rn(t,s.normalizeUnit)};return Us(this,{values:e})}reconfigure({locale:t,numberingSystem:e,conversionAccuracy:r,matrix:n}={}){let a={loc:this.loc.clone({locale:t,numberingSystem:e}),matrix:n,conversionAccuracy:r};return Us(this,a)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;let t=this.toObject();return Qy(this.matrix,t),Us(this,{values:t},!0)}rescale(){if(!this.isValid)return this;let t=b_(this.normalize().shiftToAll().toObject());return Us(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(a=>s.normalizeUnit(a));let e={},r={},n=this.toObject(),i;for(let a of vr)if(t.indexOf(a)>=0){i=a;let f=0;for(let o in r)f+=this.matrix[o][a]*r[o],r[o]=0;we(n[a])&&(f+=n[a]);let p=Math.trunc(f);e[a]=p,r[a]=(f*1e3-p*1e3)/1e3}else we(n[a])&&(r[a]=n[a]);for(let a in r)r[a]!==0&&(e[i]+=a===i?r[a]:r[a]/this.matrix[i][a]);return Qy(this.matrix,e),Us(this,{values:e},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let t={};for(let e of Object.keys(this.values))t[e]=this.values[e]===0?0:-this.values[e];return Us(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function e(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(let r of vr)if(!e(this.values[r],t.values[r]))return!1;return!0}};var jn="Invalid Interval";function M_(s,t){return!s||!s.isValid?Xe.invalid("missing or invalid start"):!t||!t.isValid?Xe.invalid("missing or invalid end"):t<s?Xe.invalid("end before start",`The end of an interval must be after its start, but you had start=${s.toISO()} and end=${t.toISO()}`):null}var Xe=class s{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,e=null){if(!t)throw new lt("need to specify a reason the Interval is invalid");let r=t instanceof kt?t:new kt(t,e);if(F.throwOnInvalid)throw new tl(r);return new s({invalid:r})}static fromDateTimes(t,e){let r=Wn(t),n=Wn(e),i=M_(r,n);return i==null?new s({start:r,end:n}):i}static after(t,e){let r=ot.fromDurationLike(e),n=Wn(t);return s.fromDateTimes(n,n.plus(r))}static before(t,e){let r=ot.fromDurationLike(e),n=Wn(t);return s.fromDateTimes(n.minus(r),n)}static fromISO(t,e){let[r,n]=(t||"").split("/",2);if(r&&n){let i,a;try{i=E.fromISO(r,e),a=i.isValid}catch(o){a=!1}let f,p;try{f=E.fromISO(n,e),p=f.isValid}catch(o){p=!1}if(a&&p)return s.fromDateTimes(i,f);if(a){let o=ot.fromISO(n,e);if(o.isValid)return s.after(i,o)}else if(p){let o=ot.fromISO(r,e);if(o.isValid)return s.before(f,o)}}return s.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",e){if(!this.isValid)return NaN;let r=this.start.startOf(t,e),n;return e!=null&&e.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(t,e),Math.floor(n.diff(r,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:e}={}){return this.isValid?s.fromDateTimes(t||this.s,e||this.e):this}splitAt(...t){if(!this.isValid)return[];let e=t.map(Wn).filter(a=>this.contains(a)).sort((a,f)=>a.toMillis()-f.toMillis()),r=[],{s:n}=this,i=0;for(;n<this.e;){let a=e[i]||this.e,f=+a>+this.e?this.e:a;r.push(s.fromDateTimes(n,f)),n=f,i+=1}return r}splitBy(t){let e=ot.fromDurationLike(t);if(!this.isValid||!e.isValid||e.as("milliseconds")===0)return[];let{s:r}=this,n=1,i,a=[];for(;r<this.e;){let f=this.start.plus(e.mapUnits(p=>p*n));i=+f>+this.e?this.e:f,a.push(s.fromDateTimes(r,i)),r=i,n+=1}return a}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;let e=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return e>=r?null:s.fromDateTimes(e,r)}union(t){if(!this.isValid)return this;let e=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return s.fromDateTimes(e,r)}static merge(t){let[e,r]=t.sort((n,i)=>n.s-i.s).reduce(([n,i],a)=>i?i.overlaps(a)||i.abutsStart(a)?[n,i.union(a)]:[n.concat([i]),a]:[n,a],[[],null]);return r&&e.push(r),e}static xor(t){let e=null,r=0,n=[],i=t.map(p=>[{time:p.s,type:"s"},{time:p.e,type:"e"}]),a=Array.prototype.concat(...i),f=a.sort((p,o)=>p.time-o.time);for(let p of f)r+=p.type==="s"?1:-1,r===1?e=p.time:(e&&+e!=+p.time&&n.push(s.fromDateTimes(e,p.time)),e=null);return s.merge(n)}difference(...t){return s.xor([this].concat(t)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:jn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Cs,e={}){return this.isValid?St.create(this.s.loc.clone(e),t).formatInterval(this):jn}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:jn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:jn}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:jn}toFormat(t,{separator:e=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${e}${this.e.toFormat(t)}`:jn}toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):ot.invalid(this.invalidReason)}mapEndpoints(t){return s.fromDateTimes(t(this.s),t(this.e))}};var Je=class{static hasDST(t=F.defaultZone){let e=E.now().setZone(t).set({month:12});return!t.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(t){return qt.isValidZone(t)}static normalizeZone(t){return ye(t,F.defaultZone)}static getStartOfWeek({locale:t=null,locObj:e=null}={}){return(e||B.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:e=null}={}){return(e||B.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:e=null}={}){return(e||B.create(t)).getWeekendDays().slice()}static months(t="long",{locale:e=null,numberingSystem:r=null,locObj:n=null,outputCalendar:i="gregory"}={}){return(n||B.create(e,r,i)).months(t)}static monthsFormat(t="long",{locale:e=null,numberingSystem:r=null,locObj:n=null,outputCalendar:i="gregory"}={}){return(n||B.create(e,r,i)).months(t,!0)}static weekdays(t="long",{locale:e=null,numberingSystem:r=null,locObj:n=null}={}){return(n||B.create(e,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:e=null,numberingSystem:r=null,locObj:n=null}={}){return(n||B.create(e,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return B.create(t).meridiems()}static eras(t="short",{locale:e=null}={}){return B.create(e,null,"gregory").eras(t)}static features(){return{relative:al(),localeWeek:ul()}}};function Zy(s,t){let e=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=e(t)-e(s);return Math.floor(ot.fromMillis(r).as("days"))}function T_(s,t,e){let r=[["years",(p,o)=>o.year-p.year],["quarters",(p,o)=>o.quarter-p.quarter+(o.year-p.year)*4],["months",(p,o)=>o.month-p.month+(o.year-p.year)*12],["weeks",(p,o)=>{let u=Zy(p,o);return(u-u%7)/7}],["days",Zy]],n={},i=s,a,f;for(let[p,o]of r)e.indexOf(p)>=0&&(a=p,n[p]=o(s,t),f=i.plus(n),f>t?(n[p]--,s=i.plus(n),s>t&&(f=s,n[p]--,s=i.plus(n))):s=f);return[s,n,f,a]}function Ky(s,t,e,r){let[n,i,a,f]=T_(s,t,e),p=t-n,o=e.filter(c=>["hours","minutes","seconds","milliseconds"].indexOf(c)>=0);o.length===0&&(a<t&&(a=n.plus({[f]:1})),a!==n&&(i[f]=(i[f]||0)+p/(a-n)));let u=ot.fromObject(i,r);return o.length>0?ot.fromMillis(p,r).shiftTo(...o).plus(u):u}var E_="missing Intl.DateTimeFormat.formatToParts support";function $(s,t=e=>e){return{regex:s,deser:([e])=>t(uy(e))}}var O_="\xA0",tw=`[ ${O_}]`,ew=new RegExp(tw,"g");function C_(s){return s.replace(/\./g,"\\.?").replace(ew,tw)}function Xy(s){return s.replace(/\./g,"").replace(ew," ").toLowerCase()}function ve(s,t){return s===null?null:{regex:RegExp(s.map(C_).join("|")),deser:([e])=>s.findIndex(r=>Xy(e)===Xy(r))+t}}function Jy(s,t){return{regex:s,deser:([,e,r])=>xr(e,r),groups:t}}function dl(s){return{regex:s,deser:([t])=>t}}function __(s){return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function I_(s,t){let e=re(t),r=re(t,"{2}"),n=re(t,"{3}"),i=re(t,"{4}"),a=re(t,"{6}"),f=re(t,"{1,2}"),p=re(t,"{1,3}"),o=re(t,"{1,6}"),u=re(t,"{1,9}"),c=re(t,"{2,4}"),l=re(t,"{4,6}"),h=y=>({regex:RegExp(__(y.val)),deser:([v])=>v,literal:!0}),w=(y=>{if(s.literal)return h(y);switch(y.val){case"G":return ve(t.eras("short"),0);case"GG":return ve(t.eras("long"),0);case"y":return $(o);case"yy":return $(c,sa);case"yyyy":return $(i);case"yyyyy":return $(l);case"yyyyyy":return $(a);case"M":return $(f);case"MM":return $(r);case"MMM":return ve(t.months("short",!0),1);case"MMMM":return ve(t.months("long",!0),1);case"L":return $(f);case"LL":return $(r);case"LLL":return ve(t.months("short",!1),1);case"LLLL":return ve(t.months("long",!1),1);case"d":return $(f);case"dd":return $(r);case"o":return $(p);case"ooo":return $(n);case"HH":return $(r);case"H":return $(f);case"hh":return $(r);case"h":return $(f);case"mm":return $(r);case"m":return $(f);case"q":return $(f);case"qq":return $(r);case"s":return $(f);case"ss":return $(r);case"S":return $(p);case"SSS":return $(n);case"u":return dl(u);case"uu":return dl(f);case"uuu":return $(e);case"a":return ve(t.meridiems(),0);case"kkkk":return $(i);case"kk":return $(c,sa);case"W":return $(f);case"WW":return $(r);case"E":case"c":return $(e);case"EEE":return ve(t.weekdays("short",!1),1);case"EEEE":return ve(t.weekdays("long",!1),1);case"ccc":return ve(t.weekdays("short",!0),1);case"cccc":return ve(t.weekdays("long",!0),1);case"Z":case"ZZ":return Jy(new RegExp(`([+-]${f.source})(?::(${r.source}))?`),2);case"ZZZ":return Jy(new RegExp(`([+-]${f.source})(${r.source})?`),2);case"z":return dl(/[a-z_+-/]{1,256}?/i);case" ":return dl(/[^\S\n\r]/);default:return h(y)}})(s)||{invalidReason:E_};return w.token=s,w}var D_={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function k_(s,t,e){let{type:r,value:n}=s;if(r==="literal"){let p=/^\s+$/.test(n);return{literal:!p,val:p?" ":n}}let i=t[r],a=r;r==="hour"&&(t.hour12!=null?a=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?a="hour12":a="hour24":a=e.hour12?"hour12":"hour24");let f=D_[a];if(typeof f=="object"&&(f=f[i]),f)return{literal:!1,val:f}}function S_(s){return[`^${s.map(e=>e.regex).reduce((e,r)=>`${e}(${r.source})`,"")}$`,s]}function U_(s,t,e){let r=s.match(t);if(r){let n={},i=1;for(let a in e)if(ks(e,a)){let f=e[a],p=f.groups?f.groups+1:1;!f.literal&&f.token&&(n[f.token.val[0]]=f.deser(r.slice(i,i+p))),i+=p}return[r,n]}else return[r,{}]}function P_(s){let t=i=>{switch(i){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},e=null,r;return T(s.z)||(e=qt.create(s.z)),T(s.Z)||(e||(e=new Dt(s.Z)),r=s.Z),T(s.q)||(s.M=(s.q-1)*3+1),T(s.h)||(s.h<12&&s.a===1?s.h+=12:s.h===12&&s.a===0&&(s.h=0)),s.G===0&&s.y&&(s.y=-s.y),T(s.u)||(s.S=ea(s.u)),[Object.keys(s).reduce((i,a)=>{let f=t(a);return f&&(i[f]=s[a]),i},{}),e,r]}var jp=null;function A_(){return jp||(jp=E.fromMillis(1555555555555)),jp}function L_(s,t){if(s.literal)return s;let e=St.macroTokenToFormatOpts(s.val),r=Yp(e,t);return r==null||r.includes(void 0)?s:r}function Wp(s,t){return Array.prototype.concat(...s.map(e=>L_(e,t)))}var ia=class{constructor(t,e){if(this.locale=t,this.format=e,this.tokens=Wp(St.parseFormat(e),t),this.units=this.tokens.map(r=>I_(r,t)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){let[r,n]=S_(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(t){if(this.isValid){let[e,r]=U_(t,this.regex,this.handlers),[n,i,a]=r?P_(r):[null,null,void 0];if(ks(r,"a")&&ks(r,"H"))throw new me("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:e,matches:r,result:n,zone:i,specificOffset:a}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function Qp(s,t,e){return new ia(s,e).explainFromTokens(t)}function sw(s,t,e){let{result:r,zone:n,specificOffset:i,invalidReason:a}=Qp(s,t,e);return[r,n,i,a]}function Yp(s,t){if(!s)return null;let r=St.create(t,s).dtFormatter(A_()),n=r.formatToParts(),i=r.resolvedOptions();return n.map(a=>k_(a,s,i))}var Gp="Invalid DateTime",rw=864e13;function oa(s){return new kt("unsupported zone",`the zone "${s.name}" is not supported`)}function Zp(s){return s.weekData===null&&(s.weekData=Xo(s.c)),s.weekData}function Kp(s){return s.localWeekData===null&&(s.localWeekData=Xo(s.c,s.loc.getMinDaysInFirstWeek(),s.loc.getStartOfWeek())),s.localWeekData}function br(s,t){let e={ts:s.ts,zone:s.zone,c:s.c,o:s.o,loc:s.loc,invalid:s.invalid};return new E({...e,...t,old:e})}function lw(s,t,e){let r=s-t*60*1e3,n=e.offset(r);if(t===n)return[r,t];r-=(n-t)*60*1e3;let i=e.offset(r);return n===i?[r,n]:[s-Math.min(n,i)*60*1e3,Math.max(n,i)]}function fl(s,t){s+=t*60*1e3;let e=new Date(s);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),millisecond:e.getUTCMilliseconds()}}function ml(s,t,e){return lw(Pn(s),t,e)}function nw(s,t){let e=s.o,r=s.c.year+Math.trunc(t.years),n=s.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,i={...s.c,year:r,month:n,day:Math.min(s.c.day,Hn(r,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},a=ot.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),f=Pn(i),[p,o]=lw(f,e,s.zone);return a!==0&&(p+=a,o=s.zone.offset(p)),{ts:p,o}}function Qn(s,t,e,r,n,i){let{setZone:a,zone:f}=e;if(s&&Object.keys(s).length!==0||t){let p=t||f,o=E.fromObject(s,{...e,zone:p,specificOffset:i});return a?o:o.setZone(f)}else return E.invalid(new kt("unparsable",`the input "${n}" can't be parsed as ${r}`))}function pl(s,t,e=!0){return s.isValid?St.create(B.create("en-US"),{allowZ:e,forceSimple:!0}).formatDateTimeFromString(s,t):null}function Xp(s,t){let e=s.c.year>9999||s.c.year<0,r="";return e&&s.c.year>=0&&(r+="+"),r+=it(s.c.year,e?6:4),t?(r+="-",r+=it(s.c.month),r+="-",r+=it(s.c.day)):(r+=it(s.c.month),r+=it(s.c.day)),r}function iw(s,t,e,r,n,i){let a=it(s.c.hour);return t?(a+=":",a+=it(s.c.minute),(s.c.millisecond!==0||s.c.second!==0||!e)&&(a+=":")):a+=it(s.c.minute),(s.c.millisecond!==0||s.c.second!==0||!e)&&(a+=it(s.c.second),(s.c.millisecond!==0||!r)&&(a+=".",a+=it(s.c.millisecond,3))),n&&(s.isOffsetFixed&&s.offset===0&&!i?a+="Z":s.o<0?(a+="-",a+=it(Math.trunc(-s.o/60)),a+=":",a+=it(Math.trunc(-s.o%60))):(a+="+",a+=it(Math.trunc(s.o/60)),a+=":",a+=it(Math.trunc(s.o%60)))),i&&(a+="["+s.zone.ianaName+"]"),a}var hw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},q_={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},H_={ordinal:1,hour:0,minute:0,second:0,millisecond:0},dw=["year","month","day","hour","minute","second","millisecond"],R_=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],F_=["year","ordinal","hour","minute","second","millisecond"];function B_(s){let t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[s.toLowerCase()];if(!t)throw new Un(s);return t}function ow(s){switch(s.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return B_(s)}}function V_(s){return xl[s]||(gl===void 0&&(gl=F.now()),xl[s]=s.offset(gl)),xl[s]}function aw(s,t){let e=ye(t.zone,F.defaultZone);if(!e.isValid)return E.invalid(oa(e));let r=B.fromObject(t),n,i;if(T(s.year))n=F.now();else{for(let p of dw)T(s[p])&&(s[p]=hw[p]);let a=Lp(s)||qp(s);if(a)return E.invalid(a);let f=V_(e);[n,i]=ml(s,f,e)}return new E({ts:n,zone:e,loc:r,o:i})}function uw(s,t,e){let r=T(e.round)?!0:e.round,n=(a,f)=>(a=An(a,r||e.calendary?0:2,!0),t.loc.clone(e).relFormatter(e).format(a,f)),i=a=>e.calendary?t.hasSame(s,a)?0:t.startOf(a).diff(s.startOf(a),a).get(a):t.diff(s,a).get(a);if(e.unit)return n(i(e.unit),e.unit);for(let a of e.units){let f=i(a);if(Math.abs(f)>=1)return n(f,a)}return n(s>t?-0:0,e.units[e.units.length-1])}function cw(s){let t={},e;return s.length>0&&typeof s[s.length-1]=="object"?(t=s[s.length-1],e=Array.from(s).slice(0,s.length-1)):e=Array.from(s),[t,e]}var gl,xl={},E=class s{constructor(t){let e=t.zone||F.defaultZone,r=t.invalid||(Number.isNaN(t.ts)?new kt("invalid input"):null)||(e.isValid?null:oa(e));this.ts=T(t.ts)?F.now():t.ts;let n=null,i=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e))[n,i]=[t.old.c,t.old.o];else{let f=we(t.o)&&!t.old?t.o:e.offset(this.ts);n=fl(this.ts,f),r=Number.isNaN(n.year)?new kt("invalid input"):null,n=r?null:n,i=r?null:f}this._zone=e,this.loc=t.loc||B.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=i,this.isLuxonDateTime=!0}static now(){return new s({})}static local(){let[t,e]=cw(arguments),[r,n,i,a,f,p,o]=e;return aw({year:r,month:n,day:i,hour:a,minute:f,second:p,millisecond:o},t)}static utc(){let[t,e]=cw(arguments),[r,n,i,a,f,p,o]=e;return t.zone=Dt.utcInstance,aw({year:r,month:n,day:i,hour:a,minute:f,second:p,millisecond:o},t)}static fromJSDate(t,e={}){let r=Oy(t)?t.valueOf():NaN;if(Number.isNaN(r))return s.invalid("invalid input");let n=ye(e.zone,F.defaultZone);return n.isValid?new s({ts:r,zone:n,loc:B.fromObject(e)}):s.invalid(oa(n))}static fromMillis(t,e={}){if(we(t))return t<-rw||t>rw?s.invalid("Timestamp out of range"):new s({ts:t,zone:ye(e.zone,F.defaultZone),loc:B.fromObject(e)});throw new lt(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,e={}){if(we(t))return new s({ts:t*1e3,zone:ye(e.zone,F.defaultZone),loc:B.fromObject(e)});throw new lt("fromSeconds requires a numerical input")}static fromObject(t,e={}){t=t||{};let r=ye(e.zone,F.defaultZone);if(!r.isValid)return s.invalid(oa(r));let n=B.fromObject(e),i=Rn(t,ow),{minDaysInFirstWeek:a,startOfWeek:f}=Ap(i,n),p=F.now(),o=T(e.specificOffset)?r.offset(p):e.specificOffset,u=!T(i.ordinal),c=!T(i.year),l=!T(i.month)||!T(i.day),h=c||l,m=i.weekYear||i.weekNumber;if((h||u)&&m)throw new me("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&u)throw new me("Can't mix ordinal dates with month/day");let w=m||i.weekday&&!h,y,v,x=fl(p,o);w?(y=R_,v=q_,x=Xo(x,a,f)):u?(y=F_,v=H_,x=hl(x)):(y=dw,v=hw);let d=!1;for(let ws of y){let Eu=i[ws];T(Eu)?d?i[ws]=v[ws]:i[ws]=x[ws]:d=!0}let M=w?My(i,a,f):u?Ty(i):Lp(i),Ot=M||qp(i);if(Ot)return s.invalid(Ot);let Ut=w?Up(i,a,f):u?Pp(i):i,[Pt,Ft]=ml(Ut,o,r),ys=new s({ts:Pt,zone:r,o:Ft,loc:n});return i.weekday&&h&&t.weekday!==ys.weekday?s.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${ys.toISO()}`):ys.isValid?ys:s.invalid(ys.invalid)}static fromISO(t,e={}){let[r,n]=By(t);return Qn(r,n,e,"ISO 8601",t)}static fromRFC2822(t,e={}){let[r,n]=Vy(t);return Qn(r,n,e,"RFC 2822",t)}static fromHTTP(t,e={}){let[r,n]=Ny(t);return Qn(r,n,e,"HTTP",e)}static fromFormat(t,e,r={}){if(T(t)||T(e))throw new lt("fromFormat requires an input string and a format");let{locale:n=null,numberingSystem:i=null}=r,a=B.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0}),[f,p,o,u]=sw(a,t,e);return u?s.invalid(u):Qn(f,p,r,`format ${e}`,t,o)}static fromString(t,e,r={}){return s.fromFormat(t,e,r)}static fromSQL(t,e={}){let[r,n]=jy(t);return Qn(r,n,e,"SQL",t)}static invalid(t,e=null){if(!t)throw new lt("need to specify a reason the DateTime is invalid");let r=t instanceof kt?t:new kt(t,e);if(F.throwOnInvalid)throw new Jc(r);return new s({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,e={}){let r=Yp(t,B.fromObject(e));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(t,e={}){return Wp(St.parseFormat(t),B.fromObject(e)).map(n=>n.val).join("")}static resetCache(){gl=void 0,xl={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Zp(this).weekYear:NaN}get weekNumber(){return this.isValid?Zp(this).weekNumber:NaN}get weekday(){return this.isValid?Zp(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Kp(this).weekday:NaN}get localWeekNumber(){return this.isValid?Kp(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Kp(this).weekYear:NaN}get ordinal(){return this.isValid?hl(this.c).ordinal:NaN}get monthShort(){return this.isValid?Je.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Je.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Je.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Je.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let t=864e5,e=6e4,r=Pn(this.c),n=this.zone.offset(r-t),i=this.zone.offset(r+t),a=this.zone.offset(r-n*e),f=this.zone.offset(r-i*e);if(a===f)return[this];let p=r-a*e,o=r-f*e,u=fl(p,a),c=fl(o,f);return u.hour===c.hour&&u.minute===c.minute&&u.second===c.second&&u.millisecond===c.millisecond?[br(this,{ts:p}),br(this,{ts:o})]:[this]}get isInLeapYear(){return wr(this.year)}get daysInMonth(){return Hn(this.year,this.month)}get daysInYear(){return this.isValid?Ds(this.year):NaN}get weeksInWeekYear(){return this.isValid?yr(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?yr(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){let{locale:e,numberingSystem:r,calendar:n}=St.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e,numberingSystem:r,outputCalendar:n}}toUTC(t=0,e={}){return this.setZone(Dt.instance(t),e)}toLocal(){return this.setZone(F.defaultZone)}setZone(t,{keepLocalTime:e=!1,keepCalendarTime:r=!1}={}){if(t=ye(t,F.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(e||r){let i=t.offset(this.ts),a=this.toObject();[n]=ml(a,i,t)}return br(this,{ts:n,zone:t})}else return s.invalid(oa(t))}reconfigure({locale:t,numberingSystem:e,outputCalendar:r}={}){let n=this.loc.clone({locale:t,numberingSystem:e,outputCalendar:r});return br(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;let e=Rn(t,ow),{minDaysInFirstWeek:r,startOfWeek:n}=Ap(e,this.loc),i=!T(e.weekYear)||!T(e.weekNumber)||!T(e.weekday),a=!T(e.ordinal),f=!T(e.year),p=!T(e.month)||!T(e.day),o=f||p,u=e.weekYear||e.weekNumber;if((o||a)&&u)throw new me("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&a)throw new me("Can't mix ordinal dates with month/day");let c;i?c=Up({...Xo(this.c,r,n),...e},r,n):T(e.ordinal)?(c={...this.toObject(),...e},T(e.day)&&(c.day=Math.min(Hn(c.year,c.month),c.day))):c=Pp({...hl(this.c),...e});let[l,h]=ml(c,this.o,this.zone);return br(this,{ts:l,o:h})}plus(t){if(!this.isValid)return this;let e=ot.fromDurationLike(t);return br(this,nw(this,e))}minus(t){if(!this.isValid)return this;let e=ot.fromDurationLike(t).negate();return br(this,nw(this,e))}startOf(t,{useLocaleWeeks:e=!1}={}){if(!this.isValid)return this;let r={},n=ot.normalizeUnit(t);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break;case"milliseconds":break}if(n==="weeks")if(e){let i=this.loc.getStartOfWeek(),{weekday:a}=this;a<i&&(r.weekNumber=this.weekNumber-1),r.weekday=i}else r.weekday=1;if(n==="quarters"){let i=Math.ceil(this.month/3);r.month=(i-1)*3+1}return this.set(r)}endOf(t,e){return this.isValid?this.plus({[t]:1}).startOf(t,e).minus(1):this}toFormat(t,e={}){return this.isValid?St.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):Gp}toLocaleString(t=Cs,e={}){return this.isValid?St.create(this.loc.clone(e),t).formatDateTime(this):Gp}toLocaleParts(t={}){return this.isValid?St.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:e=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:i=!1}={}){if(!this.isValid)return null;let a=t==="extended",f=Xp(this,a);return f+="T",f+=iw(this,a,e,r,n,i),f}toISODate({format:t="extended"}={}){return this.isValid?Xp(this,t==="extended"):null}toISOWeekDate(){return pl(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:e=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:i=!1,format:a="extended"}={}){return this.isValid?(n?"T":"")+iw(this,a==="extended",e,t,r,i):null}toRFC2822(){return pl(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return pl(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Xp(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:e=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(e||t)&&(r&&(n+=" "),e?n+="z":t&&(n+="ZZ")),pl(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Gp}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};let e={...this.c};return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,e="milliseconds",r={}){if(!this.isValid||!t.isValid)return ot.invalid("created by diffing an invalid DateTime");let n={locale:this.locale,numberingSystem:this.numberingSystem,...r},i=Cy(e).map(ot.normalizeUnit),a=t.valueOf()>this.valueOf(),f=a?this:t,p=a?t:this,o=Ky(f,p,i,n);return a?o.negate():o}diffNow(t="milliseconds",e={}){return this.diff(s.now(),t,e)}until(t){return this.isValid?Xe.fromDateTimes(this,t):this}hasSame(t,e,r){if(!this.isValid)return!1;let n=t.valueOf(),i=this.setZone(t.zone,{keepLocalTime:!0});return i.startOf(e,r)<=n&&n<=i.endOf(e,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;let e=t.base||s.fromObject({},{zone:this.zone}),r=t.padding?this<e?-t.padding:t.padding:0,n=["years","months","days","hours","minutes","seconds"],i=t.unit;return Array.isArray(t.unit)&&(n=t.unit,i=void 0),uw(e,this.plus(r),{...t,numeric:"always",units:n,unit:i})}toRelativeCalendar(t={}){return this.isValid?uw(t.base||s.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(s.isDateTime))throw new lt("min requires all arguments be DateTimes");return Hp(t,e=>e.valueOf(),Math.min)}static max(...t){if(!t.every(s.isDateTime))throw new lt("max requires all arguments be DateTimes");return Hp(t,e=>e.valueOf(),Math.max)}static fromFormatExplain(t,e,r={}){let{locale:n=null,numberingSystem:i=null}=r,a=B.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return Qp(a,t,e)}static fromStringExplain(t,e,r={}){return s.fromFormatExplain(t,e,r)}static buildFormatParser(t,e={}){let{locale:r=null,numberingSystem:n=null}=e,i=B.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new ia(i,t)}static fromFormatParser(t,e,r={}){if(T(t)||T(e))throw new lt("fromFormatParser requires an input string and a format parser");let{locale:n=null,numberingSystem:i=null}=r,a=B.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});if(!a.equals(e.locale))throw new lt(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${e.locale}`);let{result:f,zone:p,specificOffset:o,invalidReason:u}=e.explainFromTokens(t);return u?s.invalid(u):Qn(f,p,r,`format ${e.format}`,t,o)}static get DATE_SHORT(){return Cs}static get DATE_MED(){return So}static get DATE_MED_WITH_WEEKDAY(){return mp}static get DATE_FULL(){return Uo}static get DATE_HUGE(){return Po}static get TIME_SIMPLE(){return Ao}static get TIME_WITH_SECONDS(){return Lo}static get TIME_WITH_SHORT_OFFSET(){return qo}static get TIME_WITH_LONG_OFFSET(){return Ho}static get TIME_24_SIMPLE(){return Ro}static get TIME_24_WITH_SECONDS(){return Fo}static get TIME_24_WITH_SHORT_OFFSET(){return Bo}static get TIME_24_WITH_LONG_OFFSET(){return Vo}static get DATETIME_SHORT(){return No}static get DATETIME_SHORT_WITH_SECONDS(){return $o}static get DATETIME_MED(){return zo}static get DATETIME_MED_WITH_SECONDS(){return jo}static get DATETIME_MED_WITH_WEEKDAY(){return gp}static get DATETIME_FULL(){return Wo}static get DATETIME_FULL_WITH_SECONDS(){return Qo}static get DATETIME_HUGE(){return Yo}static get DATETIME_HUGE_WITH_SECONDS(){return Go}};function Wn(s){if(E.isDateTime(s))return s;if(s&&s.valueOf&&we(s.valueOf()))return E.fromJSDate(s);if(s&&typeof s=="object")return E.fromObject(s);throw new lt(`Unknown datetime argument: ${s}, of type ${typeof s}`)}var oe=class oe extends N.Base{constructor(){super(...arguments),this.fields=["id","group","key","value"]}static getDefaultTimezone(){return this.defaultTimezone}static setDefaultTimezone(t){this.defaultTimezone=t}static detectTimezone(){return typeof Intl<"u"&&Intl.DateTimeFormat&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}isClosed(){return this.getValue().toLowerCase().includes("closed")}getOpeningTime(t=""){if(this.isClosed())return null;let e=this.getValue().split("\u2013");return e.length<2?null:this.parseTime(e[0],t)}getClosingTime(t=""){if(this.isClosed())return null;let e=this.getValue().split("\u2013");if(e.length<2)return null;let r=this.parseTime(e[1],t);return r?this.isAMTime(e[1])?r.plus({days:1}):r:null}isOpen(t="",e=E.now()){if(this.isClosed())return!1;let r=this.getOpeningTime(t),n=this.getClosingTime(t);return!r||!n?!1:e<r&&e<n||e>r&&e<n}opensSoon(t=30,e,r=E.now()){if(this.isClosed())return!1;let n=e||oe.defaultTimezone,i=this.getOpeningTime(n);return i?i>=r&&i.diff(r,"minutes").minutes<=t:!1}closesSoon(t=30,e,r=E.now()){if(this.isClosed())return!1;let n=e||oe.defaultTimezone,i=this.getClosingTime(n);return i?i>r&&i.diff(r,"minutes").minutes<=t:!1}opensLaterToday(t,e=E.now()){if(this.isClosed())return!1;let r=t||oe.defaultTimezone,n=this.getOpeningTime(r);return n?e<n&&n.startOf("day").equals(e.startOf("day")):!1}closesLaterToday(t,e=E.now()){if(this.isClosed())return!1;let r=t||oe.defaultTimezone,n=this.getClosingTime(r),i=this.getOpeningTime(r);return!n||!i?!1:(n<i?n.plus({days:1}):n).startOf("day").equals(e.startOf("day"))}getTotalOpenDuration(t){if(this.isClosed())return null;let e=t||oe.defaultTimezone,r=this.getOpeningTime(e),n=this.getClosingTime(e);return!r||!n?null:n.diff(r)}hasLateNightHours(t){let e=this.getValue().split("\u2013");return e.length<2?!1:this.isAMTime(e[1])}formatHours(t="h:mm a",e){if(this.isClosed())return"Closed";let r=e||oe.defaultTimezone,n=this.getOpeningTime(r),i=this.getClosingTime(r);return!n||!i?"Hours unavailable":`${n.toFormat(t)} \u2013 ${i.toFormat(t)}`}parseTime(t,e){e||(e=oe.defaultTimezone);let r=t.replace(//g,"").trim();r=r.replace(/([AP]M)$/i," $1");let n=E.fromFormat(r,"h:mm a",{zone:e});return n.isValid?n:null}isAMTime(t){return t.trim().toUpperCase().includes("AM")}getOperatingDay(t,e=E.now()){if(this.isClosed())return null;let r=t||oe.defaultTimezone,n=this.getOpeningTime(r),i=this.getClosingTime(r);return!n||!i?null:e.hour<6&&this.hasLateNightHours()||n.hasSame(e,"day")?"today":"tomorrow"}};oe.defaultTimezone=oe.detectTimezone();var aa=oe;var ua=class extends tt.Base{constructor(){super(...arguments),this.endpoint="venues",this.model=new gr}async beforeFetch(){let t=this.getQueryParams(),e=t.lat||t.latitude,r=t.lon||t.longitude;if(e&&r){let n=Se.Geolocation.simplifyCoordinates(e,r,100);this.unsetQueryParam("lat"),this.unsetQueryParam("lon"),this.setQueryParams(n),this.once("parse:after",()=>this.sort({key:"distance"}))}}};var _o=class extends tt.Base{constructor(){super(...arguments),this.model=new ko}};var ca=class ca extends tt.Base{constructor(){super(...arguments),this.model=new aa}static getDefaultTimezone(){return this.defaultTimezone}static setDefaultTimezone(t){this.defaultTimezone=t}static detectTimezone(){return typeof Intl<"u"&&Intl.DateTimeFormat&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}getHoursForDay(t){return this.models.find(e=>e.getKey().toLowerCase()===t.toLowerCase())||null}getTodayHours(t=""){let e=new Date().toLocaleString("en-US",{timeZone:t||ca.defaultTimezone,weekday:"long"}).toLowerCase();return this.getHoursForDay(e)}hasHours(){return this.models.length>0}isOpenNow(t="",e=E.now()){if(this.hasHours()===!1)return!0;let r=this.getTodayHours(t);return r?r.isOpen(t,e):!1}isOpenToday(t=""){if(this.hasHours()===!1)return!0;let e=this.getTodayHours(t);return e?!e.isClosed():!1}getNextOpening(t=""){let e=[...this.models].sort((n,i)=>n.getKey().toLowerCase().localeCompare(i.getKey().toLowerCase())),r=e.findIndex(n=>{var i;return n.getKey().toLowerCase()===((i=this.getTodayHours(t))==null?void 0:i.getKey().toLowerCase())});if(r===-1)return null;for(let n=0;n<e.length;n++){let i=(r+n)%e.length,a=e[i];if(!a.isClosed()&&n>0){let f=a.getOpeningTime(t);return f?{day:a.getKey(),time:f}:null}}return null}getOpenDays(){return this.models.filter(t=>!t.isClosed()).map(t=>t.getKey())}hoursUntilClose(){let t=this.getTodayHours();if(!t)return 0;let e=t.getClosingTime();if(!e)return 0;let r=E.now(),n=e.diff(r,"hours").as("hours");return n>0?n:0}};ca.defaultTimezone=ca.detectTimezone();var Io=ca;var tm={};g(tm,{VenueType:()=>Jp});var Jp;(function(s){s.Bar="bar",s.Hall="hall",s.Hotel="hotel"})(Jp||(Jp={}));var em={};g(em,{Venue:()=>yl});var yl={};g(yl,{collection:()=>$_,model:()=>N_});function N_(s={}){return new gr(void 0,Object.assign({baseUrl:C.API_URL_V3},s))}function $_(s={}){return new ua(Object.assign({baseUrl:C.API_URL_V3},s))}var Mr=class extends N.Media{constructor(){super(...arguments),this.endpoint="media"}get user(){return this.hasOne("user",N.User)}get venue(){return this.hasOne("venue",ts.Venue)}};var es=class extends tt.Media{constructor(){super(...arguments),this.endpoint="media",this.model=new Mr}exterior(){return this.type(Qe.MediaType.Exterior)}interior(){return this.type(Qe.MediaType.Interior)}person(){return this.type(Qe.MediaType.Person)}random(){let t=~~(Math.random()*100);return this.setQueryParam("seed",t.toString()),this}table(){return this.type(Qe.MediaType.Table)}type(t){return this.setQueryParam("subgroup",t),this}};var ha=class extends es{constructor(){super(...arguments),this.endpoint="media/users"}include(){return this.setQueryParam("include","user"),this}};var da=class extends es{constructor(){super(...arguments),this.endpoint="media/venues"}include(){return this.setQueryParam("include","venue"),this}};var Yn={};g(Yn,{Media:()=>wl,UserMedia:()=>vl,VenueMedia:()=>bl});var wl={};g(wl,{collection:()=>j_,model:()=>fa,user:()=>sm,venue:()=>rm});function fa(s={}){return new Mr(void 0,Object.assign({baseUrl:C.API_URL_V3},s))}function j_(s={}){return new es(Object.assign({baseUrl:C.API_URL_V3},s))}function sm(s={}){return new ha(Object.assign({baseUrl:C.API_URL_V3},s))}function rm(s={}){return new da(Object.assign({baseUrl:C.API_URL_V3},s))}var vl={};g(vl,{collection:()=>sm,model:()=>fa});var bl={};g(bl,{collection:()=>rm,model:()=>fa});var Pm={};g(Pm,{Collection:()=>Ar,Core:()=>Wl,Factory:()=>si,Model:()=>Ls});var Wl={};g(Wl,{ChalkySticks:()=>pa,Collection:()=>jt,Constants:()=>S,Core:()=>jl,Enum:()=>Ml,Environment:()=>be,Event:()=>xt,Exception:()=>Ia,Factory:()=>kl,Input:()=>Al,Model:()=>et,Provider:()=>Kn,Request:()=>Iw.Request,Utility:()=>Ps,Version:()=>$2});var S={API_URL:"https://api.chalkysticks.com/v3",API_URL_DEV_V1:"http://localhost:8000/v1",API_URL_DEV_V2:"http://localhost:8000/v2",API_URL_V1:"https://api.chalkysticks.com/v1",API_URL_V2:"https://api.chalkysticks.com/v2",API_URL_V3:"https://api.chalkysticks.com/v3",CURRENT_DATE:"",DEFAULT_COLLECTION_LIMIT:20,NOTIFICATION_PREFERENCE:"native",STATIC_URL:"https://static.chalkysticks.com",WALLET_COLLECTION_TIME:60*60*6};var pa=class{static configure(t={}){let e;Object.assign(S,t.constants)}};var jt={};g(jt,{Advertisement:()=>Ma,Base:()=>yt,Content:()=>Ta,ContentTag:()=>xa,Media:()=>ba,Meta:()=>Xn,Rulebook:()=>Ea,Statistic:()=>Oa,User:()=>Ca,Wallet:()=>_a});var et={};g(et,{Advertisement:()=>Er,Base:()=>at,Content:()=>Or,ContentTag:()=>ya,Geocode:()=>wa,Media:()=>Cr,Meta:()=>va,Rulebook:()=>_r,Statistic:()=>Ir,User:()=>rs,Wallet:()=>ns});var xt={};g(xt,{Bus:()=>q,Dispatcher:()=>Gn,DispatcherEvent:()=>ma});var ma=class{constructor(t,e){this.callbacks=[],this.eventName=t,e&&(this.envelope=e)}clearCallbacks(){this.callbacks=[]}registerCallback(t){this.callbacks.push(t)}unregisterCallback(t){let e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}fire(t){this.callbacks.slice(0).forEach(r=>{r(Object.assign({},this.envelope,t))})}};var Gn=class{constructor(){this.events={}}dispatch(t,e){let r=this.events[t];r&&r.fire({data:e,event:{name:t,time:Date.now()},target:this})}on(t,e){let r=this.events[t];r||(r=new ma(t),this.events[t]=r),r.registerCallback(e)}once(t,e){let r=n=>{e(n),this.off(t,r)};this.on(t,r)}off(t,e){let r=this.events[t];r&&!e?(r.clearCallbacks(),delete this.events[t]):r&&e&&r.callbacks.indexOf(e)>-1&&(r.unregisterCallback(e),r.callbacks.length===0&&delete this.events[t])}$emit(t,e={}){return this.dispatch(t,e)}trigger(t,e={}){return this.dispatch(t,e)}$on(t,e){return this.on(t,e)}$off(t,e){return this.off(t,e)}},q=new Gn;var Kn={};g(Kn,{Store:()=>Zn});var nm=class{get(){return this.instance||this.register({actions:{},commit:(t,e)=>{},dispatch:(t,e)=>{},getters:{},mutations:{},state:{}}),this.instance}register(t){this.instance=t}},Zn=new nm;var im=class{constructor(){this.id=Math.random().toString(36).substr(2,9)}get app(){return ss.getVariable("app",{apiUrl:"",limit:32,localUrl:""})}get debug(){return ss.getVariable("debug",!1)}get env(){return ss.getVariable("env","development")}get google(){return ss.getVariable("google",{analytics:{id:""},api_key:""})}isLocal(){return ss.env==="local"||ss.env==="development"}isProduction(){return ss.env==="production"}isStaging(){return ss.env==="staging"}getVariable(t,e){let r=typeof window=="object"&&window.env?window.env:{},n=typeof window=="object"&&window.chalky?window.chalky:{};return{...r,...n}[t]||e}},ss=new im,be=ss;var fw=z(Et(),1),at=class extends fw.Model{constructor(t={},e={}){var r;if(super(t,e),this.baseUrl=be.app.apiUrl,this.baseUrl=e.baseUrl||this.baseUrl||be.app.apiUrl||S.API_URL,this.setOptions({withCredentials:!1}),e.token)this.setToken(e.token);else{let n=Zn.get(),i=((r=n==null?void 0:n.state)==null?void 0:r.token)||(n==null?void 0:n.getters["authentication/token"]);i&&this.setToken(i)}this.attachEvents()}attachEvents(){this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),q.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),q.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={model:this};e===401?(this.dispatch("request:unauthorized",r),q.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),q.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),q.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),q.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),q.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),q.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),q.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}getBaseUrl(){return be.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var Er=class extends at{constructor(){super(...arguments),this.endpoint="ads",this.fields=["caption","company","image","url"]}getCaption(){return this.attr("caption")}getCompany(){return this.attr("company")}getImage(){return this.attr("image")}getUrl(){return this.attr("url")}};var ga={};g(ga,{isYouTube:()=>om,parseId:()=>am,thumbnailUrl:()=>Q_,toEmbedUrl:()=>um});function om(s){return s.match(/(?:youtube\.com|youtu\.be)/)!==null}function am(s){let t=s.match(/(?:\?v=|\/embed\/|\/\d+\/|\.be\/)([a-zA-Z0-9_-]+)/);return t?t[1]:""}function Q_(s){return`https://img.youtube.com/vi/${am(s)}/hqdefault.jpg`}function um(s){return`https://www.youtube.com/embed/${am(s)}`}var Or=class extends at{constructor(){super(...arguments),this.endpoint="content",this.fields=["title","media_type","media_url","thumbnail_url","content","created_at","updated_at"]}get tags(){return this.hasMany("tags",xa)}getContent(){return this.attr("content")}getMediaType(){return this.attr("media_type")}getMediaUrl(){return this.attr("media_url")}getThumbnailUrl(){return this.attr("thumbnail_url")}getTitle(){return this.attr("title")}getYouTubeEmbed(){return om(this.getMediaUrl())?um(this.getMediaUrl()):""}hasContent(){return!!this.getContent()}isImage(){return this.getMediaType()==="image"}isVideo(){return this.getMediaType()==="video"}};var ya=class extends at{constructor(){super(...arguments),this.fields=["content_id","tag"]}getTag(){return this.attr("tag")}};var wa=class s extends at{constructor(){super(...arguments),this.endpoint="data/geocode",this.fields=["status","results"]}static async search(t){let e=new s;return await e.fetch({},{address:t}),e}getCityAndState(){var n,i;let t=this.getAddressComponents(),e=((n=t.find(a=>a.types.includes("locality")))==null?void 0:n.long_name)||"",r=((i=t.find(a=>a.types.includes("administrative_area_level_1")))==null?void 0:i.short_name)||"";return`${e}, ${r}`}getCountry(){var e;return((e=this.getAddressComponents().find(r=>r.types.includes("country")))==null?void 0:e.long_name)||""}getFullAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.long_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.long_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.long_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.long_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.long_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.long_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getLocation(){let t=0,e=0;if(this.hasResults()){let n=this.getResults()[0].geometry.location;t=n.lat,e=n.lng}return{latitude:t,longitude:e}}getResults(){return this.attr("results")}getShortAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.short_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.short_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.short_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.short_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.short_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.short_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getStatus(){return this.attributes.status||""}hasResults(){let t=this.getResults();return t&&t[0]&&t[0].geometry}isOK(){return this.getStatus()==="OK"}getAddressComponents(){return this.getResults()[0].address_components}};var Cr=class extends at{constructor(){super(...arguments),this.endpoint="media",this.fields=["id","type","url","group","subgroup","created_at","updated_at"],this.proxyUrl="https://d2k0n0ggvekdpx.cloudfront.net"}getGroup(){return this.attr("group")}getSubgroup(){return this.attr("subgroup")}getProxiedUrl(t={width:1024}){let e=this.getUrl(),r=["unsafe"],n=[];if(!e)return e;if(n.push("format(webp)"),t.width||t.height){let i=`${t.width||""}x${t.height||""}`;t.fitIn&&r.push("fit-in"),r.push(i)}if(t.smart&&r.push("smart"),t.filters){if(t.filters.quality&&n.push(`quality(${t.filters.quality})`),t.filters.blur&&n.push(`blur(${t.filters.blur})`),t.filters.brightness&&n.push(`brightness(${t.filters.brightness})`),t.filters.contrast&&n.push(`contrast(${t.filters.contrast})`),t.filters.grayscale&&n.push("grayscale()"),t.filters.watermark){let i=t.filters.watermark;n.push(`watermark(${i.image},${i.x},${i.y},${i.transparency||0})`)}n.length>0&&r.push(`filters:${n.join(":")}`)}return`${this.proxyUrl}/${r.join("/")}/${this.getUrl()}`}getType(){return this.attr("type")}getUrl(){return this.attr("url")}getUrlSmall(){return this.getProxiedUrl({width:256})}getUrlMedium(){return this.getProxiedUrl({width:512})}getUrlLarge(){return this.getProxiedUrl({width:1024})}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var va=class extends at{constructor(){super(...arguments),this.fields=["id","group","key","value","created_at","updated_at"]}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var _r=class extends at{constructor(){super(...arguments),this.endpoint="rulebooks",this.fields=["content"]}getContent(){return this.attr("content")}};var Ir=class extends at{constructor(){super(...arguments),this.endpoint="statistics",this.fields=["beacon_count","city_count","venue_count","user_count","video_duration_as_minutes","video_duration_as_hours"]}getBeaconCount(){return this.attr("beacon_count")}getCityCount(){return this.attr("city_count")}getVenueCount(){return this.attr("venue_count")}getUserCount(){return this.attr("user_count")}getVideoDurationAsMinutes(){return this.attr("video_duration_as_minutes")}getVideoDurationAsHours(){return this.attr("video_duration_as_hours")}};var rs=class extends at{constructor(){super(...arguments),this.endpoint="users",this.fields=["id","lat","lon","name","phone","slug","status","wallet_balance","created_at","updated_at"]}get avatar(){return this.media.primary||new Cr}get games(){return this.hasMany("games",Xn)}get lastCollection(){return this.hasOne("last_collection",ns)}get media(){let t=this.hasMany("media",ba);return t.useModifiedEndpoint(this),t}get metadata(){return this.hasMany("meta",Xn)}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getName(){return this.attr("name")}getPermissions(){return parseFloat(this.attr("permissions"))}getPhone(){return this.attr("phone")}getSlug(){return this.attr("slug")}getStatus(){return parseFloat(this.attr("status"))}getWalletBalance(){return parseFloat(this.attr("wallet_balance"))}};var ns=class extends at{constructor(){super(...arguments),this.endpoint="wallet",this.fields=["id","user_id","challenger_id","transaction","source","source_id","created_at","updated_at"]}async collect(t){return this.setHeader("Authorization-API",`Bearer ${t}`),this.setHeader("Content-Type","application/json"),this.id="",this.endpoint="wallet/collect",await this.save(),this}get challenger(){return this.hasOne("challenger",rs)}canCollect(){let t=S.WALLET_COLLECTION_TIME,e=new Date,r=new Date(this.getUpdatedAt());return e.getTime()-r.getTime()>=t}getSource(){return this.attr("source")}getTransaction(){return this.attr("transaction")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var pw=z(Et(),1),yt=class extends pw.Collection{constructor(t={}){var e;if(super(t),this.baseUrl=be.app.apiUrl,this.limit=be.app.limit,this.baseUrl=t.baseUrl||this.baseUrl||be.app.apiUrl||S.API_URL,this.setOptions({withCredentials:!1}),this.limit=t.limit||this.limit,this.page=t.page||this.page,this.builder.qp("limit",this.limit),this.builder.qp("page",this.page),t.token)this.setToken(t.token);else{let r=Zn.get(),n=((e=r==null?void 0:r.state)==null?void 0:e.token)||(r==null?void 0:r.getters["authentication/token"]);n&&this.setToken(n)}this.attachEvents()}attachEvents(){this.on("add:before",t=>{t.detail.model.baseUrl=this.baseUrl}),this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),q.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),q.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={collection:this};e===401?(this.dispatch("request:unauthorized",r),q.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),q.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),q.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),q.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),q.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),q.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),q.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}shouldFetch(){return this.loading?!1:this.models.length===0||this.requestTime<=0}getBaseUrl(){return be.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var Ma=class extends yt{constructor(){super(...arguments),this.model=new Er}};var Ta=class extends yt{constructor(){super(...arguments),this.model=new Or}news(){return this.tags(["news"])}pad(){return this.tags(["pad"])}tags(t=[]){return this.setQueryParam("tags",t.join(",")),this}tutorials(){return this.tags(["tutorial"])}};var xa=class extends yt{constructor(){super(...arguments),this.model=new ya}getByTag(t){return this.models.filter(e=>e.getTag()===t)}};var ba=class extends yt{constructor(){super(...arguments),this.model=new Cr}get images(){return this.models.filter(t=>t.getType()==="image")}get primary(){return this.models.at(0)}get videos(){return this.models.filter(t=>t.getType()==="video")}};var Xn=class extends yt{constructor(){super(...arguments),this.model=new va}getByKey(t){return this.models.filter(e=>e.getKey()===t)}getByGroup(t){return this.models.filter(e=>e.getGroup()===t)}getKeys(){return this.models.map(t=>t.getKey())}getValues(){return this.models.map(t=>t.getValue())}getValuesByKey(t){return this.getByKey(t).map(e=>e.getValue())}getValuesByGroup(t){return this.getByGroup(t).map(e=>e.getValue())}};var Ea=class extends yt{constructor(){super(...arguments),this.model=new _r}};var Oa=class extends yt{constructor(){super(...arguments),this.model=new Ir}};var Ca=class extends yt{constructor(){super(...arguments),this.model=new rs}};var _a=class extends yt{constructor(){super(...arguments),this.model=new ns}};var Ml={};g(Ml,{Achievement:()=>cm,ContentMediaType:()=>lm,ContentType:()=>hm,Currency:()=>dm,MediaGroup:()=>fm,MediaType:()=>pm,ProductType:()=>mm});var cm;(function(s){s.FirstPhoto="first_photo"})(cm||(cm={}));var lm;(function(s){s.Image="image",s.Video="video"})(lm||(lm={}));var hm;(function(s){s.News="news",s.Pad="pool-pad",s.Tutorial="tutorial"})(hm||(hm={}));var dm;(function(s){s.CSX="CSX",s.USD="USD"})(dm||(dm={}));var fm;(function(s){s.Default="",s.Community="community",s.Evaluated="evaluated",s.Inappropriate="inappropriate",s.Unknown="unknown"})(fm||(fm={}));var pm;(function(s){s.Exterior="exterior",s.Interior="interior",s.Person="person",s.Table="table"})(pm||(pm={}));var mm;(function(s){s.Digital="digital",s.Physical="physical"})(mm||(mm={}));var Ia={};g(Ia,{ConnectionRefused:()=>gm,Geolocation:()=>Me,InvalidInput:()=>xm,InvalidRenderer:()=>ym,InvalidStorageProvider:()=>wm,NotImplemented:()=>vm,ParserFailure:()=>bm,Unauthorized:()=>Mm});var gm=class extends Error{};var Me=class extends Error{constructor(t){super(t),this.name="GeolocationError"}};var xm=class extends Error{};var ym=class extends Error{};var wm=class extends Error{};var vm=class extends Error{};var bm=class extends Error{};var Mm=class extends Error{};var kl={};g(kl,{Advertisement:()=>Tl,Content:()=>El,Geocode:()=>Ol,Rulebook:()=>Cl,Statistic:()=>_l,User:()=>Il,Wallet:()=>Dl});var Tl={};g(Tl,{collection:()=>G_,model:()=>Y_});function Y_(s={}){return new Er(void 0,Object.assign({baseUrl:S.API_URL_V3},s))}function G_(s={}){return new Ma(Object.assign({baseUrl:S.API_URL_V3},s))}var El={};g(El,{collection:()=>K_,model:()=>Z_});function Z_(s={}){return new Or(void 0,Object.assign({baseUrl:S.API_URL_V3},s))}function K_(s={}){return new Ta(Object.assign({baseUrl:S.API_URL_V3},s))}var Ol={};g(Ol,{model:()=>X_});function X_(s={}){return new wa(void 0,Object.assign({baseUrl:S.API_URL_V1},s))}var Cl={};g(Cl,{collection:()=>tI,model:()=>J_});function J_(s={}){return new _r(void 0,Object.assign({baseUrl:S.API_URL_V3},s))}function tI(s={}){return new Ea(Object.assign({baseUrl:S.API_URL_V3},s))}var _l={};g(_l,{collection:()=>sI,model:()=>eI});function eI(s={}){return new Ir(void 0,Object.assign({baseUrl:S.API_URL_V3},s))}function sI(s={}){return new Oa(Object.assign({baseUrl:S.API_URL_V3},s))}var Il={};g(Il,{collection:()=>nI,model:()=>rI});function rI(s={}){return new rs(void 0,Object.assign({baseUrl:S.API_URL_V1},s))}function nI(s={}){return new Ca(Object.assign({baseUrl:S.API_URL_V1},s))}var Dl={};g(Dl,{collection:()=>oI,model:()=>iI});function iI(s={}){return new ns(void 0,Object.assign({baseUrl:S.API_URL_V1},s))}function oI(s={}){return new _a(Object.assign({baseUrl:S.API_URL_V1},s))}var Al={};g(Al,{Keyboard:()=>Ul,Pointer:()=>Tm,Sensor:()=>Pl,Shortcut:()=>Dr,ShortcutSequencer:()=>Sl,Video:()=>Em});var Dr=class extends xt.Dispatcher{static add(t,e){aI.add(t,e)}constructor(t={}){super(),this.keymap={},this.attached=!1,this.keysDown={},this.options={ignoreInputs:!0},Object.assign(this.options,t||{})}add(t,e){this.ensureSetup(),this.keymap[t]=e}remove(t){delete this.keymap[t]}ensureSetup(){this.attached||(this.attached=!0,document.addEventListener("keydown",this.Handle_OnKeyDown.bind(this)),document.addEventListener("keyup",this.Handle_OnKeyUp.bind(this)))}findMatch(){let t=Object.keys(this.keymap);return t=t.sort((e,r)=>{var n,i;return(((n=r.match(/\+/g))==null?void 0:n.length)||0)-(((i=e.match(/\+/g))==null?void 0:i.length)||0)}),t.find(e=>e.replace(/\s+/g,"").toLowerCase().split("+").every(n=>this.keysDown[n.toLowerCase()]))}normalize(t){return t.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("arrow","")}Handle_OnKeyDown(t){let e=t.target;if(!(t instanceof KeyboardEvent)||this.options.ignoreInputs&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"))return;let r=this.normalize(t.key);this.keysDown[r]=!0;let n=this.findMatch()||"",i=this.keymap[n];i&&(this.trigger("shortcut:found",{match:n}),i())}Handle_OnKeyUp(t){if(!(t instanceof KeyboardEvent))return;let e=this.normalize(t.key);delete this.keysDown[e]}},Sl=class s extends xt.Dispatcher{static add(t,e){mw.add(t,e)}static remove(t){mw.remove(t)}static get instance(){return new s}constructor(){super(),this.matches=[],this.sequences={},this.shortcut=new Dr,this.shortcut.on("shortcut:found",this.Handle_OnShortcutFound.bind(this))}add(t,e){let r=t.join(",");t.forEach(n=>{this.shortcut.add(n,()=>{})}),this.sequences[r]=e}remove(t){let e=t.join(",");t.forEach(r=>{this.shortcut.remove(r)}),delete this.sequences[e]}async Handle_OnShortcutFound(t){let e=t.data.match;this.matches.push(e),this.matches=this.matches.slice(-20);let r=Object.keys(this.sequences).find(i=>{let a=i.split(","),f=this.matches.slice(-a.length);return f.length>=a.length&&f.every((p,o)=>p===a[o])});if(!r)return;let n=this.sequences[r];n&&n()}},aI=new Dr({ignoreInputs:!0}),mw=new Sl;var Ul=class extends xt.Dispatcher{constructor(){super(...arguments),this.shortcut=new Dr({ignoreInputs:!0})}},q8=new Ul;var Tm=class s extends xt.Dispatcher{static start(t="pointer",e=!1){this.instance||(this.instance=new s(t,e))}constructor(t="pointer",e=!1,r=document){super(),this.angle=0,this.changed=!1,this.distance=0,this.down=!1,this.dx=0,this.dy=0,this.friction=.95,this.inertia=0,this.lastX=0,this.lastY=0,this.moved=!1,this.rx=0,this.rx2=0,this.ry=0,this.ry2=0,this.rox=0,this.roy=0,this.rox2=0,this.roy2=0,this.ox=0,this.oy=0,this.time=Date.now(),this.timeDown=0,this.timeDownDifference=0,this.timeDifference=0,this.touches=0,this.vx=0,this.vy=0,this.x=0,this.x2=0,this.y=0,this.y2=0,this.wheel=!1,this.wheelDelta=0,this.moveThreshold=5,this.cid=Math.random().toString(36).substr(2,9),this.eventType="",this.holdTimeout=null,this.initialPinchDistance=0,this.lastPinchDistance=0,this.lastTapTime=0,this.swipeThreshold=50,this.swipeTimeThreshold=300,this.swipeVelocityThreshold=.3,this.tapCount=0,this.tapTimeout=null,this.twoFingerTapCount=0,this.vxHistory=[],this.vyHistory=[],this.Handle_OnInterval=this.Handle_OnInterval.bind(this),this.Handle_OnPointerDown=this.Handle_OnPointerDown.bind(this),this.Handle_OnPointerMove=this.Handle_OnPointerMove.bind(this),this.Handle_OnPointerUp=this.Handle_OnPointerUp.bind(this),this.Handle_OnWheel=this.Handle_OnWheel.bind(this),this.autoTouchEvents=e,this.eventType=t,this.target=r,this.attachEvents()}attachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.addEventListener("touchstart",this.Handle_OnPointerDown),this.target.addEventListener("touchmove",this.Handle_OnPointerMove),this.target.addEventListener("touchend",this.Handle_OnPointerUp)):(this.target.addEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.addEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.addEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.addEventListener("wheel",this.Handle_OnWheel,{passive:!1}),Ps.Interval.add(this.Handle_OnInterval,1e3/60,`${this.cid}-pointer-velocity`)}detachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.removeEventListener("touchstart",this.Handle_OnPointerDown),this.target.removeEventListener("touchmove",this.Handle_OnPointerMove),this.target.removeEventListener("touchend",this.Handle_OnPointerUp)):(this.target.removeEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.removeEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.removeEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.removeEventListener("wheel",this.Handle_OnWheel),Ps.Interval.remove(`${this.cid}-pointer-velocity`)}applyForMobile(t=!0,e=!0,r=!0){document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",t&&document.addEventListener("touchmove",function(n){n.preventDefault()},{passive:!1}),e&&document.addEventListener("touchend",function(n){n.preventDefault()},!1),r&&document.addEventListener("contextmenu",function(n){n.preventDefault()})}capturePinchZoom(t){document.addEventListener("wheel",e=>{t&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.Handle_OnWheel(e)},{capture:t,passive:!1}),document.body.style.touchAction="pan-x pan-y",document.body.style.userSelect="none"}configureSwipe(t){return t.distanceThreshold!==void 0&&(this.swipeThreshold=t.distanceThreshold),t.timeThreshold!==void 0&&(this.swipeTimeThreshold=t.timeThreshold),t.velocityThreshold!==void 0&&(this.swipeVelocityThreshold=t.velocityThreshold),this}resetRelative(t=0,e=0){return this.rox=this.rox2=this.rx=this.rx2=t,this.roy=this.roy2=this.ry=this.ry2=e,this}get downEvent(){let t="";switch(this.eventType){case"pointer":t="pointerdown";break;case"touch":t="touchstart";break;default:t="mousedown";break}return t}get moveEvent(){let t="";switch(this.eventType){case"pointer":t="pointermove";break;case"touch":t="touchmove";break;default:t="mousemove";break}return t}get upEvent(){let t="";switch(this.eventType){case"pointer":t="pointerup";break;case"touch":t="touchend";break;default:t="mouseup";break}return t}getDistanceBetweenTouches(t){if(t.touches.length<2)return 0;let e=t.touches[0],r=t.touches[1],n=e.pageX-r.pageX,i=e.pageY-r.pageY;return Math.sqrt(n*n+i*i)}async Handle_OnInterval(){let t=this.vx,e=this.vy;this.vx*=this.friction,this.vy*=this.friction,Math.abs(this.vx)<.025&&(this.vx=0),Math.abs(this.vy)<.025&&(this.vy=0),isFinite(this.vx)||(this.vx=0),isFinite(this.vy)||(this.vy=0),this.down||(this.x2+=this.vx*5,this.y2+=this.vy*5,this.rx2+=this.vx*5,this.ry2+=this.vy*5),this.changed=this.vx!==t||this.vy!==e}async Handle_OnPointerDown(t){let e="touches"in t&&t.touches.length===2;if(this.down=!0,this.moved=!1,this.timeDown=Date.now(),this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=this.getDistanceBetweenTouches(t),this.lastPinchDistance=this.initialPinchDistance),this.ox=this.x="touches"in t?t.touches[0].clientX:t.clientX,this.oy=this.y="touches"in t?t.touches[0].clientY:t.clientY,this.dx=0,this.dy=0,this.target!==document){let n=this.target.getBoundingClientRect();this.ox-=n.left,this.oy-=n.top,this.x-=n.left,this.y-=n.top}this.rox=this.rx,this.roy=this.ry,this.rox2=this.rx2,this.roy2=this.ry2,this.dispatch("down",{touches:this.touches,x:this.x,y:this.y});let r={x:this.x,y:this.y};e?(this.twoFingerTapCount++,this.twoFingerTapCount===1&&setTimeout(()=>{this.twoFingerTapCount===1&&!this.down?this.dispatch("twofingertap",r):this.twoFingerTapCount===2&&this.dispatch("twofingerdoubletap",r),this.twoFingerTapCount=0},300)):(this.tapCount++,this.timeDown-this.lastTapTime<300?(clearTimeout(this.tapTimeout),this.dispatch("doubletap",r),this.tapCount=0):this.tapTimeout=setTimeout(()=>{this.tapCount===1&&!this.down&&this.dispatch("tap",r),this.tapCount=0},300),this.lastTapTime=this.timeDown,this.holdTimeout=setTimeout(()=>{this.down&&this.dispatch("hold",r)},500))}async Handle_OnPointerMove(t){if(this.moved&&this.holdTimeout&&clearTimeout(this.holdTimeout),this.touches>1){let e=this.getDistanceBetweenTouches(t),r=e-this.lastPinchDistance,n=e/this.initialPinchDistance;this.dispatch("zoom",{delta:r,isTrackpad:!1,type:"pinch",scale:n}),this.lastPinchDistance=e}if(this.lastX=this.x,this.lastY=this.y,this.x="touches"in t?t.touches[0].clientX:t.clientX,this.y="touches"in t?t.touches[0].clientY:t.clientY,this.target!==document){let e=this.target.getBoundingClientRect();this.x-=e.left,this.y-=e.top}this.currentTarget=t.currentTarget,this.activeTarget=t.target,this.timeDifference=Date.now()-this.time,this.time=Date.now(),this.dispatch("move",{x:this.x,y:this.y}),this.vxHistory.push((this.x-this.lastX)/this.timeDifference),this.vyHistory.push((this.y-this.lastY)/this.timeDifference),this.vxHistory.length>5&&this.vxHistory.shift(),this.vyHistory.length>5&&this.vyHistory.shift(),this.down&&(this.dx=this.x-this.ox,this.dy=this.y-this.oy,this.rx=this.rox+this.dx,this.ry=this.roy+this.dy,this.rx2=this.rox2+this.dx,this.ry2=this.roy2+this.dy,this.angle=Math.atan2(this.dy,this.dx)*(180/Math.PI),this.distance=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.moved=Math.abs(this.distance)>this.moveThreshold,this.x2=this.x,this.y2=this.y,this.timeDownDifference=this.time-this.timeDown,this.inertia=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.vx=this.vxHistory.reduce((e,r)=>e+r)/(this.vxHistory.length||1),this.vy=this.vyHistory.reduce((e,r)=>e+r)/(this.vyHistory.length||1),this.dispatch("drag",{angle:this.angle,changed:this.changed,distance:this.distance,dx:this.dx,dy:this.dy,inertia:this.inertia,moved:this.moved,ox:this.ox,oy:this.oy,rx:this.rx,ry:this.ry,rx2:this.rx2,ry2:this.ry2,time:this.time,timeDifference:this.timeDifference,timeDown:this.timeDown,timeDownDifference:this.timeDownDifference,touches:this.touches,vx:this.vx,vy:this.vy,x:this.x,y:this.y}))}async Handle_OnPointerUp(t){let e=Date.now()-this.timeDown;if(this.down="touches"in t?t.touches.length>0:!1,this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=0,this.lastPinchDistance=0),this.dispatch("up",{touches:this.touches,x:this.x,y:this.y}),this.moved&&e<this.swipeTimeThreshold){let r=this.x-this.ox,n=this.y-this.oy,i=Math.sqrt(r*r+n*n),a=i/this.timeDifference;if(i>this.swipeThreshold&&a>this.swipeVelocityThreshold){let f=Math.abs(r)>Math.abs(n)?r>0?"right":"left":n>0?"down":"up";this.dispatch("swipe",{direction:f,distance:i,duration:this.timeDifference,velocity:a}),this.dispatch("swipe:"+f,{direction:f,distance:i,duration:this.timeDifference,velocity:a})}}(this.distance<50||!this.distance)&&this.dispatch("tap:small",{x:this.x,y:this.y,distance:this.distance}),(this.distance<20||!this.distance)&&this.dispatch("tap:xsmall",{x:this.x,y:this.y,distance:this.distance}),this.holdTimeout&&clearTimeout(this.holdTimeout),this.distance=0}async Handle_OnWheel(t){let e=~~(Math.abs(t.wheelDeltaY||1)/Math.abs(t.deltaY||1))>1,r=t.deltaY,n=r>0?"out":"in";Ps.Debounce.exec(this.cid,()=>{this.wheel=!1,this.wheelDelta=0},100,!0),r&&(this.wheel=!0),this.wheelDelta=r,this.dispatch("zoom",{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"}),this.dispatch("zoom:"+n,{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"})}};var Pl=class extends xt.Dispatcher{get hasMotion(){return"ondevicemotion"in window}get hasOrientation(){return"ondeviceorientation"in window}get hasSensors(){return this.hasOrientation&&this.hasMotion}constructor(){super(),this.Handle_OnDeviceMotion=this.Handle_OnDeviceMotion.bind(this),this.Handle_OnDeviceOrientation=this.Handle_OnDeviceOrientation.bind(this),this.attachEvents()}attachEvents(){window.addEventListener("devicemotion",this.Handle_OnDeviceMotion),window.addEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}detachEvents(){window.removeEventListener("devicemotion",this.Handle_OnDeviceMotion),window.removeEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}async Handle_OnDeviceMotion(t){let{acceleration:e,accelerationIncludingGravity:r,rotationRate:n}=t;this.dispatch("gyroscope",n),this.dispatch("accelerometer",e),this.dispatch("accelerometer:gravity",r)}async Handle_OnDeviceOrientation(t){let{absolute:e,alpha:r,beta:n,gamma:i}=t;this.dispatch("orientation",{absolute:e,alpha:r,beta:n,gamma:i})}},V8=new Pl;var Em=class extends xt.Dispatcher{static async getSources(){return(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput").map(r=>({deviceId:r.deviceId,label:r.label}))}};var Ps={};g(Ps,{Analytics:()=>Ll,Cache:()=>Da,Debounce:()=>Sm,Device:()=>ql,Easing:()=>As,EasingFunction:()=>G,Format:()=>Hl,Geolocation:()=>Vl,Hysteresis:()=>Um,Interval:()=>ei,Math:()=>Fl,Presentation:()=>Nl,Share:()=>$l,String:()=>zl,YouTube:()=>ga,documentHeight:()=>A2,getCSSVariable:()=>L2,getDate:()=>q2,getEasingMethod:()=>ka,offsetHeight:()=>R2,offsetLeft:()=>H2,offsetTop:()=>F2,offsetWidth:()=>B2,requestAnimationFrame:()=>V2,sleep:()=>N2});var Ll={};g(Ll,{embedGoogleAnalytics:()=>uI,embedMetaPixel:()=>lI,embedRedditPixel:()=>cI});function uI(s){if(window.gtag){console.warn("Analytics is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+s,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],console.log("GA:",s),window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date),gtag("config",s)}function cI(s,t={}){if(window.rdt){console.warn("Reddit pixel is already embedded");return}let e=document.createElement("script");e.async=!0,e.src="https://www.redditstatic.com/ads/pixel.js";let r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r),window.rdt=function(){window.rdt.sendEvent?window.rdt.sendEvent(...arguments):window.rdt.callQueue.push(arguments)},window.rdt.callQueue=[],console.log("RP:",s),rdt("init",s,t),rdt("track","PageVisit")}function lI(s){if(window.fbq){console.warn("Facebook pixel is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js";let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod(...arguments):window.fbq.queue.push(arguments)},window._fbq||(window._fbq=window.fbq),window.fbq.push=window.fbq,window.fbq.queue=[],window.fbq.loaded=!0,window.fbq.version="2.0",console.log("MP:",s),fbq("init",s),fbq("track","PageView")}var ql={};g(ql,{getBrowserName:()=>kr,getBrowserVersion:()=>wI,getOrientation:()=>mI,getScreenHeight:()=>yI,getScreenWidth:()=>xI,isAndroid:()=>fI,isChrome:()=>MI,isEdge:()=>bI,isFirefox:()=>TI,isIE:()=>vI,isIOS:()=>dI,isLandscape:()=>Om,isMobile:()=>hI,isOpera:()=>OI,isPortrait:()=>pI,isSafari:()=>EI,isTouchDevice:()=>gI,userAgent:()=>Jn});function Jn(){return navigator.userAgent}function hI(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(Jn())}function dI(){return/iphone|ipad|ipod/i.test(Jn())}function fI(){return/android/i.test(Jn())}function Om(){return window.orientation===90||window.orientation===-90}function pI(){return!Om()}function mI(){return Om()?"landscape":"portrait"}function gI(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function xI(){return window.screen.width}function yI(){return window.screen.height}function kr(){let s=Jn();return s.indexOf("firefox")>-1?"Firefox":s.indexOf("opera")>-1||s.indexOf("opr")>-1?"Opera":s.indexOf("chrome")>-1?"Chrome":s.indexOf("safari")>-1?"Safari":s.indexOf("msie")>-1||s.indexOf("trident")>-1?"Internet Explorer":"Unknown"}function wI(){let s=Jn(),t=s.match(/version\/(\d+)/i);return t===null&&(t=s.match(/(?:msie |rv:)(\d+)/)),t===null&&(t=s.match(/(?:chrome|safari|firefox|opera|opr|edge)\/(\d+)/i)),t===null?"Unknown":t[1]}function vI(){return kr()==="Internet Explorer"}function bI(){return kr()==="Edge"}function MI(){return kr()==="Chrome"}function TI(){return kr()==="Firefox"}function EI(){return kr()==="Safari"}function OI(){return kr()==="Opera"}var Hl={};g(Hl,{bytesToSize:()=>CI,daysBetweenDates:()=>_I,getRelativeTime:()=>Cm,secondsToTime:()=>II,timeAgo:()=>SI,timeToHuman:()=>kI,timeToSeconds:()=>DI,timeUntil:()=>UI});function CI(s){let t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s==0)return"0 Byte";let e=parseInt(Math.floor(Math.log(s)/Math.log(1024)).toString());return Math.round(s/Math.pow(1024,e))+" "+t[e]}function _I(s,t){let e=Math.abs(t.getTime()-s.getTime());return Math.ceil(e/(1e3*3600*24))}function II(s,t="00:00:00"){let e=new Date(0);switch(e.setSeconds(s),t){case"00:00:00":return e.toISOString().substr(11,8);case"00:00":return e.toISOString().substr(14,5);case"00":return e.toISOString().substr(17,2)}return e.toISOString().substr(11,8)}function DI(s){let[t,e,r]=s.split(":").map(Number);return t*3600+e*60+r}function gw(s){if(s instanceof Date)return isNaN(s.getTime())?null:s;if(typeof s=="string"){let t=new Date(s);if(!isNaN(t.getTime()))return t;let e=s.split(":").map(Number);if(e.length===3&&e.every(r=>!isNaN(r))){let r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),e[0],e[1],e[2])}}return typeof s=="number"?s<9466848e5?new Date(Date.now()+s*1e3):new Date(s):null}function kI(s,t=!1){let e;if(typeof s=="string"){let a=s.split(":").map(Number);if(a.length===3&&a.every(f=>!isNaN(f)))e=a[0]*3600+a[1]*60+a[2];else{let f=gw(s);if(!f)return"";e=Math.floor((f.getTime()-Date.now())/1e3)}}else s instanceof Date?e=Math.floor((s.getTime()-Date.now())/1e3):s>9466848e5?e=Math.floor((s-Date.now())/1e3):e=s;let r=Math.floor(Math.abs(e)/3600),n=Math.floor(Math.abs(e)%3600/60),i=Math.floor(Math.abs(e)%60);if(t){let a=[];return r>0&&a.push(`${r}h`),n>0&&a.push(`${n}m`),i>0&&a.push(`${i}s`),a.join(" ")||"0s"}return`${r}h ${n}m ${i}s`}function Cm(s,t={}){let e=gw(s);if(!e)return"";let{type:r="ago",suffix:n="",shortUnits:i=!1}=t,a=new Date,f=e<a,p=Math.abs(r==="ago"?a.getTime()-e.getTime():e.getTime()-a.getTime()),o=Math.floor(p/1e3),u={year:31536e3,month:2592e3,day:86400,hour:3600,minute:60,second:1},c={year:i?"y":"year",month:i?"mo":"month",day:i?"d":"day",hour:i?"h":"hour",minute:i?"m":"minute",second:i?"s":"second"};for(let[h,m]of Object.entries(u)){let w=o/m;if(w>=1){let y=Math.floor(w),v=c[h],x=!i&&y!==1?v+"s":v,d=`${y} ${x}`;return n?`${d} ${n}`.trim():d}}let l=i?"0s":"0 seconds";return n?`${l} ${n}`.trim():l}function SI(s,t="ago",e="ago"){return Cm(s,{suffix:"ago",type:"ago"})}function UI(s,t="until",e="left"){return Cm(s,{suffix:"left",type:"until"})}var Vl={};g(Vl,{CACHE_EXPIRATION:()=>is,cache:()=>os,clearWatch:()=>l2,config:()=>Ew,distanceBetween:()=>p2,getBearing:()=>m2,getBounds:()=>g2,getLocation:()=>u2,isPointInBounds:()=>x2,simplifyCoordinates:()=>y2,watchLocation:()=>c2});var Da=class{constructor(t=-1){this.storage={},this.ttl=t>0?t:0}all(){let t=Object.keys(this.storage),e={},r;for(let n of t)r=this.get(n),r!==void 0&&(e[n]=this.get(n));return e}delete(t){this.storage[t]&&delete this.storage[t]}get(t){let e=this.storage[t],r;return e?e.ttl===0?(r=e.value,this.delete(t)):this.isCachedItemHealthy(e)&&(r=e.value):r=void 0,r}exists(t){return this.storage[t]!==void 0}has(t){return this.get(t)!==void 0}set(t,e,r=0,n=!1){let i=this.has(t),a=Date.now();return i&&this.isImmutable(t)?!1:(this.storage[t]={immutable:n,time:a,ttl:r,value:e},!0)}isCachedItemHealthy(t){let e=Date.now(),r=t.time,n=t.ttl;return r+n>e}isImmutable(t){let e=this.storage[t];return!!(e!=null&&e.immutable)}};var Fl={};g(Fl,{EARTH_RADIUS:()=>Rl,FOOT_METER_RATIO:()=>_m,MPH_METER_RATIO:()=>Im,angle:()=>xw,angleAsDegrees:()=>PI,angleDifference:()=>yw,angleDifferenceAsDegrees:()=>AI,angleFromVector:()=>LI,angleFromVectors:()=>qI,angleNormalize:()=>HI,clamp:()=>ti,clampUnsigned:()=>ww,degreesToSlope:()=>RI,denormalize:()=>FI,distance:()=>BI,dot:()=>VI,feetToMeters:()=>NI,inverseLerp:()=>vw,lerp:()=>bw,logarithmicZoom:()=>$I,metersToFeet:()=>zI,minMax:()=>jI,minMaxUnsigned:()=>WI,mphToMs:()=>QI,msToMph:()=>YI,normalize:()=>GI,randomInt:()=>KI,randomRange:()=>Mw,randomSign:()=>XI,remap:()=>ZI,rotate:()=>Tw,rotateDeg:()=>JI,round:()=>t2,roundToDecimal:()=>r2,roundToNearest:()=>e2,roundToNearestFraction:()=>s2,slopeToDegrees:()=>n2,smootherstep:()=>o2,smoothstep:()=>i2,toDegrees:()=>Sr,toRadians:()=>Wt,transformRatio:()=>a2});var G=class{static linear(t){return t}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}static easeInCubic(t){return t*t*t}static easeOutCubic(t){return--t*t*t+1}static easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}static easeInQuart(t){return t*t*t*t}static easeOutQuart(t){return 1- --t*t*t*t}static easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}static easeInQuint(t){return t*t*t*t*t}static easeOutQuint(t){return 1+--t*t*t*t*t}static easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}static easeInSine(t){return 1-Math.cos(t*Math.PI/2)}static easeOutSine(t){return Math.sin(t*Math.PI/2)}static easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}static easeInExpo(t){return t===0?0:Math.pow(2,10*(t-1))}static easeOutExpo(t){return t===1?1:-Math.pow(2,-10*t)+1}static easeInOutExpo(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)}static easeInCirc(t){return-(Math.sqrt(1-t*t)-1)}static easeOutCirc(t){return Math.sqrt(1- --t*t)}static easeInOutCirc(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static easeInBack(t,e=1.70158){return t*t*((e+1)*t-e)}static easeOutBack(t,e=1.70158){return--t*t*((e+1)*t+e)+1}static easeInOutBack(t,e=1.70158){return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)}},As=class s{static linear(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.linear,n)}static easeInQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInQuad,n)}static easeOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeOutQuad,n)}static easeInOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInOutQuad,n)}static easeInQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInQuart,n)}static easeOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeOutQuart,n)}static easeInOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInOutQuart,n)}static easeInQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInQuint,n)}static easeOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeOutQuint,n)}static easeInOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInOutQuint,n)}static easeInCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInCubic,n)}static easeOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeOutCubic,n)}static easeInOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInOutCubic,n)}static easeInSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInSine,n)}static easeOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeOutSine,n)}static easeInOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInOutSine,n)}static easeInExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInExpo,n)}static easeOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeOutExpo,n)}static easeInOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInOutExpo,n)}static easeInCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInCirc,n)}static easeOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeOutCirc,n)}static easeInOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInOutCirc,n)}static easeInBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInBack,n)}static easeOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeOutBack,n)}static easeInOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,G.easeInOutBack,n)}static normalize(t,e=0,r=1,n,i=!0){let a=s.clamp((t-e)/(r-e),0,1);return i?n(a):e+(r-e)*n(a)}static clamp(t,e=0,r=1){return Math.min(Math.max(t,e),r)}};function ka(s){return As.hasOwnProperty(s)?As[s]:As.easeInOutQuad}var Rl=6371,_m=3.28084,Im=.44704;function xw(s,t,e,r){return Math.atan2(r-t,e-s)}function PI(s,t,e,r){return xw(s,t,e,r)*180/Math.PI}function yw(s,t){return Math.atan2(Math.sin(t-s),Math.cos(t-s))}function AI(s,t){return yw(s,t)*180/Math.PI}function LI(s){return Math.atan2(s.y,s.x)}function qI(s,t){return Math.atan2(t.y-s.y,t.x-s.x)}function HI(s){return s=s%360,s<0&&(s+=360),s}function ti(s,t,e){return Math.min(Math.max(s,t),e)}function ww(s,t,e){return[t,e]=[Math.min(t,e),Math.max(t,e)],Math.sign(s)*Math.min(Math.abs(s),Math.abs(s)>t?e:t)}function RI(s){return Math.tan(s*(Math.PI/180))}function FI(s,t,e,r=!1){let n=s*(e-t)+t;return r&&(n=ti(n,t,e)),n}function BI(s,t,e,r){return Math.sqrt((e-s)**2+(r-t)**2)}function VI(s,t,e,r){return s*e+t*r}function NI(s){return s/_m}function vw(s,t,e){return(e-s)/(t-s)}function bw(s,t,e){return s+(t-s)*e}function $I(s,t,e=.025){let r=Math.log(s),n=Math.log(t+1)||0;return Math.exp(r+n*e)}function zI(s){return s*_m}function jI(s,t,e){return ti(s,t,e)}function WI(s,t,e){return ww(s,t,e)}function QI(s){return s*Im}function YI(s){return s/Im}function GI(s,t,e,r=!1){let n=(s-t)/(e-t);return r&&(n=ti(n,t,e)),n}function ZI(s,t,e,r,n){return r+(n-r)*vw(t,e,s)}function Mw(s,t){return bw(s,t,Math.random())}function KI(s,t){return Math.floor(Mw(s,t+1))}function XI(){return Math.random()<.5?-1:1}function Tw(s,t,e){let r=Math.sin(e),n=Math.cos(e);return[s*n-t*r,s*r+t*n]}function JI(s,t,e){return Tw(s,t,e*Math.PI/180)}function t2(s,t=2){return Number(s.toFixed(t))}function e2(s,t){return Math.round(s/t)*t}function s2(s,t){return Math.round(s*t)/t}function r2(s,t){return Math.round(s*10**t)/10**t}function n2(s){return Math.atan(s)*(180/Math.PI)}function i2(s,t,e){let r=ti((e-s)/(t-s),0,1);return r*r*(3-2*r)}function o2(s,t,e){let r=ti((e-s)/(t-s),0,1);return r*r*r*(r*(r*6-15)+10)}function Wt(s){return s*Math.PI/180}function Sr(s){return s*180/Math.PI}function a2(s,t=4,e="linear",r=""){r||(r=e);let n=ka(e),i=ka(r);return s<=1/t?n(s/(1/t)):s<=1-1/t?1:i((1-s)/(1/t))}var Ew={IP_LOCATION_API:"https://ipapi.co/json/"},is=1e3*6*2,os=new Da(is);async function u2(){let s="geolocation",t=os.get(s);if(t)return t;try{return navigator!=null&&navigator.geolocation?await h2(s):await w2()?await d2(s):await f2(s)}catch(e){throw e instanceof Error?e:new Me("Unknown error occurred")}}function c2(s,t,e={enableHighAccuracy:!0}){let r="geolocation";return navigator!=null&&navigator.geolocation?navigator.geolocation.watchPosition(n=>{let i=Ur(n);os.set(r,i,is),q.dispatch("location:change",i),s==null||s(i)},async n=>{try{let i=await Bl(),a=Ur(i);os.set(r,a,is),q.dispatch("location:change",a),s==null||s(a)}catch(i){q.dispatch("location:error",n),t==null||t(n)}},e):0}function l2(s){try{if(!(navigator!=null&&navigator.geolocation))throw new Me("Geolocation is not supported by this browser.");navigator.geolocation.clearWatch(s)}catch(t){console.error("Error clearing geolocation watch:",t)}}async function h2(s){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(r=>{let n=Ur(r);os.set(s,n,is),console.info("\u{1F538} Location",n),q.dispatch("location:change",n),t(n)},async r=>{if(console.warn("Browser geolocation error:",r),r.code===r.PERMISSION_DENIED)e(new Me("Permission denied for geolocation."));else if(r.code===r.POSITION_UNAVAILABLE)e(new Me("Geolocation position unavailable."));else if(r.code===r.TIMEOUT)e(new Me("Geolocation request timed out."));else try{let n=await Bl(),i=Ur(n);os.set(s,i,is),console.info("\u{1F53A} Location",i),q.dispatch("location:change",i),t(i)}catch(n){e(new Me("Fallback IP location failed."))}})})}async function d2(s){try{let{Geolocation:t}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1)),e=await t.getCurrentPosition(),r=Ur(e);return os.set(s,r,is),console.info("\u{1F539} Location",r),q.dispatch("location:change",r),r}catch(t){try{let e=await Bl(),r=Ur(e);return os.set(s,r,is),console.info("\u{1F53A} Location",r),q.dispatch("location:change",r),r}catch(e){throw q.dispatch("location:error",t),t}}}async function f2(s){try{let t=await Bl(),e=Ur(t);return os.set(s,e,is),console.info("\u{1F53A} Location",e),q.dispatch("location:change",e),e}catch(t){throw q.dispatch("location:error",t),new Me("Failed to get IP location")}}async function Bl(){let t=await(await fetch(Ew.IP_LOCATION_API)).json();return{coords:{accuracy:5e3,altitude:null,altitudeAccuracy:null,heading:null,latitude:t.latitude,longitude:t.longitude,speed:null},timestamp:Date.now()}}function Ur(s){return{position:s,timestamp:Date.now()}}function p2(s,t,e,r){let n=Rl,i=Wt(e-s),a=Wt(r-t),f=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Wt(s))*Math.cos(Wt(e))*Math.sin(a/2)*Math.sin(a/2),p=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return n*p}function m2(s,t,e,r){let n=Wt(r-t),i=Math.sin(n)*Math.cos(Wt(e)),a=Math.cos(Wt(s))*Math.sin(Wt(e))-Math.sin(Wt(s))*Math.cos(Wt(e))*Math.cos(n);return(Sr(Math.atan2(i,a))+360)%360}function g2(s,t,e){let r=Rl,n=Wt(s),i=Wt(t),a=e/r;return{latitudeMin:Sr(n-a),latitudeMax:Sr(n+a),longitudeMin:Sr(i-a/Math.cos(n)),longitudeMax:Sr(i+a/Math.cos(n))}}function x2(s,t,e){return s>=e.latitudeMin&&s<=e.latitudeMax&&t>=e.longitudeMin&&t<=e.longitudeMax}function y2(s,t,e=1e3){var a,f;let r,n,i=e;if(typeof s=="number"&&typeof t=="number")r=s,n=t,i=e;else if(Array.isArray(s))[r,n]=s;else if(typeof s=="object")"position"in s?(r=s.position.lat,n=s.position.lng):(r=(a=s==null?void 0:s.latitude)!=null?a:(s==null?void 0:s.lat)||0,n=(f=s==null?void 0:s.longitude)!=null?f:(s==null?void 0:s.lng)||0);else throw new Error("Invalid coordinates format");if(typeof r!="number"||typeof n!="number")throw new Error("Invalid coordinates: latitude and longitude must be numbers");return{latitude:Math.round(r*i)/i,longitude:Math.round(n*i)/i}}async function w2(){try{let{Geolocation:s}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1));return!!s}catch(s){return!1}}var Nl={};g(Nl,{castToDevice:()=>M2,isFullscreenActive:()=>b2,toggleFullscreen:()=>v2});function v2(s=document.body){document.fullscreenElement?document.exitFullscreen().catch(t=>{console.error(`Error attempting to exit fullscreen mode: ${t.message}`)}):s.requestFullscreen().catch(t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message}`)})}function b2(){return!!document.fullscreenElement}async function M2(s){if(!("presentation"in navigator)){console.error("Presentation API is not supported in this browser.");return}try{new PresentationRequest([s]).start().then(e=>{console.log("Connected to presentation:",e),e.onterminate=()=>{console.log("Presentation terminated.")}},e=>{console.error("Error starting presentation:",e)})}catch(t){console.error("Error casting to device:",t)}}var $l={};g($l,{canShare:()=>Cw,hasSupport:()=>Dm,native:()=>Ow,remoteFile:()=>T2});async function Ow(s=[],t="",e="",r=""){let n={files:s,text:e,title:t,url:r};if(Dm()===!1)throw new Error("This browser does not support navigator share");if(Cw()===!1)throw new Error("Sharing is not supported, make sure you are on HTTPS");return navigator.canShare(n)?(await navigator.share(n),!0):!1}async function T2(s,t="",e="",r=""){let n=await E2(s);return Ow([n],t,e,r)}function Dm(){return"share"in navigator}function Cw(){return Dm()&&!!navigator.canShare}async function E2(s="",t="my-file.png"){s||(s="https://cdn.glitch.com/f96f78ec-d35d-447b-acf4-86f2b3658491%2Fchuck.png?v=1618311092497");let e=await fetch(s).then(i=>i.blob()),r=e.type.split(";").shift();return new File([e],t,{type:r})}var zl={};g(zl,{basicHash:()=>O2,capitalize:()=>C2,chunkSentences:()=>_2,md5:()=>I2,random:()=>D2,shuffle:()=>k2,slug:()=>S2,trimSentences:()=>P2,truncate:()=>U2});function O2(s){return s.split("").reduce((t,e)=>(t=(t<<5)-t+e.charCodeAt(0),t&t),0).toString()}function C2(s){return s.charAt(0).toUpperCase()+s.slice(1)}function _2(s,t=130){let e=s.replace(/\.$/,"").split(". "),r=[];return e.forEach(n=>{r.length===0||r[r.length-1].length>t?r.push(n+"."):(n=n.trim(),r[r.length-1]+=` ${n}.`)}),r}function I2(s){let t="0123456789abcdef",e=new TextEncoder().encode(s),r=e.length*8,n=(448-(e.length*8+1)%512+512)%512,i=e.length+Math.ceil(n/8)+8,a=new Uint8Array(i);a.set(e),a[e.length]=128;let f=new DataView(a.buffer);f.setUint32(i-8,r>>>0,!0),f.setUint32(i-4,Math.floor(r/4294967296),!0);let p=new Uint32Array(i/4);for(let x=0;x<i;x+=4)p[x/4]=f.getUint32(x,!0);let o=1732584193,u=4023233417,c=2562383102,l=271733878;function h(x,d){return x<<d|x>>>32-d}function m(x,d,M){return x&d|~x&M}function w(x,d,M){return x&M|d&~M}function y(x,d,M){return x^d^M}function v(x,d,M){return d^(x|~M)}for(let x=0;x<p.length;x+=16){let d=p.slice(x,x+16),[M,Ot,Ut,Pt]=[o,u,c,l];o=h(o+m(u,c,l)+d[0]+3614090360,7)+u,l=h(l+m(o,u,c)+d[1]+3905402710,12)+o,c=h(c+m(l,o,u)+d[2]+606105819,17)+l,u=h(u+m(c,l,o)+d[3]+3250441966,22)+c,o=h(o+m(u,c,l)+d[4]+4118548399,7)+u,l=h(l+m(o,u,c)+d[5]+1200080426,12)+o,c=h(c+m(l,o,u)+d[6]+2821735955,17)+l,u=h(u+m(c,l,o)+d[7]+4249261313,22)+c,o=h(o+m(u,c,l)+d[8]+1770035416,7)+u,l=h(l+m(o,u,c)+d[9]+2336552879,12)+o,c=h(c+m(l,o,u)+d[10]+4294925233,17)+l,u=h(u+m(c,l,o)+d[11]+2304563134,22)+c,o=h(o+m(u,c,l)+d[12]+1804603682,7)+u,l=h(l+m(o,u,c)+d[13]+4254626195,12)+o,c=h(c+m(l,o,u)+d[14]+2792965006,17)+l,u=h(u+m(c,l,o)+d[15]+1236535329,22)+c,o=h(o+w(u,c,l)+d[1]+4129170786,5)+u,l=h(l+w(o,u,c)+d[6]+3225465664,9)+o,c=h(c+w(l,o,u)+d[11]+643717713,14)+l,u=h(u+w(c,l,o)+d[0]+3921069994,20)+c,o=h(o+w(u,c,l)+d[5]+3593408605,5)+u,l=h(l+w(o,u,c)+d[10]+38016083,9)+o,c=h(c+w(l,o,u)+d[15]+3634488961,14)+l,u=h(u+w(c,l,o)+d[4]+3889429448,20)+c,o=h(o+w(u,c,l)+d[9]+568446438,5)+u,l=h(l+w(o,u,c)+d[14]+3275163606,9)+o,c=h(c+w(l,o,u)+d[3]+4107603335,14)+l,u=h(u+w(c,l,o)+d[8]+1163531501,20)+c,o=h(o+w(u,c,l)+d[13]+2850285829,5)+u,l=h(l+w(o,u,c)+d[2]+4243563512,9)+o,c=h(c+w(l,o,u)+d[7]+1735328473,14)+l,u=h(u+w(c,l,o)+d[12]+2368359562,20)+c,o=h(o+y(u,c,l)+d[5]+4294588738,4)+u,l=h(l+y(o,u,c)+d[8]+2272392833,11)+o,c=h(c+y(l,o,u)+d[11]+1839030562,16)+l,u=h(u+y(c,l,o)+d[14]+4259657740,23)+c,o=h(o+y(u,c,l)+d[1]+2763975236,4)+u,l=h(l+y(o,u,c)+d[4]+1272893353,11)+o,c=h(c+y(l,o,u)+d[7]+4139469664,16)+l,u=h(u+y(c,l,o)+d[10]+3200236656,23)+c,o=h(o+y(u,c,l)+d[13]+681279174,4)+u,l=h(l+y(o,u,c)+d[0]+3936430074,11)+o,c=h(c+y(l,o,u)+d[3]+3572445317,16)+l,u=h(u+y(c,l,o)+d[6]+76029189,23)+c,o=h(o+y(u,c,l)+d[9]+3654602809,4)+u,l=h(l+y(o,u,c)+d[12]+3873151461,11)+o,c=h(c+y(l,o,u)+d[15]+530742520,16)+l,u=h(u+y(c,l,o)+d[2]+3299628645,23)+c,o=h(o+v(u,c,l)+d[0]+4096336452,6)+u,l=h(l+v(o,u,c)+d[7]+1126891415,10)+o,c=h(c+v(l,o,u)+d[14]+2878612391,15)+l,u=h(u+v(c,l,o)+d[5]+4237533241,21)+c,o=h(o+v(u,c,l)+d[12]+1700485571,6)+u,l=h(l+v(o,u,c)+d[3]+2399980690,10)+o,c=h(c+v(l,o,u)+d[10]+4293915773,15)+l,u=h(u+v(c,l,o)+d[1]+2240044497,21)+c,o=h(o+v(u,c,l)+d[8]+1873313359,6)+u,l=h(l+v(o,u,c)+d[15]+4264355552,10)+o,c=h(c+v(l,o,u)+d[6]+2734768916,15)+l,u=h(u+v(c,l,o)+d[13]+1309151649,21)+c,o=h(o+v(u,c,l)+d[4]+4149444226,6)+u,l=h(l+v(o,u,c)+d[11]+3174756917,10)+o,c=h(c+v(l,o,u)+d[2]+718787259,15)+l,u=h(u+v(c,l,o)+d[9]+3951481745,21)+c,o=o+M>>>0,u=u+Ot>>>0,c=c+Ut>>>0,l=l+Pt>>>0}return[o,u,c,l].map(x=>("00000000"+x.toString(16)).slice(-8)).join("")}function D2(s=7){return Math.random().toString(36).substring(s)}function k2(s){let t=s.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function S2(s){return s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function U2(s,t=30){return s.length>t?s.slice(0,t).trim()+"...":s}function P2(s,t=500){let e=s.indexOf(".",t);return s.substr(0,e>0?e+1:s.length)}var km={},Sm=class s{static exec(t,e,r=1e3,n=!1,i=[]){if(!km[t]){let a=new s(e,r,!0,n);km[t]=a.run}km[t](...i)}constructor(t,e=200,r=!1,n=!1){this.inclusive=!1,this.lastTrigger=0,this.timeout=0,this.callback=t,this.inclusive=n,this.threshold=e,n||(this.lastTrigger=Date.now()),this.run=this.run.bind(this)}run(t=!1){let e=Date.now();e-this.lastTrigger>this.threshold&&(this.lastTrigger=e,this.callback.apply(null,arguments)),this.timeout!==0&&(clearTimeout(this.timeout),this.timeout=0),this.inclusive&&!t&&(this.timeout=setTimeout(()=>this.run(!0),this.threshold))}};function A2(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function L2(s,t=document.documentElement){return getComputedStyle(t).getPropertyValue(s).trim()}function q2(s=""){return s||(s=S.CURRENT_DATE),s?new Date(s):new Date}function H2(s){let t=0;do t+=s.offsetLeft,s=s.offsetParent;while(s);return t}function R2(s){return s.offsetHeight}function F2(s){let t=0;do t+=s.offsetTop,s=s.offsetParent;while(s);return t}function B2(s){return s.offsetWidth}var V2=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);function N2(s){return new Promise(t=>setTimeout(t,s))}var _w=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);var ei=class s{static get instance(){return this._instance||(this._instance=new s),this._instance}static add(t,e=16,r=""){let n,i=0,a=0,f=0;return r||(r=Math.random().toString(32).substr(2,6)),t.hasOwnProperty("callback")?(e=t.fps||e,n=t.callback,r=t.name||r,f=t.stopAfter||0):n=t,this.instance.unpause(),this.instance.intervals.push({executions:i,fps:e,func:n,lastTick:a,name:r,stopAfter:f}),r}static fps(t,e,r){return this.instance.intervals.filter(n=>{n.name===t&&(n.fps=e||n.fps,n.func=r||n.func)}),this.instance}static list(){console.log(this.instance.intervals)}static remove(t){this.instance.intervals=this.instance.intervals.filter(e=>e.name!=t)}static start(){this.instance&&this.instance.unpause()}static stop(){this.instance&&this.instance.pause()}constructor(){this.enabled=!1,this.intervals=[],this.lastFrameTime=0,this.Handle_OnRequestAnimationFrame=this.Handle_OnRequestAnimationFrame.bind(this)}pause(){this.enabled=!1}unpause(){this.enabled=!0,this.Handle_OnRequestAnimationFrame()}async Handle_OnRequestAnimationFrame(){if(!this.enabled)return;let t=Date.now();this.intervals.forEach(e=>{if(t-(e.lastTick||0)>e.fps){if(e.stopAfter&&e.executions>=e.stopAfter){s.remove(e.name);return}e.func({}),e.lastTick=t,e.executions++}}),this.lastFrameTime=Date.now(),_w(this.Handle_OnRequestAnimationFrame)}};var Um=class s extends xt.Dispatcher{static add(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),e}static wait(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),new Promise(r=>{e.once("change",n=>{e.stop(),r(n)})})}constructor(t,e=20,r=2e3){super(),this.conditionMetCount=0,this.isVariableSet=!1,this.intervalName="",this.condition=t,this.threshold=e,this.duration=r}reset(){this.conditionMetCount=0}start(){this.intervalName=ei.add(()=>this.checkCondition(),this.duration/this.threshold)}stop(){ei.remove(this.intervalName)}checkCondition(){this.condition()?(this.conditionMetCount=Math.min(this.threshold,this.conditionMetCount+1),this.conditionMetCount>=this.threshold&&!this.isVariableSet&&(this.isVariableSet=!0,this.dispatch("set"),this.dispatch("change",{set:this.isVariableSet}))):(this.conditionMetCount=Math.max(0,this.conditionMetCount-1),this.conditionMetCount<=0&&this.isVariableSet&&(this.isVariableSet=!1,this.dispatch("unset"),this.dispatch("change",{set:this.isVariableSet})))}};var jl=class extends Gn{};var Iw=z(Et(),1),$2="1.31.9";var Ar={};g(Ar,{Diagram:()=>Sa});var Ls={};g(Ls,{Diagram:()=>Pr});var Pr=class extends et.Base{constructor(){super(...arguments),this.endpoint="diagrams",this.fields=["id","hash","diagram","layout","table_type","ball_type","ball_count","is_complete","version","created_at","updated_at"],this.imageUrl="https://pad.chalkysticks.com/image/"}getBallCount(){return parseFloat(this.attr("ball_count"))}getBallType(){return this.attr("ball_type")}getCreatedAt(){return this.attr("created_at")}getDiagram(){return this.attr("diagram")}getHash(){return this.attr("hash")}getLayout(){let t=this.attr("layout");return typeof t=="string"?JSON.parse(t):t}getTableType(){return this.attr("table_type")}getUrl(t="svg"){let e=this.imageUrl+this.getHash();return t!=="svg"&&(e+=`.${t}`),this.isV2()&&(e=e.replace("/image","")),e}getVersion(){return parseFloat(this.attr("version"))}async toPng(){return new Promise(t=>{let e=new XMLHttpRequest,r=this.getUrl("png");e.open("GET",r,!0),e.responseType="arraybuffer",e.onload=n=>{let i=e.response;if(i){let a=new Uint8Array(i);t(a)}},e.send(null)})}async toPngBase64(){let t=await this.toPng(),e=new Blob([t]);return new Promise(r=>{let n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){r(n.result)}})}async toSvg(){return new Promise(t=>{if(this.isV1()){let e=new XMLHttpRequest,r=this.getUrl("svg");e.open("GET",r,!0),e.onload=n=>t(e.responseText),e.send(null)}else(this.isV2()||this.isV3())&&t(this.getDiagram())})}};var Sa=class extends jt.Base{constructor(){super(...arguments),this.endpoint="diagrams",this.model=new Pr}};var si={};g(si,{Diagram:()=>Ql});var Ql={};g(Ql,{collection:()=>j2,model:()=>z2});function z2(s={}){return new Pr(void 0,Object.assign({baseUrl:S.API_URL_V2},s))}function j2(s={}){return new Sa(Object.assign({baseUrl:S.API_URL_V2},s))}var cg={};g(cg,{Collection:()=>ds,Core:()=>yh,Factory:()=>Wr,Model:()=>Oe});var ds={};g(ds,{Beacon:()=>Ga,Player:()=>Za});var yh={};g(yh,{ChalkySticks:()=>Ua,Collection:()=>Ht,Constants:()=>_,Core:()=>xh,Enum:()=>Yl,Environment:()=>Te,Event:()=>wt,Exception:()=>Wa,Factory:()=>sh,Input:()=>oh,Model:()=>X,Provider:()=>ii,Request:()=>zw.Request,Utility:()=>qs,Version:()=>Nk});var _={API_URL:"https://api.chalkysticks.com/v3",API_URL_DEV_V1:"http://localhost:8000/v1",API_URL_DEV_V2:"http://localhost:8000/v2",API_URL_V1:"https://api.chalkysticks.com/v1",API_URL_V2:"https://api.chalkysticks.com/v2",API_URL_V3:"https://api.chalkysticks.com/v3",CURRENT_DATE:"",DEFAULT_COLLECTION_LIMIT:20,NOTIFICATION_PREFERENCE:"native",STATIC_URL:"https://static.chalkysticks.com",WALLET_COLLECTION_TIME:60*60*6};var Ua=class{static configure(t={}){let e;Object.assign(_,t.constants)}};var Ht={};g(Ht,{Advertisement:()=>Ba,Base:()=>vt,Content:()=>Va,ContentTag:()=>La,Media:()=>Fa,Meta:()=>oi,Rulebook:()=>Na,Statistic:()=>$a,User:()=>za,Wallet:()=>ja});var X={};g(X,{Advertisement:()=>Lr,Base:()=>ut,Content:()=>qr,ContentTag:()=>qa,Geocode:()=>Ha,Media:()=>Hr,Meta:()=>Ra,Rulebook:()=>Rr,Statistic:()=>Fr,User:()=>us,Wallet:()=>cs});var wt={};g(wt,{Bus:()=>H,Dispatcher:()=>ri,DispatcherEvent:()=>Pa});var Pa=class{constructor(t,e){this.callbacks=[],this.eventName=t,e&&(this.envelope=e)}clearCallbacks(){this.callbacks=[]}registerCallback(t){this.callbacks.push(t)}unregisterCallback(t){let e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}fire(t){this.callbacks.slice(0).forEach(r=>{r(Object.assign({},this.envelope,t))})}};var ri=class{constructor(){this.events={}}dispatch(t,e){let r=this.events[t];r&&r.fire({data:e,event:{name:t,time:Date.now()},target:this})}on(t,e){let r=this.events[t];r||(r=new Pa(t),this.events[t]=r),r.registerCallback(e)}once(t,e){let r=n=>{e(n),this.off(t,r)};this.on(t,r)}off(t,e){let r=this.events[t];r&&!e?(r.clearCallbacks(),delete this.events[t]):r&&e&&r.callbacks.indexOf(e)>-1&&(r.unregisterCallback(e),r.callbacks.length===0&&delete this.events[t])}$emit(t,e={}){return this.dispatch(t,e)}trigger(t,e={}){return this.dispatch(t,e)}$on(t,e){return this.on(t,e)}$off(t,e){return this.off(t,e)}},H=new ri;var ii={};g(ii,{Store:()=>ni});var Am=class{get(){return this.instance||this.register({actions:{},commit:(t,e)=>{},dispatch:(t,e)=>{},getters:{},mutations:{},state:{}}),this.instance}register(t){this.instance=t}},ni=new Am;var Lm=class{constructor(){this.id=Math.random().toString(36).substr(2,9)}get app(){return as.getVariable("app",{apiUrl:"",limit:32,localUrl:""})}get debug(){return as.getVariable("debug",!1)}get env(){return as.getVariable("env","development")}get google(){return as.getVariable("google",{analytics:{id:""},api_key:""})}isLocal(){return as.env==="local"||as.env==="development"}isProduction(){return as.env==="production"}isStaging(){return as.env==="staging"}getVariable(t,e){let r=typeof window=="object"&&window.env?window.env:{},n=typeof window=="object"&&window.chalky?window.chalky:{};return{...r,...n}[t]||e}},as=new Lm,Te=as;var Dw=z(Et(),1),ut=class extends Dw.Model{constructor(t={},e={}){var r;if(super(t,e),this.baseUrl=Te.app.apiUrl,this.baseUrl=e.baseUrl||this.baseUrl||Te.app.apiUrl||_.API_URL,this.setOptions({withCredentials:!1}),e.token)this.setToken(e.token);else{let n=ni.get(),i=((r=n==null?void 0:n.state)==null?void 0:r.token)||(n==null?void 0:n.getters["authentication/token"]);i&&this.setToken(i)}this.attachEvents()}attachEvents(){this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),H.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),H.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={model:this};e===401?(this.dispatch("request:unauthorized",r),H.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),H.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),H.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),H.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),H.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),H.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),H.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}getBaseUrl(){return Te.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var Lr=class extends ut{constructor(){super(...arguments),this.endpoint="ads",this.fields=["caption","company","image","url"]}getCaption(){return this.attr("caption")}getCompany(){return this.attr("company")}getImage(){return this.attr("image")}getUrl(){return this.attr("url")}};var Aa={};g(Aa,{isYouTube:()=>qm,parseId:()=>Hm,thumbnailUrl:()=>W2,toEmbedUrl:()=>Rm});function qm(s){return s.match(/(?:youtube\.com|youtu\.be)/)!==null}function Hm(s){let t=s.match(/(?:\?v=|\/embed\/|\/\d+\/|\.be\/)([a-zA-Z0-9_-]+)/);return t?t[1]:""}function W2(s){return`https://img.youtube.com/vi/${Hm(s)}/hqdefault.jpg`}function Rm(s){return`https://www.youtube.com/embed/${Hm(s)}`}var qr=class extends ut{constructor(){super(...arguments),this.endpoint="content",this.fields=["title","media_type","media_url","thumbnail_url","content","created_at","updated_at"]}get tags(){return this.hasMany("tags",La)}getContent(){return this.attr("content")}getMediaType(){return this.attr("media_type")}getMediaUrl(){return this.attr("media_url")}getThumbnailUrl(){return this.attr("thumbnail_url")}getTitle(){return this.attr("title")}getYouTubeEmbed(){return qm(this.getMediaUrl())?Rm(this.getMediaUrl()):""}hasContent(){return!!this.getContent()}isImage(){return this.getMediaType()==="image"}isVideo(){return this.getMediaType()==="video"}};var qa=class extends ut{constructor(){super(...arguments),this.fields=["content_id","tag"]}getTag(){return this.attr("tag")}};var Ha=class s extends ut{constructor(){super(...arguments),this.endpoint="data/geocode",this.fields=["status","results"]}static async search(t){let e=new s;return await e.fetch({},{address:t}),e}getCityAndState(){var n,i;let t=this.getAddressComponents(),e=((n=t.find(a=>a.types.includes("locality")))==null?void 0:n.long_name)||"",r=((i=t.find(a=>a.types.includes("administrative_area_level_1")))==null?void 0:i.short_name)||"";return`${e}, ${r}`}getCountry(){var e;return((e=this.getAddressComponents().find(r=>r.types.includes("country")))==null?void 0:e.long_name)||""}getFullAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.long_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.long_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.long_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.long_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.long_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.long_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getLocation(){let t=0,e=0;if(this.hasResults()){let n=this.getResults()[0].geometry.location;t=n.lat,e=n.lng}return{latitude:t,longitude:e}}getResults(){return this.attr("results")}getShortAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.short_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.short_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.short_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.short_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.short_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.short_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getStatus(){return this.attributes.status||""}hasResults(){let t=this.getResults();return t&&t[0]&&t[0].geometry}isOK(){return this.getStatus()==="OK"}getAddressComponents(){return this.getResults()[0].address_components}};var Hr=class extends ut{constructor(){super(...arguments),this.endpoint="media",this.fields=["id","type","url","group","subgroup","created_at","updated_at"],this.proxyUrl="https://d2k0n0ggvekdpx.cloudfront.net"}getGroup(){return this.attr("group")}getSubgroup(){return this.attr("subgroup")}getProxiedUrl(t={width:1024}){let e=this.getUrl(),r=["unsafe"],n=[];if(!e)return e;if(n.push("format(webp)"),t.width||t.height){let i=`${t.width||""}x${t.height||""}`;t.fitIn&&r.push("fit-in"),r.push(i)}if(t.smart&&r.push("smart"),t.filters){if(t.filters.quality&&n.push(`quality(${t.filters.quality})`),t.filters.blur&&n.push(`blur(${t.filters.blur})`),t.filters.brightness&&n.push(`brightness(${t.filters.brightness})`),t.filters.contrast&&n.push(`contrast(${t.filters.contrast})`),t.filters.grayscale&&n.push("grayscale()"),t.filters.watermark){let i=t.filters.watermark;n.push(`watermark(${i.image},${i.x},${i.y},${i.transparency||0})`)}n.length>0&&r.push(`filters:${n.join(":")}`)}return`${this.proxyUrl}/${r.join("/")}/${this.getUrl()}`}getType(){return this.attr("type")}getUrl(){return this.attr("url")}getUrlSmall(){return this.getProxiedUrl({width:256})}getUrlMedium(){return this.getProxiedUrl({width:512})}getUrlLarge(){return this.getProxiedUrl({width:1024})}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var Ra=class extends ut{constructor(){super(...arguments),this.fields=["id","group","key","value","created_at","updated_at"]}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var Rr=class extends ut{constructor(){super(...arguments),this.endpoint="rulebooks",this.fields=["content"]}getContent(){return this.attr("content")}};var Fr=class extends ut{constructor(){super(...arguments),this.endpoint="statistics",this.fields=["beacon_count","city_count","venue_count","user_count","video_duration_as_minutes","video_duration_as_hours"]}getBeaconCount(){return this.attr("beacon_count")}getCityCount(){return this.attr("city_count")}getVenueCount(){return this.attr("venue_count")}getUserCount(){return this.attr("user_count")}getVideoDurationAsMinutes(){return this.attr("video_duration_as_minutes")}getVideoDurationAsHours(){return this.attr("video_duration_as_hours")}};var us=class extends ut{constructor(){super(...arguments),this.endpoint="users",this.fields=["id","lat","lon","name","phone","slug","status","wallet_balance","created_at","updated_at"]}get avatar(){return this.media.primary||new Hr}get games(){return this.hasMany("games",oi)}get lastCollection(){return this.hasOne("last_collection",cs)}get media(){let t=this.hasMany("media",Fa);return t.useModifiedEndpoint(this),t}get metadata(){return this.hasMany("meta",oi)}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getName(){return this.attr("name")}getPermissions(){return parseFloat(this.attr("permissions"))}getPhone(){return this.attr("phone")}getSlug(){return this.attr("slug")}getStatus(){return parseFloat(this.attr("status"))}getWalletBalance(){return parseFloat(this.attr("wallet_balance"))}};var cs=class extends ut{constructor(){super(...arguments),this.endpoint="wallet",this.fields=["id","user_id","challenger_id","transaction","source","source_id","created_at","updated_at"]}async collect(t){return this.setHeader("Authorization-API",`Bearer ${t}`),this.setHeader("Content-Type","application/json"),this.id="",this.endpoint="wallet/collect",await this.save(),this}get challenger(){return this.hasOne("challenger",us)}canCollect(){let t=_.WALLET_COLLECTION_TIME,e=new Date,r=new Date(this.getUpdatedAt());return e.getTime()-r.getTime()>=t}getSource(){return this.attr("source")}getTransaction(){return this.attr("transaction")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var kw=z(Et(),1),vt=class extends kw.Collection{constructor(t={}){var e;if(super(t),this.baseUrl=Te.app.apiUrl,this.limit=Te.app.limit,this.baseUrl=t.baseUrl||this.baseUrl||Te.app.apiUrl||_.API_URL,this.setOptions({withCredentials:!1}),this.limit=t.limit||this.limit,this.page=t.page||this.page,this.builder.qp("limit",this.limit),this.builder.qp("page",this.page),t.token)this.setToken(t.token);else{let r=ni.get(),n=((e=r==null?void 0:r.state)==null?void 0:e.token)||(r==null?void 0:r.getters["authentication/token"]);n&&this.setToken(n)}this.attachEvents()}attachEvents(){this.on("add:before",t=>{t.detail.model.baseUrl=this.baseUrl}),this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),H.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),H.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={collection:this};e===401?(this.dispatch("request:unauthorized",r),H.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),H.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),H.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),H.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),H.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),H.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),H.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}shouldFetch(){return this.loading?!1:this.models.length===0||this.requestTime<=0}getBaseUrl(){return Te.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var Ba=class extends vt{constructor(){super(...arguments),this.model=new Lr}};var Va=class extends vt{constructor(){super(...arguments),this.model=new qr}news(){return this.tags(["news"])}pad(){return this.tags(["pad"])}tags(t=[]){return this.setQueryParam("tags",t.join(",")),this}tutorials(){return this.tags(["tutorial"])}};var La=class extends vt{constructor(){super(...arguments),this.model=new qa}getByTag(t){return this.models.filter(e=>e.getTag()===t)}};var Fa=class extends vt{constructor(){super(...arguments),this.model=new Hr}get images(){return this.models.filter(t=>t.getType()==="image")}get primary(){return this.models.at(0)}get videos(){return this.models.filter(t=>t.getType()==="video")}};var oi=class extends vt{constructor(){super(...arguments),this.model=new Ra}getByKey(t){return this.models.filter(e=>e.getKey()===t)}getByGroup(t){return this.models.filter(e=>e.getGroup()===t)}getKeys(){return this.models.map(t=>t.getKey())}getValues(){return this.models.map(t=>t.getValue())}getValuesByKey(t){return this.getByKey(t).map(e=>e.getValue())}getValuesByGroup(t){return this.getByGroup(t).map(e=>e.getValue())}};var Na=class extends vt{constructor(){super(...arguments),this.model=new Rr}};var $a=class extends vt{constructor(){super(...arguments),this.model=new Fr}};var za=class extends vt{constructor(){super(...arguments),this.model=new us}};var ja=class extends vt{constructor(){super(...arguments),this.model=new cs}};var Yl={};g(Yl,{Achievement:()=>Fm,ContentMediaType:()=>Bm,ContentType:()=>Vm,Currency:()=>Nm,MediaGroup:()=>$m,MediaType:()=>zm,ProductType:()=>jm});var Fm;(function(s){s.FirstPhoto="first_photo"})(Fm||(Fm={}));var Bm;(function(s){s.Image="image",s.Video="video"})(Bm||(Bm={}));var Vm;(function(s){s.News="news",s.Pad="pool-pad",s.Tutorial="tutorial"})(Vm||(Vm={}));var Nm;(function(s){s.CSX="CSX",s.USD="USD"})(Nm||(Nm={}));var $m;(function(s){s.Default="",s.Community="community",s.Evaluated="evaluated",s.Inappropriate="inappropriate",s.Unknown="unknown"})($m||($m={}));var zm;(function(s){s.Exterior="exterior",s.Interior="interior",s.Person="person",s.Table="table"})(zm||(zm={}));var jm;(function(s){s.Digital="digital",s.Physical="physical"})(jm||(jm={}));var Wa={};g(Wa,{ConnectionRefused:()=>Wm,Geolocation:()=>Ee,InvalidInput:()=>Qm,InvalidRenderer:()=>Ym,InvalidStorageProvider:()=>Gm,NotImplemented:()=>Zm,ParserFailure:()=>Km,Unauthorized:()=>Xm});var Wm=class extends Error{};var Ee=class extends Error{constructor(t){super(t),this.name="GeolocationError"}};var Qm=class extends Error{};var Ym=class extends Error{};var Gm=class extends Error{};var Zm=class extends Error{};var Km=class extends Error{};var Xm=class extends Error{};var sh={};g(sh,{Advertisement:()=>Gl,Content:()=>Zl,Geocode:()=>Kl,Rulebook:()=>Xl,Statistic:()=>Jl,User:()=>th,Wallet:()=>eh});var Gl={};g(Gl,{collection:()=>Y2,model:()=>Q2});function Q2(s={}){return new Lr(void 0,Object.assign({baseUrl:_.API_URL_V3},s))}function Y2(s={}){return new Ba(Object.assign({baseUrl:_.API_URL_V3},s))}var Zl={};g(Zl,{collection:()=>Z2,model:()=>G2});function G2(s={}){return new qr(void 0,Object.assign({baseUrl:_.API_URL_V3},s))}function Z2(s={}){return new Va(Object.assign({baseUrl:_.API_URL_V3},s))}var Kl={};g(Kl,{model:()=>K2});function K2(s={}){return new Ha(void 0,Object.assign({baseUrl:_.API_URL_V1},s))}var Xl={};g(Xl,{collection:()=>J2,model:()=>X2});function X2(s={}){return new Rr(void 0,Object.assign({baseUrl:_.API_URL_V3},s))}function J2(s={}){return new Na(Object.assign({baseUrl:_.API_URL_V3},s))}var Jl={};g(Jl,{collection:()=>eD,model:()=>tD});function tD(s={}){return new Fr(void 0,Object.assign({baseUrl:_.API_URL_V3},s))}function eD(s={}){return new $a(Object.assign({baseUrl:_.API_URL_V3},s))}var th={};g(th,{collection:()=>rD,model:()=>sD});function sD(s={}){return new us(void 0,Object.assign({baseUrl:_.API_URL_V1},s))}function rD(s={}){return new za(Object.assign({baseUrl:_.API_URL_V1},s))}var eh={};g(eh,{collection:()=>iD,model:()=>nD});function nD(s={}){return new cs(void 0,Object.assign({baseUrl:_.API_URL_V1},s))}function iD(s={}){return new ja(Object.assign({baseUrl:_.API_URL_V1},s))}var oh={};g(oh,{Keyboard:()=>nh,Pointer:()=>Jm,Sensor:()=>ih,Shortcut:()=>Br,ShortcutSequencer:()=>rh,Video:()=>tg});var Br=class extends wt.Dispatcher{static add(t,e){oD.add(t,e)}constructor(t={}){super(),this.keymap={},this.attached=!1,this.keysDown={},this.options={ignoreInputs:!0},Object.assign(this.options,t||{})}add(t,e){this.ensureSetup(),this.keymap[t]=e}remove(t){delete this.keymap[t]}ensureSetup(){this.attached||(this.attached=!0,document.addEventListener("keydown",this.Handle_OnKeyDown.bind(this)),document.addEventListener("keyup",this.Handle_OnKeyUp.bind(this)))}findMatch(){let t=Object.keys(this.keymap);return t=t.sort((e,r)=>{var n,i;return(((n=r.match(/\+/g))==null?void 0:n.length)||0)-(((i=e.match(/\+/g))==null?void 0:i.length)||0)}),t.find(e=>e.replace(/\s+/g,"").toLowerCase().split("+").every(n=>this.keysDown[n.toLowerCase()]))}normalize(t){return t.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("arrow","")}Handle_OnKeyDown(t){let e=t.target;if(!(t instanceof KeyboardEvent)||this.options.ignoreInputs&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"))return;let r=this.normalize(t.key);this.keysDown[r]=!0;let n=this.findMatch()||"",i=this.keymap[n];i&&(this.trigger("shortcut:found",{match:n}),i())}Handle_OnKeyUp(t){if(!(t instanceof KeyboardEvent))return;let e=this.normalize(t.key);delete this.keysDown[e]}},rh=class s extends wt.Dispatcher{static add(t,e){Sw.add(t,e)}static remove(t){Sw.remove(t)}static get instance(){return new s}constructor(){super(),this.matches=[],this.sequences={},this.shortcut=new Br,this.shortcut.on("shortcut:found",this.Handle_OnShortcutFound.bind(this))}add(t,e){let r=t.join(",");t.forEach(n=>{this.shortcut.add(n,()=>{})}),this.sequences[r]=e}remove(t){let e=t.join(",");t.forEach(r=>{this.shortcut.remove(r)}),delete this.sequences[e]}async Handle_OnShortcutFound(t){let e=t.data.match;this.matches.push(e),this.matches=this.matches.slice(-20);let r=Object.keys(this.sequences).find(i=>{let a=i.split(","),f=this.matches.slice(-a.length);return f.length>=a.length&&f.every((p,o)=>p===a[o])});if(!r)return;let n=this.sequences[r];n&&n()}},oD=new Br({ignoreInputs:!0}),Sw=new rh;var nh=class extends wt.Dispatcher{constructor(){super(...arguments),this.shortcut=new Br({ignoreInputs:!0})}},F9=new nh;var Jm=class s extends wt.Dispatcher{static start(t="pointer",e=!1){this.instance||(this.instance=new s(t,e))}constructor(t="pointer",e=!1,r=document){super(),this.angle=0,this.changed=!1,this.distance=0,this.down=!1,this.dx=0,this.dy=0,this.friction=.95,this.inertia=0,this.lastX=0,this.lastY=0,this.moved=!1,this.rx=0,this.rx2=0,this.ry=0,this.ry2=0,this.rox=0,this.roy=0,this.rox2=0,this.roy2=0,this.ox=0,this.oy=0,this.time=Date.now(),this.timeDown=0,this.timeDownDifference=0,this.timeDifference=0,this.touches=0,this.vx=0,this.vy=0,this.x=0,this.x2=0,this.y=0,this.y2=0,this.wheel=!1,this.wheelDelta=0,this.moveThreshold=5,this.cid=Math.random().toString(36).substr(2,9),this.eventType="",this.holdTimeout=null,this.initialPinchDistance=0,this.lastPinchDistance=0,this.lastTapTime=0,this.swipeThreshold=50,this.swipeTimeThreshold=300,this.swipeVelocityThreshold=.3,this.tapCount=0,this.tapTimeout=null,this.twoFingerTapCount=0,this.vxHistory=[],this.vyHistory=[],this.Handle_OnInterval=this.Handle_OnInterval.bind(this),this.Handle_OnPointerDown=this.Handle_OnPointerDown.bind(this),this.Handle_OnPointerMove=this.Handle_OnPointerMove.bind(this),this.Handle_OnPointerUp=this.Handle_OnPointerUp.bind(this),this.Handle_OnWheel=this.Handle_OnWheel.bind(this),this.autoTouchEvents=e,this.eventType=t,this.target=r,this.attachEvents()}attachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.addEventListener("touchstart",this.Handle_OnPointerDown),this.target.addEventListener("touchmove",this.Handle_OnPointerMove),this.target.addEventListener("touchend",this.Handle_OnPointerUp)):(this.target.addEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.addEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.addEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.addEventListener("wheel",this.Handle_OnWheel,{passive:!1}),qs.Interval.add(this.Handle_OnInterval,1e3/60,`${this.cid}-pointer-velocity`)}detachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.removeEventListener("touchstart",this.Handle_OnPointerDown),this.target.removeEventListener("touchmove",this.Handle_OnPointerMove),this.target.removeEventListener("touchend",this.Handle_OnPointerUp)):(this.target.removeEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.removeEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.removeEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.removeEventListener("wheel",this.Handle_OnWheel),qs.Interval.remove(`${this.cid}-pointer-velocity`)}applyForMobile(t=!0,e=!0,r=!0){document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",t&&document.addEventListener("touchmove",function(n){n.preventDefault()},{passive:!1}),e&&document.addEventListener("touchend",function(n){n.preventDefault()},!1),r&&document.addEventListener("contextmenu",function(n){n.preventDefault()})}capturePinchZoom(t){document.addEventListener("wheel",e=>{t&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.Handle_OnWheel(e)},{capture:t,passive:!1}),document.body.style.touchAction="pan-x pan-y",document.body.style.userSelect="none"}configureSwipe(t){return t.distanceThreshold!==void 0&&(this.swipeThreshold=t.distanceThreshold),t.timeThreshold!==void 0&&(this.swipeTimeThreshold=t.timeThreshold),t.velocityThreshold!==void 0&&(this.swipeVelocityThreshold=t.velocityThreshold),this}resetRelative(t=0,e=0){return this.rox=this.rox2=this.rx=this.rx2=t,this.roy=this.roy2=this.ry=this.ry2=e,this}get downEvent(){let t="";switch(this.eventType){case"pointer":t="pointerdown";break;case"touch":t="touchstart";break;default:t="mousedown";break}return t}get moveEvent(){let t="";switch(this.eventType){case"pointer":t="pointermove";break;case"touch":t="touchmove";break;default:t="mousemove";break}return t}get upEvent(){let t="";switch(this.eventType){case"pointer":t="pointerup";break;case"touch":t="touchend";break;default:t="mouseup";break}return t}getDistanceBetweenTouches(t){if(t.touches.length<2)return 0;let e=t.touches[0],r=t.touches[1],n=e.pageX-r.pageX,i=e.pageY-r.pageY;return Math.sqrt(n*n+i*i)}async Handle_OnInterval(){let t=this.vx,e=this.vy;this.vx*=this.friction,this.vy*=this.friction,Math.abs(this.vx)<.025&&(this.vx=0),Math.abs(this.vy)<.025&&(this.vy=0),isFinite(this.vx)||(this.vx=0),isFinite(this.vy)||(this.vy=0),this.down||(this.x2+=this.vx*5,this.y2+=this.vy*5,this.rx2+=this.vx*5,this.ry2+=this.vy*5),this.changed=this.vx!==t||this.vy!==e}async Handle_OnPointerDown(t){let e="touches"in t&&t.touches.length===2;if(this.down=!0,this.moved=!1,this.timeDown=Date.now(),this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=this.getDistanceBetweenTouches(t),this.lastPinchDistance=this.initialPinchDistance),this.ox=this.x="touches"in t?t.touches[0].clientX:t.clientX,this.oy=this.y="touches"in t?t.touches[0].clientY:t.clientY,this.dx=0,this.dy=0,this.target!==document){let n=this.target.getBoundingClientRect();this.ox-=n.left,this.oy-=n.top,this.x-=n.left,this.y-=n.top}this.rox=this.rx,this.roy=this.ry,this.rox2=this.rx2,this.roy2=this.ry2,this.dispatch("down",{touches:this.touches,x:this.x,y:this.y});let r={x:this.x,y:this.y};e?(this.twoFingerTapCount++,this.twoFingerTapCount===1&&setTimeout(()=>{this.twoFingerTapCount===1&&!this.down?this.dispatch("twofingertap",r):this.twoFingerTapCount===2&&this.dispatch("twofingerdoubletap",r),this.twoFingerTapCount=0},300)):(this.tapCount++,this.timeDown-this.lastTapTime<300?(clearTimeout(this.tapTimeout),this.dispatch("doubletap",r),this.tapCount=0):this.tapTimeout=setTimeout(()=>{this.tapCount===1&&!this.down&&this.dispatch("tap",r),this.tapCount=0},300),this.lastTapTime=this.timeDown,this.holdTimeout=setTimeout(()=>{this.down&&this.dispatch("hold",r)},500))}async Handle_OnPointerMove(t){if(this.moved&&this.holdTimeout&&clearTimeout(this.holdTimeout),this.touches>1){let e=this.getDistanceBetweenTouches(t),r=e-this.lastPinchDistance,n=e/this.initialPinchDistance;this.dispatch("zoom",{delta:r,isTrackpad:!1,type:"pinch",scale:n}),this.lastPinchDistance=e}if(this.lastX=this.x,this.lastY=this.y,this.x="touches"in t?t.touches[0].clientX:t.clientX,this.y="touches"in t?t.touches[0].clientY:t.clientY,this.target!==document){let e=this.target.getBoundingClientRect();this.x-=e.left,this.y-=e.top}this.currentTarget=t.currentTarget,this.activeTarget=t.target,this.timeDifference=Date.now()-this.time,this.time=Date.now(),this.dispatch("move",{x:this.x,y:this.y}),this.vxHistory.push((this.x-this.lastX)/this.timeDifference),this.vyHistory.push((this.y-this.lastY)/this.timeDifference),this.vxHistory.length>5&&this.vxHistory.shift(),this.vyHistory.length>5&&this.vyHistory.shift(),this.down&&(this.dx=this.x-this.ox,this.dy=this.y-this.oy,this.rx=this.rox+this.dx,this.ry=this.roy+this.dy,this.rx2=this.rox2+this.dx,this.ry2=this.roy2+this.dy,this.angle=Math.atan2(this.dy,this.dx)*(180/Math.PI),this.distance=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.moved=Math.abs(this.distance)>this.moveThreshold,this.x2=this.x,this.y2=this.y,this.timeDownDifference=this.time-this.timeDown,this.inertia=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.vx=this.vxHistory.reduce((e,r)=>e+r)/(this.vxHistory.length||1),this.vy=this.vyHistory.reduce((e,r)=>e+r)/(this.vyHistory.length||1),this.dispatch("drag",{angle:this.angle,changed:this.changed,distance:this.distance,dx:this.dx,dy:this.dy,inertia:this.inertia,moved:this.moved,ox:this.ox,oy:this.oy,rx:this.rx,ry:this.ry,rx2:this.rx2,ry2:this.ry2,time:this.time,timeDifference:this.timeDifference,timeDown:this.timeDown,timeDownDifference:this.timeDownDifference,touches:this.touches,vx:this.vx,vy:this.vy,x:this.x,y:this.y}))}async Handle_OnPointerUp(t){let e=Date.now()-this.timeDown;if(this.down="touches"in t?t.touches.length>0:!1,this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=0,this.lastPinchDistance=0),this.dispatch("up",{touches:this.touches,x:this.x,y:this.y}),this.moved&&e<this.swipeTimeThreshold){let r=this.x-this.ox,n=this.y-this.oy,i=Math.sqrt(r*r+n*n),a=i/this.timeDifference;if(i>this.swipeThreshold&&a>this.swipeVelocityThreshold){let f=Math.abs(r)>Math.abs(n)?r>0?"right":"left":n>0?"down":"up";this.dispatch("swipe",{direction:f,distance:i,duration:this.timeDifference,velocity:a}),this.dispatch("swipe:"+f,{direction:f,distance:i,duration:this.timeDifference,velocity:a})}}(this.distance<50||!this.distance)&&this.dispatch("tap:small",{x:this.x,y:this.y,distance:this.distance}),(this.distance<20||!this.distance)&&this.dispatch("tap:xsmall",{x:this.x,y:this.y,distance:this.distance}),this.holdTimeout&&clearTimeout(this.holdTimeout),this.distance=0}async Handle_OnWheel(t){let e=~~(Math.abs(t.wheelDeltaY||1)/Math.abs(t.deltaY||1))>1,r=t.deltaY,n=r>0?"out":"in";qs.Debounce.exec(this.cid,()=>{this.wheel=!1,this.wheelDelta=0},100,!0),r&&(this.wheel=!0),this.wheelDelta=r,this.dispatch("zoom",{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"}),this.dispatch("zoom:"+n,{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"})}};var ih=class extends wt.Dispatcher{get hasMotion(){return"ondevicemotion"in window}get hasOrientation(){return"ondeviceorientation"in window}get hasSensors(){return this.hasOrientation&&this.hasMotion}constructor(){super(),this.Handle_OnDeviceMotion=this.Handle_OnDeviceMotion.bind(this),this.Handle_OnDeviceOrientation=this.Handle_OnDeviceOrientation.bind(this),this.attachEvents()}attachEvents(){window.addEventListener("devicemotion",this.Handle_OnDeviceMotion),window.addEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}detachEvents(){window.removeEventListener("devicemotion",this.Handle_OnDeviceMotion),window.removeEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}async Handle_OnDeviceMotion(t){let{acceleration:e,accelerationIncludingGravity:r,rotationRate:n}=t;this.dispatch("gyroscope",n),this.dispatch("accelerometer",e),this.dispatch("accelerometer:gravity",r)}async Handle_OnDeviceOrientation(t){let{absolute:e,alpha:r,beta:n,gamma:i}=t;this.dispatch("orientation",{absolute:e,alpha:r,beta:n,gamma:i})}},z9=new ih;var tg=class extends wt.Dispatcher{static async getSources(){return(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput").map(r=>({deviceId:r.deviceId,label:r.label}))}};var qs={};g(qs,{Analytics:()=>ah,Cache:()=>Qa,Debounce:()=>ag,Device:()=>uh,Easing:()=>Hs,EasingFunction:()=>Z,Format:()=>ch,Geolocation:()=>fh,Hysteresis:()=>ug,Interval:()=>ci,Math:()=>hh,Presentation:()=>ph,Share:()=>mh,String:()=>gh,YouTube:()=>Aa,documentHeight:()=>Pk,getCSSVariable:()=>Ak,getDate:()=>Lk,getEasingMethod:()=>Ya,offsetHeight:()=>Hk,offsetLeft:()=>qk,offsetTop:()=>Rk,offsetWidth:()=>Fk,requestAnimationFrame:()=>Bk,sleep:()=>Vk});var ah={};g(ah,{embedGoogleAnalytics:()=>aD,embedMetaPixel:()=>cD,embedRedditPixel:()=>uD});function aD(s){if(window.gtag){console.warn("Analytics is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+s,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],console.log("GA:",s),window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date),gtag("config",s)}function uD(s,t={}){if(window.rdt){console.warn("Reddit pixel is already embedded");return}let e=document.createElement("script");e.async=!0,e.src="https://www.redditstatic.com/ads/pixel.js";let r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r),window.rdt=function(){window.rdt.sendEvent?window.rdt.sendEvent(...arguments):window.rdt.callQueue.push(arguments)},window.rdt.callQueue=[],console.log("RP:",s),rdt("init",s,t),rdt("track","PageVisit")}function cD(s){if(window.fbq){console.warn("Facebook pixel is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js";let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod(...arguments):window.fbq.queue.push(arguments)},window._fbq||(window._fbq=window.fbq),window.fbq.push=window.fbq,window.fbq.queue=[],window.fbq.loaded=!0,window.fbq.version="2.0",console.log("MP:",s),fbq("init",s),fbq("track","PageView")}var uh={};g(uh,{getBrowserName:()=>Vr,getBrowserVersion:()=>yD,getOrientation:()=>pD,getScreenHeight:()=>xD,getScreenWidth:()=>gD,isAndroid:()=>dD,isChrome:()=>bD,isEdge:()=>vD,isFirefox:()=>MD,isIE:()=>wD,isIOS:()=>hD,isLandscape:()=>eg,isMobile:()=>lD,isOpera:()=>ED,isPortrait:()=>fD,isSafari:()=>TD,isTouchDevice:()=>mD,userAgent:()=>ai});function ai(){return navigator.userAgent}function lD(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(ai())}function hD(){return/iphone|ipad|ipod/i.test(ai())}function dD(){return/android/i.test(ai())}function eg(){return window.orientation===90||window.orientation===-90}function fD(){return!eg()}function pD(){return eg()?"landscape":"portrait"}function mD(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function gD(){return window.screen.width}function xD(){return window.screen.height}function Vr(){let s=ai();return s.indexOf("firefox")>-1?"Firefox":s.indexOf("opera")>-1||s.indexOf("opr")>-1?"Opera":s.indexOf("chrome")>-1?"Chrome":s.indexOf("safari")>-1?"Safari":s.indexOf("msie")>-1||s.indexOf("trident")>-1?"Internet Explorer":"Unknown"}function yD(){let s=ai(),t=s.match(/version\/(\d+)/i);return t===null&&(t=s.match(/(?:msie |rv:)(\d+)/)),t===null&&(t=s.match(/(?:chrome|safari|firefox|opera|opr|edge)\/(\d+)/i)),t===null?"Unknown":t[1]}function wD(){return Vr()==="Internet Explorer"}function vD(){return Vr()==="Edge"}function bD(){return Vr()==="Chrome"}function MD(){return Vr()==="Firefox"}function TD(){return Vr()==="Safari"}function ED(){return Vr()==="Opera"}var ch={};g(ch,{bytesToSize:()=>OD,daysBetweenDates:()=>CD,getRelativeTime:()=>sg,secondsToTime:()=>_D,timeAgo:()=>kD,timeToHuman:()=>DD,timeToSeconds:()=>ID,timeUntil:()=>SD});function OD(s){let t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s==0)return"0 Byte";let e=parseInt(Math.floor(Math.log(s)/Math.log(1024)).toString());return Math.round(s/Math.pow(1024,e))+" "+t[e]}function CD(s,t){let e=Math.abs(t.getTime()-s.getTime());return Math.ceil(e/(1e3*3600*24))}function _D(s,t="00:00:00"){let e=new Date(0);switch(e.setSeconds(s),t){case"00:00:00":return e.toISOString().substr(11,8);case"00:00":return e.toISOString().substr(14,5);case"00":return e.toISOString().substr(17,2)}return e.toISOString().substr(11,8)}function ID(s){let[t,e,r]=s.split(":").map(Number);return t*3600+e*60+r}function Uw(s){if(s instanceof Date)return isNaN(s.getTime())?null:s;if(typeof s=="string"){let t=new Date(s);if(!isNaN(t.getTime()))return t;let e=s.split(":").map(Number);if(e.length===3&&e.every(r=>!isNaN(r))){let r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),e[0],e[1],e[2])}}return typeof s=="number"?s<9466848e5?new Date(Date.now()+s*1e3):new Date(s):null}function DD(s,t=!1){let e;if(typeof s=="string"){let a=s.split(":").map(Number);if(a.length===3&&a.every(f=>!isNaN(f)))e=a[0]*3600+a[1]*60+a[2];else{let f=Uw(s);if(!f)return"";e=Math.floor((f.getTime()-Date.now())/1e3)}}else s instanceof Date?e=Math.floor((s.getTime()-Date.now())/1e3):s>9466848e5?e=Math.floor((s-Date.now())/1e3):e=s;let r=Math.floor(Math.abs(e)/3600),n=Math.floor(Math.abs(e)%3600/60),i=Math.floor(Math.abs(e)%60);if(t){let a=[];return r>0&&a.push(`${r}h`),n>0&&a.push(`${n}m`),i>0&&a.push(`${i}s`),a.join(" ")||"0s"}return`${r}h ${n}m ${i}s`}function sg(s,t={}){let e=Uw(s);if(!e)return"";let{type:r="ago",suffix:n="",shortUnits:i=!1}=t,a=new Date,f=e<a,p=Math.abs(r==="ago"?a.getTime()-e.getTime():e.getTime()-a.getTime()),o=Math.floor(p/1e3),u={year:31536e3,month:2592e3,day:86400,hour:3600,minute:60,second:1},c={year:i?"y":"year",month:i?"mo":"month",day:i?"d":"day",hour:i?"h":"hour",minute:i?"m":"minute",second:i?"s":"second"};for(let[h,m]of Object.entries(u)){let w=o/m;if(w>=1){let y=Math.floor(w),v=c[h],x=!i&&y!==1?v+"s":v,d=`${y} ${x}`;return n?`${d} ${n}`.trim():d}}let l=i?"0s":"0 seconds";return n?`${l} ${n}`.trim():l}function kD(s,t="ago",e="ago"){return sg(s,{suffix:"ago",type:"ago"})}function SD(s,t="until",e="left"){return sg(s,{suffix:"left",type:"until"})}var fh={};g(fh,{CACHE_EXPIRATION:()=>ls,cache:()=>hs,clearWatch:()=>ck,config:()=>Bw,distanceBetween:()=>fk,getBearing:()=>pk,getBounds:()=>mk,getLocation:()=>ak,isPointInBounds:()=>gk,simplifyCoordinates:()=>xk,watchLocation:()=>uk});var Qa=class{constructor(t=-1){this.storage={},this.ttl=t>0?t:0}all(){let t=Object.keys(this.storage),e={},r;for(let n of t)r=this.get(n),r!==void 0&&(e[n]=this.get(n));return e}delete(t){this.storage[t]&&delete this.storage[t]}get(t){let e=this.storage[t],r;return e?e.ttl===0?(r=e.value,this.delete(t)):this.isCachedItemHealthy(e)&&(r=e.value):r=void 0,r}exists(t){return this.storage[t]!==void 0}has(t){return this.get(t)!==void 0}set(t,e,r=0,n=!1){let i=this.has(t),a=Date.now();return i&&this.isImmutable(t)?!1:(this.storage[t]={immutable:n,time:a,ttl:r,value:e},!0)}isCachedItemHealthy(t){let e=Date.now(),r=t.time,n=t.ttl;return r+n>e}isImmutable(t){let e=this.storage[t];return!!(e!=null&&e.immutable)}};var hh={};g(hh,{EARTH_RADIUS:()=>lh,FOOT_METER_RATIO:()=>rg,MPH_METER_RATIO:()=>ng,angle:()=>Pw,angleAsDegrees:()=>UD,angleDifference:()=>Aw,angleDifferenceAsDegrees:()=>PD,angleFromVector:()=>AD,angleFromVectors:()=>LD,angleNormalize:()=>qD,clamp:()=>ui,clampUnsigned:()=>Lw,degreesToSlope:()=>HD,denormalize:()=>RD,distance:()=>FD,dot:()=>BD,feetToMeters:()=>VD,inverseLerp:()=>qw,lerp:()=>Hw,logarithmicZoom:()=>ND,metersToFeet:()=>$D,minMax:()=>zD,minMaxUnsigned:()=>jD,mphToMs:()=>WD,msToMph:()=>QD,normalize:()=>YD,randomInt:()=>ZD,randomRange:()=>Rw,randomSign:()=>KD,remap:()=>GD,rotate:()=>Fw,rotateDeg:()=>XD,round:()=>JD,roundToDecimal:()=>sk,roundToNearest:()=>tk,roundToNearestFraction:()=>ek,slopeToDegrees:()=>rk,smootherstep:()=>ik,smoothstep:()=>nk,toDegrees:()=>Nr,toRadians:()=>Qt,transformRatio:()=>ok});var Z=class{static linear(t){return t}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}static easeInCubic(t){return t*t*t}static easeOutCubic(t){return--t*t*t+1}static easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}static easeInQuart(t){return t*t*t*t}static easeOutQuart(t){return 1- --t*t*t*t}static easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}static easeInQuint(t){return t*t*t*t*t}static easeOutQuint(t){return 1+--t*t*t*t*t}static easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}static easeInSine(t){return 1-Math.cos(t*Math.PI/2)}static easeOutSine(t){return Math.sin(t*Math.PI/2)}static easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}static easeInExpo(t){return t===0?0:Math.pow(2,10*(t-1))}static easeOutExpo(t){return t===1?1:-Math.pow(2,-10*t)+1}static easeInOutExpo(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)}static easeInCirc(t){return-(Math.sqrt(1-t*t)-1)}static easeOutCirc(t){return Math.sqrt(1- --t*t)}static easeInOutCirc(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static easeInBack(t,e=1.70158){return t*t*((e+1)*t-e)}static easeOutBack(t,e=1.70158){return--t*t*((e+1)*t+e)+1}static easeInOutBack(t,e=1.70158){return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)}},Hs=class s{static linear(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.linear,n)}static easeInQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInQuad,n)}static easeOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeOutQuad,n)}static easeInOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInOutQuad,n)}static easeInQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInQuart,n)}static easeOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeOutQuart,n)}static easeInOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInOutQuart,n)}static easeInQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInQuint,n)}static easeOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeOutQuint,n)}static easeInOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInOutQuint,n)}static easeInCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInCubic,n)}static easeOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeOutCubic,n)}static easeInOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInOutCubic,n)}static easeInSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInSine,n)}static easeOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeOutSine,n)}static easeInOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInOutSine,n)}static easeInExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInExpo,n)}static easeOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeOutExpo,n)}static easeInOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInOutExpo,n)}static easeInCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInCirc,n)}static easeOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeOutCirc,n)}static easeInOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInOutCirc,n)}static easeInBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInBack,n)}static easeOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeOutBack,n)}static easeInOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,Z.easeInOutBack,n)}static normalize(t,e=0,r=1,n,i=!0){let a=s.clamp((t-e)/(r-e),0,1);return i?n(a):e+(r-e)*n(a)}static clamp(t,e=0,r=1){return Math.min(Math.max(t,e),r)}};function Ya(s){return Hs.hasOwnProperty(s)?Hs[s]:Hs.easeInOutQuad}var lh=6371,rg=3.28084,ng=.44704;function Pw(s,t,e,r){return Math.atan2(r-t,e-s)}function UD(s,t,e,r){return Pw(s,t,e,r)*180/Math.PI}function Aw(s,t){return Math.atan2(Math.sin(t-s),Math.cos(t-s))}function PD(s,t){return Aw(s,t)*180/Math.PI}function AD(s){return Math.atan2(s.y,s.x)}function LD(s,t){return Math.atan2(t.y-s.y,t.x-s.x)}function qD(s){return s=s%360,s<0&&(s+=360),s}function ui(s,t,e){return Math.min(Math.max(s,t),e)}function Lw(s,t,e){return[t,e]=[Math.min(t,e),Math.max(t,e)],Math.sign(s)*Math.min(Math.abs(s),Math.abs(s)>t?e:t)}function HD(s){return Math.tan(s*(Math.PI/180))}function RD(s,t,e,r=!1){let n=s*(e-t)+t;return r&&(n=ui(n,t,e)),n}function FD(s,t,e,r){return Math.sqrt((e-s)**2+(r-t)**2)}function BD(s,t,e,r){return s*e+t*r}function VD(s){return s/rg}function qw(s,t,e){return(e-s)/(t-s)}function Hw(s,t,e){return s+(t-s)*e}function ND(s,t,e=.025){let r=Math.log(s),n=Math.log(t+1)||0;return Math.exp(r+n*e)}function $D(s){return s*rg}function zD(s,t,e){return ui(s,t,e)}function jD(s,t,e){return Lw(s,t,e)}function WD(s){return s*ng}function QD(s){return s/ng}function YD(s,t,e,r=!1){let n=(s-t)/(e-t);return r&&(n=ui(n,t,e)),n}function GD(s,t,e,r,n){return r+(n-r)*qw(t,e,s)}function Rw(s,t){return Hw(s,t,Math.random())}function ZD(s,t){return Math.floor(Rw(s,t+1))}function KD(){return Math.random()<.5?-1:1}function Fw(s,t,e){let r=Math.sin(e),n=Math.cos(e);return[s*n-t*r,s*r+t*n]}function XD(s,t,e){return Fw(s,t,e*Math.PI/180)}function JD(s,t=2){return Number(s.toFixed(t))}function tk(s,t){return Math.round(s/t)*t}function ek(s,t){return Math.round(s*t)/t}function sk(s,t){return Math.round(s*10**t)/10**t}function rk(s){return Math.atan(s)*(180/Math.PI)}function nk(s,t,e){let r=ui((e-s)/(t-s),0,1);return r*r*(3-2*r)}function ik(s,t,e){let r=ui((e-s)/(t-s),0,1);return r*r*r*(r*(r*6-15)+10)}function Qt(s){return s*Math.PI/180}function Nr(s){return s*180/Math.PI}function ok(s,t=4,e="linear",r=""){r||(r=e);let n=Ya(e),i=Ya(r);return s<=1/t?n(s/(1/t)):s<=1-1/t?1:i((1-s)/(1/t))}var Bw={IP_LOCATION_API:"https://ipapi.co/json/"},ls=1e3*6*2,hs=new Qa(ls);async function ak(){let s="geolocation",t=hs.get(s);if(t)return t;try{return navigator!=null&&navigator.geolocation?await lk(s):await yk()?await hk(s):await dk(s)}catch(e){throw e instanceof Error?e:new Ee("Unknown error occurred")}}function uk(s,t,e={enableHighAccuracy:!0}){let r="geolocation";return navigator!=null&&navigator.geolocation?navigator.geolocation.watchPosition(n=>{let i=$r(n);hs.set(r,i,ls),H.dispatch("location:change",i),s==null||s(i)},async n=>{try{let i=await dh(),a=$r(i);hs.set(r,a,ls),H.dispatch("location:change",a),s==null||s(a)}catch(i){H.dispatch("location:error",n),t==null||t(n)}},e):0}function ck(s){try{if(!(navigator!=null&&navigator.geolocation))throw new Ee("Geolocation is not supported by this browser.");navigator.geolocation.clearWatch(s)}catch(t){console.error("Error clearing geolocation watch:",t)}}async function lk(s){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(r=>{let n=$r(r);hs.set(s,n,ls),console.info("\u{1F538} Location",n),H.dispatch("location:change",n),t(n)},async r=>{if(console.warn("Browser geolocation error:",r),r.code===r.PERMISSION_DENIED)e(new Ee("Permission denied for geolocation."));else if(r.code===r.POSITION_UNAVAILABLE)e(new Ee("Geolocation position unavailable."));else if(r.code===r.TIMEOUT)e(new Ee("Geolocation request timed out."));else try{let n=await dh(),i=$r(n);hs.set(s,i,ls),console.info("\u{1F53A} Location",i),H.dispatch("location:change",i),t(i)}catch(n){e(new Ee("Fallback IP location failed."))}})})}async function hk(s){try{let{Geolocation:t}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1)),e=await t.getCurrentPosition(),r=$r(e);return hs.set(s,r,ls),console.info("\u{1F539} Location",r),H.dispatch("location:change",r),r}catch(t){try{let e=await dh(),r=$r(e);return hs.set(s,r,ls),console.info("\u{1F53A} Location",r),H.dispatch("location:change",r),r}catch(e){throw H.dispatch("location:error",t),t}}}async function dk(s){try{let t=await dh(),e=$r(t);return hs.set(s,e,ls),console.info("\u{1F53A} Location",e),H.dispatch("location:change",e),e}catch(t){throw H.dispatch("location:error",t),new Ee("Failed to get IP location")}}async function dh(){let t=await(await fetch(Bw.IP_LOCATION_API)).json();return{coords:{accuracy:5e3,altitude:null,altitudeAccuracy:null,heading:null,latitude:t.latitude,longitude:t.longitude,speed:null},timestamp:Date.now()}}function $r(s){return{position:s,timestamp:Date.now()}}function fk(s,t,e,r){let n=lh,i=Qt(e-s),a=Qt(r-t),f=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Qt(s))*Math.cos(Qt(e))*Math.sin(a/2)*Math.sin(a/2),p=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return n*p}function pk(s,t,e,r){let n=Qt(r-t),i=Math.sin(n)*Math.cos(Qt(e)),a=Math.cos(Qt(s))*Math.sin(Qt(e))-Math.sin(Qt(s))*Math.cos(Qt(e))*Math.cos(n);return(Nr(Math.atan2(i,a))+360)%360}function mk(s,t,e){let r=lh,n=Qt(s),i=Qt(t),a=e/r;return{latitudeMin:Nr(n-a),latitudeMax:Nr(n+a),longitudeMin:Nr(i-a/Math.cos(n)),longitudeMax:Nr(i+a/Math.cos(n))}}function gk(s,t,e){return s>=e.latitudeMin&&s<=e.latitudeMax&&t>=e.longitudeMin&&t<=e.longitudeMax}function xk(s,t,e=1e3){var a,f;let r,n,i=e;if(typeof s=="number"&&typeof t=="number")r=s,n=t,i=e;else if(Array.isArray(s))[r,n]=s;else if(typeof s=="object")"position"in s?(r=s.position.lat,n=s.position.lng):(r=(a=s==null?void 0:s.latitude)!=null?a:(s==null?void 0:s.lat)||0,n=(f=s==null?void 0:s.longitude)!=null?f:(s==null?void 0:s.lng)||0);else throw new Error("Invalid coordinates format");if(typeof r!="number"||typeof n!="number")throw new Error("Invalid coordinates: latitude and longitude must be numbers");return{latitude:Math.round(r*i)/i,longitude:Math.round(n*i)/i}}async function yk(){try{let{Geolocation:s}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1));return!!s}catch(s){return!1}}var ph={};g(ph,{castToDevice:()=>bk,isFullscreenActive:()=>vk,toggleFullscreen:()=>wk});function wk(s=document.body){document.fullscreenElement?document.exitFullscreen().catch(t=>{console.error(`Error attempting to exit fullscreen mode: ${t.message}`)}):s.requestFullscreen().catch(t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message}`)})}function vk(){return!!document.fullscreenElement}async function bk(s){if(!("presentation"in navigator)){console.error("Presentation API is not supported in this browser.");return}try{new PresentationRequest([s]).start().then(e=>{console.log("Connected to presentation:",e),e.onterminate=()=>{console.log("Presentation terminated.")}},e=>{console.error("Error starting presentation:",e)})}catch(t){console.error("Error casting to device:",t)}}var mh={};g(mh,{canShare:()=>Nw,hasSupport:()=>ig,native:()=>Vw,remoteFile:()=>Mk});async function Vw(s=[],t="",e="",r=""){let n={files:s,text:e,title:t,url:r};if(ig()===!1)throw new Error("This browser does not support navigator share");if(Nw()===!1)throw new Error("Sharing is not supported, make sure you are on HTTPS");return navigator.canShare(n)?(await navigator.share(n),!0):!1}async function Mk(s,t="",e="",r=""){let n=await Tk(s);return Vw([n],t,e,r)}function ig(){return"share"in navigator}function Nw(){return ig()&&!!navigator.canShare}async function Tk(s="",t="my-file.png"){s||(s="https://cdn.glitch.com/f96f78ec-d35d-447b-acf4-86f2b3658491%2Fchuck.png?v=1618311092497");let e=await fetch(s).then(i=>i.blob()),r=e.type.split(";").shift();return new File([e],t,{type:r})}var gh={};g(gh,{basicHash:()=>Ek,capitalize:()=>Ok,chunkSentences:()=>Ck,md5:()=>_k,random:()=>Ik,shuffle:()=>Dk,slug:()=>kk,trimSentences:()=>Uk,truncate:()=>Sk});function Ek(s){return s.split("").reduce((t,e)=>(t=(t<<5)-t+e.charCodeAt(0),t&t),0).toString()}function Ok(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Ck(s,t=130){let e=s.replace(/\.$/,"").split(". "),r=[];return e.forEach(n=>{r.length===0||r[r.length-1].length>t?r.push(n+"."):(n=n.trim(),r[r.length-1]+=` ${n}.`)}),r}function _k(s){let t="0123456789abcdef",e=new TextEncoder().encode(s),r=e.length*8,n=(448-(e.length*8+1)%512+512)%512,i=e.length+Math.ceil(n/8)+8,a=new Uint8Array(i);a.set(e),a[e.length]=128;let f=new DataView(a.buffer);f.setUint32(i-8,r>>>0,!0),f.setUint32(i-4,Math.floor(r/4294967296),!0);let p=new Uint32Array(i/4);for(let x=0;x<i;x+=4)p[x/4]=f.getUint32(x,!0);let o=1732584193,u=4023233417,c=2562383102,l=271733878;function h(x,d){return x<<d|x>>>32-d}function m(x,d,M){return x&d|~x&M}function w(x,d,M){return x&M|d&~M}function y(x,d,M){return x^d^M}function v(x,d,M){return d^(x|~M)}for(let x=0;x<p.length;x+=16){let d=p.slice(x,x+16),[M,Ot,Ut,Pt]=[o,u,c,l];o=h(o+m(u,c,l)+d[0]+3614090360,7)+u,l=h(l+m(o,u,c)+d[1]+3905402710,12)+o,c=h(c+m(l,o,u)+d[2]+606105819,17)+l,u=h(u+m(c,l,o)+d[3]+3250441966,22)+c,o=h(o+m(u,c,l)+d[4]+4118548399,7)+u,l=h(l+m(o,u,c)+d[5]+1200080426,12)+o,c=h(c+m(l,o,u)+d[6]+2821735955,17)+l,u=h(u+m(c,l,o)+d[7]+4249261313,22)+c,o=h(o+m(u,c,l)+d[8]+1770035416,7)+u,l=h(l+m(o,u,c)+d[9]+2336552879,12)+o,c=h(c+m(l,o,u)+d[10]+4294925233,17)+l,u=h(u+m(c,l,o)+d[11]+2304563134,22)+c,o=h(o+m(u,c,l)+d[12]+1804603682,7)+u,l=h(l+m(o,u,c)+d[13]+4254626195,12)+o,c=h(c+m(l,o,u)+d[14]+2792965006,17)+l,u=h(u+m(c,l,o)+d[15]+1236535329,22)+c,o=h(o+w(u,c,l)+d[1]+4129170786,5)+u,l=h(l+w(o,u,c)+d[6]+3225465664,9)+o,c=h(c+w(l,o,u)+d[11]+643717713,14)+l,u=h(u+w(c,l,o)+d[0]+3921069994,20)+c,o=h(o+w(u,c,l)+d[5]+3593408605,5)+u,l=h(l+w(o,u,c)+d[10]+38016083,9)+o,c=h(c+w(l,o,u)+d[15]+3634488961,14)+l,u=h(u+w(c,l,o)+d[4]+3889429448,20)+c,o=h(o+w(u,c,l)+d[9]+568446438,5)+u,l=h(l+w(o,u,c)+d[14]+3275163606,9)+o,c=h(c+w(l,o,u)+d[3]+4107603335,14)+l,u=h(u+w(c,l,o)+d[8]+1163531501,20)+c,o=h(o+w(u,c,l)+d[13]+2850285829,5)+u,l=h(l+w(o,u,c)+d[2]+4243563512,9)+o,c=h(c+w(l,o,u)+d[7]+1735328473,14)+l,u=h(u+w(c,l,o)+d[12]+2368359562,20)+c,o=h(o+y(u,c,l)+d[5]+4294588738,4)+u,l=h(l+y(o,u,c)+d[8]+2272392833,11)+o,c=h(c+y(l,o,u)+d[11]+1839030562,16)+l,u=h(u+y(c,l,o)+d[14]+4259657740,23)+c,o=h(o+y(u,c,l)+d[1]+2763975236,4)+u,l=h(l+y(o,u,c)+d[4]+1272893353,11)+o,c=h(c+y(l,o,u)+d[7]+4139469664,16)+l,u=h(u+y(c,l,o)+d[10]+3200236656,23)+c,o=h(o+y(u,c,l)+d[13]+681279174,4)+u,l=h(l+y(o,u,c)+d[0]+3936430074,11)+o,c=h(c+y(l,o,u)+d[3]+3572445317,16)+l,u=h(u+y(c,l,o)+d[6]+76029189,23)+c,o=h(o+y(u,c,l)+d[9]+3654602809,4)+u,l=h(l+y(o,u,c)+d[12]+3873151461,11)+o,c=h(c+y(l,o,u)+d[15]+530742520,16)+l,u=h(u+y(c,l,o)+d[2]+3299628645,23)+c,o=h(o+v(u,c,l)+d[0]+4096336452,6)+u,l=h(l+v(o,u,c)+d[7]+1126891415,10)+o,c=h(c+v(l,o,u)+d[14]+2878612391,15)+l,u=h(u+v(c,l,o)+d[5]+4237533241,21)+c,o=h(o+v(u,c,l)+d[12]+1700485571,6)+u,l=h(l+v(o,u,c)+d[3]+2399980690,10)+o,c=h(c+v(l,o,u)+d[10]+4293915773,15)+l,u=h(u+v(c,l,o)+d[1]+2240044497,21)+c,o=h(o+v(u,c,l)+d[8]+1873313359,6)+u,l=h(l+v(o,u,c)+d[15]+4264355552,10)+o,c=h(c+v(l,o,u)+d[6]+2734768916,15)+l,u=h(u+v(c,l,o)+d[13]+1309151649,21)+c,o=h(o+v(u,c,l)+d[4]+4149444226,6)+u,l=h(l+v(o,u,c)+d[11]+3174756917,10)+o,c=h(c+v(l,o,u)+d[2]+718787259,15)+l,u=h(u+v(c,l,o)+d[9]+3951481745,21)+c,o=o+M>>>0,u=u+Ot>>>0,c=c+Ut>>>0,l=l+Pt>>>0}return[o,u,c,l].map(x=>("00000000"+x.toString(16)).slice(-8)).join("")}function Ik(s=7){return Math.random().toString(36).substring(s)}function Dk(s){let t=s.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function kk(s){return s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Sk(s,t=30){return s.length>t?s.slice(0,t).trim()+"...":s}function Uk(s,t=500){let e=s.indexOf(".",t);return s.substr(0,e>0?e+1:s.length)}var og={},ag=class s{static exec(t,e,r=1e3,n=!1,i=[]){if(!og[t]){let a=new s(e,r,!0,n);og[t]=a.run}og[t](...i)}constructor(t,e=200,r=!1,n=!1){this.inclusive=!1,this.lastTrigger=0,this.timeout=0,this.callback=t,this.inclusive=n,this.threshold=e,n||(this.lastTrigger=Date.now()),this.run=this.run.bind(this)}run(t=!1){let e=Date.now();e-this.lastTrigger>this.threshold&&(this.lastTrigger=e,this.callback.apply(null,arguments)),this.timeout!==0&&(clearTimeout(this.timeout),this.timeout=0),this.inclusive&&!t&&(this.timeout=setTimeout(()=>this.run(!0),this.threshold))}};function Pk(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function Ak(s,t=document.documentElement){return getComputedStyle(t).getPropertyValue(s).trim()}function Lk(s=""){return s||(s=_.CURRENT_DATE),s?new Date(s):new Date}function qk(s){let t=0;do t+=s.offsetLeft,s=s.offsetParent;while(s);return t}function Hk(s){return s.offsetHeight}function Rk(s){let t=0;do t+=s.offsetTop,s=s.offsetParent;while(s);return t}function Fk(s){return s.offsetWidth}var Bk=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);function Vk(s){return new Promise(t=>setTimeout(t,s))}var $w=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);var ci=class s{static get instance(){return this._instance||(this._instance=new s),this._instance}static add(t,e=16,r=""){let n,i=0,a=0,f=0;return r||(r=Math.random().toString(32).substr(2,6)),t.hasOwnProperty("callback")?(e=t.fps||e,n=t.callback,r=t.name||r,f=t.stopAfter||0):n=t,this.instance.unpause(),this.instance.intervals.push({executions:i,fps:e,func:n,lastTick:a,name:r,stopAfter:f}),r}static fps(t,e,r){return this.instance.intervals.filter(n=>{n.name===t&&(n.fps=e||n.fps,n.func=r||n.func)}),this.instance}static list(){console.log(this.instance.intervals)}static remove(t){this.instance.intervals=this.instance.intervals.filter(e=>e.name!=t)}static start(){this.instance&&this.instance.unpause()}static stop(){this.instance&&this.instance.pause()}constructor(){this.enabled=!1,this.intervals=[],this.lastFrameTime=0,this.Handle_OnRequestAnimationFrame=this.Handle_OnRequestAnimationFrame.bind(this)}pause(){this.enabled=!1}unpause(){this.enabled=!0,this.Handle_OnRequestAnimationFrame()}async Handle_OnRequestAnimationFrame(){if(!this.enabled)return;let t=Date.now();this.intervals.forEach(e=>{if(t-(e.lastTick||0)>e.fps){if(e.stopAfter&&e.executions>=e.stopAfter){s.remove(e.name);return}e.func({}),e.lastTick=t,e.executions++}}),this.lastFrameTime=Date.now(),$w(this.Handle_OnRequestAnimationFrame)}};var ug=class s extends wt.Dispatcher{static add(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),e}static wait(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),new Promise(r=>{e.once("change",n=>{e.stop(),r(n)})})}constructor(t,e=20,r=2e3){super(),this.conditionMetCount=0,this.isVariableSet=!1,this.intervalName="",this.condition=t,this.threshold=e,this.duration=r}reset(){this.conditionMetCount=0}start(){this.intervalName=ci.add(()=>this.checkCondition(),this.duration/this.threshold)}stop(){ci.remove(this.intervalName)}checkCondition(){this.condition()?(this.conditionMetCount=Math.min(this.threshold,this.conditionMetCount+1),this.conditionMetCount>=this.threshold&&!this.isVariableSet&&(this.isVariableSet=!0,this.dispatch("set"),this.dispatch("change",{set:this.isVariableSet}))):(this.conditionMetCount=Math.max(0,this.conditionMetCount-1),this.conditionMetCount<=0&&this.isVariableSet&&(this.isVariableSet=!1,this.dispatch("unset"),this.dispatch("change",{set:this.isVariableSet})))}};var xh=class extends ri{};var zw=z(Et(),1),Nk="1.31.9";var Oe={};g(Oe,{Beacon:()=>zr,Player:()=>jr});var zr=class extends X.Base{constructor(){super(...arguments),this.endpoint="beacons",this.fields=["id","lat","lon","distance","time_ago","status","keepalive","created_at","updated_at"]}getDistance(){return parseFloat(this.attr("distance"))}getKeepAlive(){return parseFloat(this.attr("keepalive"))}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getStatus(){return this.attr("status")}getTimeAgo(){return this.attr("time_ago")}get user(){return this.hasOne("user",X.User)}};var jr=class extends X.Base{constructor(){super(...arguments),this.endpoint="player",this.fields=["id","name","created_at","updated_at"]}getName(){return this.attr("name")}};var Ga=class s extends Ht.Base{constructor(){super(...arguments),this.endpoint="beacons",this.model=new zr}static async search(t,e,r=9999){let n=new s,i=await n.fetch({},{lat:t,lon:e,d:r});return n}};var Za=class extends Ht.Base{constructor(){super(...arguments),this.endpoint="player",this.model=new jr}};var Wr={};g(Wr,{Beacon:()=>wh,Player:()=>vh});var wh={};g(wh,{collection:()=>zk,model:()=>$k});function $k(s={}){return new zr(void 0,Object.assign({baseUrl:_.API_URL_V1},s))}function zk(s={}){return new Ga(Object.assign({baseUrl:_.API_URL_V1},s))}var vh={};g(vh,{collection:()=>Wk,model:()=>jk});function jk(s={}){return new jr(void 0,Object.assign({baseUrl:_.API_URL_V1},s))}function Wk(s={}){return new Za(Object.assign({baseUrl:_.API_URL_V1},s))}var Fg={};g(Fg,{Collection:()=>Fs,Core:()=>xi,Enum:()=>sn,Factory:()=>rn,Model:()=>De});var Fs={};g(Fs,{Live:()=>mu,Schedule:()=>gu});var xi={};g(xi,{ChalkySticks:()=>Ka,Collection:()=>Rt,Constants:()=>I,Core:()=>zh,Enum:()=>bh,Environment:()=>Ce,Event:()=>bt,Exception:()=>hu,Factory:()=>Dh,Input:()=>Ph,Model:()=>J,Provider:()=>di,Request:()=>ov.Request,Utility:()=>Ue,Version:()=>$U});var I={API_URL:"https://api.chalkysticks.com/v3",API_URL_DEV_V1:"http://localhost:8000/v1",API_URL_DEV_V2:"http://localhost:8000/v2",API_URL_V1:"https://api.chalkysticks.com/v1",API_URL_V2:"https://api.chalkysticks.com/v2",API_URL_V3:"https://api.chalkysticks.com/v3",CURRENT_DATE:"",DEFAULT_COLLECTION_LIMIT:20,NOTIFICATION_PREFERENCE:"native",STATIC_URL:"https://static.chalkysticks.com",WALLET_COLLECTION_TIME:60*60*6};var Ka=class{static configure(t={}){let e;Object.assign(I,t.constants)}};var Rt={};g(Rt,{Advertisement:()=>iu,Base:()=>Mt,Content:()=>ou,ContentTag:()=>tu,Media:()=>nu,Meta:()=>fi,Rulebook:()=>au,Statistic:()=>uu,User:()=>cu,Wallet:()=>lu});var J={};g(J,{Advertisement:()=>Qr,Base:()=>ct,Content:()=>Yr,ContentTag:()=>eu,Geocode:()=>su,Media:()=>Gr,Meta:()=>ru,Rulebook:()=>Zr,Statistic:()=>Kr,User:()=>ps,Wallet:()=>ms});var bt={};g(bt,{Bus:()=>R,Dispatcher:()=>li,DispatcherEvent:()=>Xa});var Xa=class{constructor(t,e){this.callbacks=[],this.eventName=t,e&&(this.envelope=e)}clearCallbacks(){this.callbacks=[]}registerCallback(t){this.callbacks.push(t)}unregisterCallback(t){let e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}fire(t){this.callbacks.slice(0).forEach(r=>{r(Object.assign({},this.envelope,t))})}};var li=class{constructor(){this.events={}}dispatch(t,e){let r=this.events[t];r&&r.fire({data:e,event:{name:t,time:Date.now()},target:this})}on(t,e){let r=this.events[t];r||(r=new Xa(t),this.events[t]=r),r.registerCallback(e)}once(t,e){let r=n=>{e(n),this.off(t,r)};this.on(t,r)}off(t,e){let r=this.events[t];r&&!e?(r.clearCallbacks(),delete this.events[t]):r&&e&&r.callbacks.indexOf(e)>-1&&(r.unregisterCallback(e),r.callbacks.length===0&&delete this.events[t])}$emit(t,e={}){return this.dispatch(t,e)}trigger(t,e={}){return this.dispatch(t,e)}$on(t,e){return this.on(t,e)}$off(t,e){return this.off(t,e)}},R=new li;var di={};g(di,{Store:()=>hi});var lg=class{get(){return this.instance||this.register({actions:{},commit:(t,e)=>{},dispatch:(t,e)=>{},getters:{},mutations:{},state:{}}),this.instance}register(t){this.instance=t}},hi=new lg;var hg=class{constructor(){this.id=Math.random().toString(36).substr(2,9)}get app(){return fs.getVariable("app",{apiUrl:"",limit:32,localUrl:""})}get debug(){return fs.getVariable("debug",!1)}get env(){return fs.getVariable("env","development")}get google(){return fs.getVariable("google",{analytics:{id:""},api_key:""})}isLocal(){return fs.env==="local"||fs.env==="development"}isProduction(){return fs.env==="production"}isStaging(){return fs.env==="staging"}getVariable(t,e){let r=typeof window=="object"&&window.env?window.env:{},n=typeof window=="object"&&window.chalky?window.chalky:{};return{...r,...n}[t]||e}},fs=new hg,Ce=fs;var jw=z(Et(),1),ct=class extends jw.Model{constructor(t={},e={}){var r;if(super(t,e),this.baseUrl=Ce.app.apiUrl,this.baseUrl=e.baseUrl||this.baseUrl||Ce.app.apiUrl||I.API_URL,this.setOptions({withCredentials:!1}),e.token)this.setToken(e.token);else{let n=hi.get(),i=((r=n==null?void 0:n.state)==null?void 0:r.token)||(n==null?void 0:n.getters["authentication/token"]);i&&this.setToken(i)}this.attachEvents()}attachEvents(){this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),R.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),R.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={model:this};e===401?(this.dispatch("request:unauthorized",r),R.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),R.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),R.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),R.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),R.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),R.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),R.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}getBaseUrl(){return Ce.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var Qr=class extends ct{constructor(){super(...arguments),this.endpoint="ads",this.fields=["caption","company","image","url"]}getCaption(){return this.attr("caption")}getCompany(){return this.attr("company")}getImage(){return this.attr("image")}getUrl(){return this.attr("url")}};var Ja={};g(Ja,{isYouTube:()=>dg,parseId:()=>fg,thumbnailUrl:()=>Qk,toEmbedUrl:()=>pg});function dg(s){return s.match(/(?:youtube\.com|youtu\.be)/)!==null}function fg(s){let t=s.match(/(?:\?v=|\/embed\/|\/\d+\/|\.be\/)([a-zA-Z0-9_-]+)/);return t?t[1]:""}function Qk(s){return`https://img.youtube.com/vi/${fg(s)}/hqdefault.jpg`}function pg(s){return`https://www.youtube.com/embed/${fg(s)}`}var Yr=class extends ct{constructor(){super(...arguments),this.endpoint="content",this.fields=["title","media_type","media_url","thumbnail_url","content","created_at","updated_at"]}get tags(){return this.hasMany("tags",tu)}getContent(){return this.attr("content")}getMediaType(){return this.attr("media_type")}getMediaUrl(){return this.attr("media_url")}getThumbnailUrl(){return this.attr("thumbnail_url")}getTitle(){return this.attr("title")}getYouTubeEmbed(){return dg(this.getMediaUrl())?pg(this.getMediaUrl()):""}hasContent(){return!!this.getContent()}isImage(){return this.getMediaType()==="image"}isVideo(){return this.getMediaType()==="video"}};var eu=class extends ct{constructor(){super(...arguments),this.fields=["content_id","tag"]}getTag(){return this.attr("tag")}};var su=class s extends ct{constructor(){super(...arguments),this.endpoint="data/geocode",this.fields=["status","results"]}static async search(t){let e=new s;return await e.fetch({},{address:t}),e}getCityAndState(){var n,i;let t=this.getAddressComponents(),e=((n=t.find(a=>a.types.includes("locality")))==null?void 0:n.long_name)||"",r=((i=t.find(a=>a.types.includes("administrative_area_level_1")))==null?void 0:i.short_name)||"";return`${e}, ${r}`}getCountry(){var e;return((e=this.getAddressComponents().find(r=>r.types.includes("country")))==null?void 0:e.long_name)||""}getFullAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.long_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.long_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.long_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.long_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.long_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.long_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getLocation(){let t=0,e=0;if(this.hasResults()){let n=this.getResults()[0].geometry.location;t=n.lat,e=n.lng}return{latitude:t,longitude:e}}getResults(){return this.attr("results")}getShortAddress(){var p,o,u,c,l,h;let t=this.getAddressComponents(),e=((p=t.find(m=>m.types.includes("street_number")))==null?void 0:p.short_name)||"",r=((o=t.find(m=>m.types.includes("route")))==null?void 0:o.short_name)||"",n=((u=t.find(m=>m.types.includes("locality")))==null?void 0:u.short_name)||"",i=((c=t.find(m=>m.types.includes("administrative_area_level_1")))==null?void 0:c.short_name)||"",a=((l=t.find(m=>m.types.includes("country")))==null?void 0:l.short_name)||"",f=((h=t.find(m=>m.types.includes("postal_code")))==null?void 0:h.short_name)||"";return`${e} ${r}, ${n}, ${i}, ${a}, ${f}`.trim().replace(/,\s*$/,"")}getStatus(){return this.attributes.status||""}hasResults(){let t=this.getResults();return t&&t[0]&&t[0].geometry}isOK(){return this.getStatus()==="OK"}getAddressComponents(){return this.getResults()[0].address_components}};var Gr=class extends ct{constructor(){super(...arguments),this.endpoint="media",this.fields=["id","type","url","group","subgroup","created_at","updated_at"],this.proxyUrl="https://d2k0n0ggvekdpx.cloudfront.net"}getGroup(){return this.attr("group")}getSubgroup(){return this.attr("subgroup")}getProxiedUrl(t={width:1024}){let e=this.getUrl(),r=["unsafe"],n=[];if(!e)return e;if(n.push("format(webp)"),t.width||t.height){let i=`${t.width||""}x${t.height||""}`;t.fitIn&&r.push("fit-in"),r.push(i)}if(t.smart&&r.push("smart"),t.filters){if(t.filters.quality&&n.push(`quality(${t.filters.quality})`),t.filters.blur&&n.push(`blur(${t.filters.blur})`),t.filters.brightness&&n.push(`brightness(${t.filters.brightness})`),t.filters.contrast&&n.push(`contrast(${t.filters.contrast})`),t.filters.grayscale&&n.push("grayscale()"),t.filters.watermark){let i=t.filters.watermark;n.push(`watermark(${i.image},${i.x},${i.y},${i.transparency||0})`)}n.length>0&&r.push(`filters:${n.join(":")}`)}return`${this.proxyUrl}/${r.join("/")}/${this.getUrl()}`}getType(){return this.attr("type")}getUrl(){return this.attr("url")}getUrlSmall(){return this.getProxiedUrl({width:256})}getUrlMedium(){return this.getProxiedUrl({width:512})}getUrlLarge(){return this.getProxiedUrl({width:1024})}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var ru=class extends ct{constructor(){super(...arguments),this.fields=["id","group","key","value","created_at","updated_at"]}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var Zr=class extends ct{constructor(){super(...arguments),this.endpoint="rulebooks",this.fields=["content"]}getContent(){return this.attr("content")}};var Kr=class extends ct{constructor(){super(...arguments),this.endpoint="statistics",this.fields=["beacon_count","city_count","venue_count","user_count","video_duration_as_minutes","video_duration_as_hours"]}getBeaconCount(){return this.attr("beacon_count")}getCityCount(){return this.attr("city_count")}getVenueCount(){return this.attr("venue_count")}getUserCount(){return this.attr("user_count")}getVideoDurationAsMinutes(){return this.attr("video_duration_as_minutes")}getVideoDurationAsHours(){return this.attr("video_duration_as_hours")}};var ps=class extends ct{constructor(){super(...arguments),this.endpoint="users",this.fields=["id","lat","lon","name","phone","slug","status","wallet_balance","created_at","updated_at"]}get avatar(){return this.media.primary||new Gr}get games(){return this.hasMany("games",fi)}get lastCollection(){return this.hasOne("last_collection",ms)}get media(){let t=this.hasMany("media",nu);return t.useModifiedEndpoint(this),t}get metadata(){return this.hasMany("meta",fi)}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getName(){return this.attr("name")}getPermissions(){return parseFloat(this.attr("permissions"))}getPhone(){return this.attr("phone")}getSlug(){return this.attr("slug")}getStatus(){return parseFloat(this.attr("status"))}getWalletBalance(){return parseFloat(this.attr("wallet_balance"))}};var ms=class extends ct{constructor(){super(...arguments),this.endpoint="wallet",this.fields=["id","user_id","challenger_id","transaction","source","source_id","created_at","updated_at"]}async collect(t){return this.setHeader("Authorization-API",`Bearer ${t}`),this.setHeader("Content-Type","application/json"),this.id="",this.endpoint="wallet/collect",await this.save(),this}get challenger(){return this.hasOne("challenger",ps)}canCollect(){let t=I.WALLET_COLLECTION_TIME,e=new Date,r=new Date(this.getUpdatedAt());return e.getTime()-r.getTime()>=t}getSource(){return this.attr("source")}getTransaction(){return this.attr("transaction")}getCreatedAt(){return this.attr("created_at")}getUpdatedAt(){return this.attr("updated_at")}};var Ww=z(Et(),1),Mt=class extends Ww.Collection{constructor(t={}){var e;if(super(t),this.baseUrl=Ce.app.apiUrl,this.limit=Ce.app.limit,this.baseUrl=t.baseUrl||this.baseUrl||Ce.app.apiUrl||I.API_URL,this.setOptions({withCredentials:!1}),this.limit=t.limit||this.limit,this.page=t.page||this.page,this.builder.qp("limit",this.limit),this.builder.qp("page",this.page),t.token)this.setToken(t.token);else{let r=hi.get(),n=((e=r==null?void 0:r.state)==null?void 0:e.token)||(r==null?void 0:r.getters["authentication/token"]);n&&this.setToken(n)}this.attachEvents()}attachEvents(){this.on("add:before",t=>{t.detail.model.baseUrl=this.baseUrl}),this.on("requesting",t=>{let e={collection:this};this.dispatch("request:loading",e),R.dispatch("request:loading",e)}),this.on("finish",t=>{let e={collection:this};this.dispatch("request:loaded",e),R.dispatch("request:loaded",e)}),this.on("error",t=>{var n,i,a;let e=((n=t.detail.request)==null?void 0:n.status)||((a=(i=t.detail.request)==null?void 0:i.response)==null?void 0:a.status),r={collection:this};e===401?(this.dispatch("request:unauthorized",r),R.dispatch("request:unauthorized",r)):e===403?(this.dispatch("request:forbidden",r),R.dispatch("request:forbidden",r)):e===405?(this.dispatch("request:not_allowed",r),R.dispatch("request:not_allowed",r)):e===406?(this.dispatch("request:not_acceptable",r),R.dispatch("request:not_acceptable",r)):e===409?(this.dispatch("request:conflict",r),R.dispatch("request:conflict",r)):e===503&&(this.dispatch("request:service_unavailable",r),R.dispatch("request:service_unavailable",r)),this.dispatch("request:error",r),R.dispatch("request:error",r)})}detachEvents(){this.off("requesting"),this.off("finish"),this.off("error")}shouldFetch(){return this.loading?!1:this.models.length===0||this.requestTime<=0}getBaseUrl(){return Ce.app.localUrl||this.baseUrl}isV1(){return this.baseUrl.toLowerCase().indexOf("/v1")>0}isV2(){return this.baseUrl.toLowerCase().indexOf("/v2")>0}isV3(){return this.baseUrl.toLowerCase().indexOf("/v3")>0}};var iu=class extends Mt{constructor(){super(...arguments),this.model=new Qr}};var ou=class extends Mt{constructor(){super(...arguments),this.model=new Yr}news(){return this.tags(["news"])}pad(){return this.tags(["pad"])}tags(t=[]){return this.setQueryParam("tags",t.join(",")),this}tutorials(){return this.tags(["tutorial"])}};var tu=class extends Mt{constructor(){super(...arguments),this.model=new eu}getByTag(t){return this.models.filter(e=>e.getTag()===t)}};var nu=class extends Mt{constructor(){super(...arguments),this.model=new Gr}get images(){return this.models.filter(t=>t.getType()==="image")}get primary(){return this.models.at(0)}get videos(){return this.models.filter(t=>t.getType()==="video")}};var fi=class extends Mt{constructor(){super(...arguments),this.model=new ru}getByKey(t){return this.models.filter(e=>e.getKey()===t)}getByGroup(t){return this.models.filter(e=>e.getGroup()===t)}getKeys(){return this.models.map(t=>t.getKey())}getValues(){return this.models.map(t=>t.getValue())}getValuesByKey(t){return this.getByKey(t).map(e=>e.getValue())}getValuesByGroup(t){return this.getByGroup(t).map(e=>e.getValue())}};var au=class extends Mt{constructor(){super(...arguments),this.model=new Zr}};var uu=class extends Mt{constructor(){super(...arguments),this.model=new Kr}};var cu=class extends Mt{constructor(){super(...arguments),this.model=new ps}};var lu=class extends Mt{constructor(){super(...arguments),this.model=new ms}};var bh={};g(bh,{Achievement:()=>mg,ContentMediaType:()=>gg,ContentType:()=>xg,Currency:()=>yg,MediaGroup:()=>wg,MediaType:()=>vg,ProductType:()=>bg});var mg;(function(s){s.FirstPhoto="first_photo"})(mg||(mg={}));var gg;(function(s){s.Image="image",s.Video="video"})(gg||(gg={}));var xg;(function(s){s.News="news",s.Pad="pool-pad",s.Tutorial="tutorial"})(xg||(xg={}));var yg;(function(s){s.CSX="CSX",s.USD="USD"})(yg||(yg={}));var wg;(function(s){s.Default="",s.Community="community",s.Evaluated="evaluated",s.Inappropriate="inappropriate",s.Unknown="unknown"})(wg||(wg={}));var vg;(function(s){s.Exterior="exterior",s.Interior="interior",s.Person="person",s.Table="table"})(vg||(vg={}));var bg;(function(s){s.Digital="digital",s.Physical="physical"})(bg||(bg={}));var hu={};g(hu,{ConnectionRefused:()=>Mg,Geolocation:()=>_e,InvalidInput:()=>Tg,InvalidRenderer:()=>Eg,InvalidStorageProvider:()=>Og,NotImplemented:()=>Cg,ParserFailure:()=>_g,Unauthorized:()=>Ig});var Mg=class extends Error{};var _e=class extends Error{constructor(t){super(t),this.name="GeolocationError"}};var Tg=class extends Error{};var Eg=class extends Error{};var Og=class extends Error{};var Cg=class extends Error{};var _g=class extends Error{};var Ig=class extends Error{};var Dh={};g(Dh,{Advertisement:()=>Mh,Content:()=>Th,Geocode:()=>Eh,Rulebook:()=>Oh,Statistic:()=>Ch,User:()=>_h,Wallet:()=>Ih});var Mh={};g(Mh,{collection:()=>Gk,model:()=>Yk});function Yk(s={}){return new Qr(void 0,Object.assign({baseUrl:I.API_URL_V3},s))}function Gk(s={}){return new iu(Object.assign({baseUrl:I.API_URL_V3},s))}var Th={};g(Th,{collection:()=>Kk,model:()=>Zk});function Zk(s={}){return new Yr(void 0,Object.assign({baseUrl:I.API_URL_V3},s))}function Kk(s={}){return new ou(Object.assign({baseUrl:I.API_URL_V3},s))}var Eh={};g(Eh,{model:()=>Xk});function Xk(s={}){return new su(void 0,Object.assign({baseUrl:I.API_URL_V1},s))}var Oh={};g(Oh,{collection:()=>tS,model:()=>Jk});function Jk(s={}){return new Zr(void 0,Object.assign({baseUrl:I.API_URL_V3},s))}function tS(s={}){return new au(Object.assign({baseUrl:I.API_URL_V3},s))}var Ch={};g(Ch,{collection:()=>sS,model:()=>eS});function eS(s={}){return new Kr(void 0,Object.assign({baseUrl:I.API_URL_V3},s))}function sS(s={}){return new uu(Object.assign({baseUrl:I.API_URL_V3},s))}var _h={};g(_h,{collection:()=>nS,model:()=>rS});function rS(s={}){return new ps(void 0,Object.assign({baseUrl:I.API_URL_V1},s))}function nS(s={}){return new cu(Object.assign({baseUrl:I.API_URL_V1},s))}var Ih={};g(Ih,{collection:()=>oS,model:()=>iS});function iS(s={}){return new ms(void 0,Object.assign({baseUrl:I.API_URL_V1},s))}function oS(s={}){return new lu(Object.assign({baseUrl:I.API_URL_V1},s))}var Ph={};g(Ph,{Keyboard:()=>Sh,Pointer:()=>Dg,Sensor:()=>Uh,Shortcut:()=>Xr,ShortcutSequencer:()=>kh,Video:()=>kg});var Xr=class extends bt.Dispatcher{static add(t,e){aS.add(t,e)}constructor(t={}){super(),this.keymap={},this.attached=!1,this.keysDown={},this.options={ignoreInputs:!0},Object.assign(this.options,t||{})}add(t,e){this.ensureSetup(),this.keymap[t]=e}remove(t){delete this.keymap[t]}ensureSetup(){this.attached||(this.attached=!0,document.addEventListener("keydown",this.Handle_OnKeyDown.bind(this)),document.addEventListener("keyup",this.Handle_OnKeyUp.bind(this)))}findMatch(){let t=Object.keys(this.keymap);return t=t.sort((e,r)=>{var n,i;return(((n=r.match(/\+/g))==null?void 0:n.length)||0)-(((i=e.match(/\+/g))==null?void 0:i.length)||0)}),t.find(e=>e.replace(/\s+/g,"").toLowerCase().split("+").every(n=>this.keysDown[n.toLowerCase()]))}normalize(t){return t.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("arrow","")}Handle_OnKeyDown(t){let e=t.target;if(!(t instanceof KeyboardEvent)||this.options.ignoreInputs&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"))return;let r=this.normalize(t.key);this.keysDown[r]=!0;let n=this.findMatch()||"",i=this.keymap[n];i&&(this.trigger("shortcut:found",{match:n}),i())}Handle_OnKeyUp(t){if(!(t instanceof KeyboardEvent))return;let e=this.normalize(t.key);delete this.keysDown[e]}},kh=class s extends bt.Dispatcher{static add(t,e){Qw.add(t,e)}static remove(t){Qw.remove(t)}static get instance(){return new s}constructor(){super(),this.matches=[],this.sequences={},this.shortcut=new Xr,this.shortcut.on("shortcut:found",this.Handle_OnShortcutFound.bind(this))}add(t,e){let r=t.join(",");t.forEach(n=>{this.shortcut.add(n,()=>{})}),this.sequences[r]=e}remove(t){let e=t.join(",");t.forEach(r=>{this.shortcut.remove(r)}),delete this.sequences[e]}async Handle_OnShortcutFound(t){let e=t.data.match;this.matches.push(e),this.matches=this.matches.slice(-20);let r=Object.keys(this.sequences).find(i=>{let a=i.split(","),f=this.matches.slice(-a.length);return f.length>=a.length&&f.every((p,o)=>p===a[o])});if(!r)return;let n=this.sequences[r];n&&n()}},aS=new Xr({ignoreInputs:!0}),Qw=new kh;var Sh=class extends bt.Dispatcher{constructor(){super(...arguments),this.shortcut=new Xr({ignoreInputs:!0})}},GW=new Sh;var Dg=class s extends bt.Dispatcher{static start(t="pointer",e=!1){this.instance||(this.instance=new s(t,e))}constructor(t="pointer",e=!1,r=document){super(),this.angle=0,this.changed=!1,this.distance=0,this.down=!1,this.dx=0,this.dy=0,this.friction=.95,this.inertia=0,this.lastX=0,this.lastY=0,this.moved=!1,this.rx=0,this.rx2=0,this.ry=0,this.ry2=0,this.rox=0,this.roy=0,this.rox2=0,this.roy2=0,this.ox=0,this.oy=0,this.time=Date.now(),this.timeDown=0,this.timeDownDifference=0,this.timeDifference=0,this.touches=0,this.vx=0,this.vy=0,this.x=0,this.x2=0,this.y=0,this.y2=0,this.wheel=!1,this.wheelDelta=0,this.moveThreshold=5,this.cid=Math.random().toString(36).substr(2,9),this.eventType="",this.holdTimeout=null,this.initialPinchDistance=0,this.lastPinchDistance=0,this.lastTapTime=0,this.swipeThreshold=50,this.swipeTimeThreshold=300,this.swipeVelocityThreshold=.3,this.tapCount=0,this.tapTimeout=null,this.twoFingerTapCount=0,this.vxHistory=[],this.vyHistory=[],this.Handle_OnInterval=this.Handle_OnInterval.bind(this),this.Handle_OnPointerDown=this.Handle_OnPointerDown.bind(this),this.Handle_OnPointerMove=this.Handle_OnPointerMove.bind(this),this.Handle_OnPointerUp=this.Handle_OnPointerUp.bind(this),this.Handle_OnWheel=this.Handle_OnWheel.bind(this),this.autoTouchEvents=e,this.eventType=t,this.target=r,this.attachEvents()}attachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.addEventListener("touchstart",this.Handle_OnPointerDown),this.target.addEventListener("touchmove",this.Handle_OnPointerMove),this.target.addEventListener("touchend",this.Handle_OnPointerUp)):(this.target.addEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.addEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.addEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.addEventListener("wheel",this.Handle_OnWheel,{passive:!1}),Ue.Interval.add(this.Handle_OnInterval,1e3/60,`${this.cid}-pointer-velocity`)}detachEvents(){typeof window<"u"&&"ontouchstart"in window&&this.autoTouchEvents?(this.target.removeEventListener("touchstart",this.Handle_OnPointerDown),this.target.removeEventListener("touchmove",this.Handle_OnPointerMove),this.target.removeEventListener("touchend",this.Handle_OnPointerUp)):(this.target.removeEventListener(this.downEvent,this.Handle_OnPointerDown),this.target.removeEventListener(this.moveEvent,this.Handle_OnPointerMove),this.target.removeEventListener(this.upEvent,this.Handle_OnPointerUp)),this.target.removeEventListener("wheel",this.Handle_OnWheel),Ue.Interval.remove(`${this.cid}-pointer-velocity`)}applyForMobile(t=!0,e=!0,r=!0){document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",t&&document.addEventListener("touchmove",function(n){n.preventDefault()},{passive:!1}),e&&document.addEventListener("touchend",function(n){n.preventDefault()},!1),r&&document.addEventListener("contextmenu",function(n){n.preventDefault()})}capturePinchZoom(t){document.addEventListener("wheel",e=>{t&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.Handle_OnWheel(e)},{capture:t,passive:!1}),document.body.style.touchAction="pan-x pan-y",document.body.style.userSelect="none"}configureSwipe(t){return t.distanceThreshold!==void 0&&(this.swipeThreshold=t.distanceThreshold),t.timeThreshold!==void 0&&(this.swipeTimeThreshold=t.timeThreshold),t.velocityThreshold!==void 0&&(this.swipeVelocityThreshold=t.velocityThreshold),this}resetRelative(t=0,e=0){return this.rox=this.rox2=this.rx=this.rx2=t,this.roy=this.roy2=this.ry=this.ry2=e,this}get downEvent(){let t="";switch(this.eventType){case"pointer":t="pointerdown";break;case"touch":t="touchstart";break;default:t="mousedown";break}return t}get moveEvent(){let t="";switch(this.eventType){case"pointer":t="pointermove";break;case"touch":t="touchmove";break;default:t="mousemove";break}return t}get upEvent(){let t="";switch(this.eventType){case"pointer":t="pointerup";break;case"touch":t="touchend";break;default:t="mouseup";break}return t}getDistanceBetweenTouches(t){if(t.touches.length<2)return 0;let e=t.touches[0],r=t.touches[1],n=e.pageX-r.pageX,i=e.pageY-r.pageY;return Math.sqrt(n*n+i*i)}async Handle_OnInterval(){let t=this.vx,e=this.vy;this.vx*=this.friction,this.vy*=this.friction,Math.abs(this.vx)<.025&&(this.vx=0),Math.abs(this.vy)<.025&&(this.vy=0),isFinite(this.vx)||(this.vx=0),isFinite(this.vy)||(this.vy=0),this.down||(this.x2+=this.vx*5,this.y2+=this.vy*5,this.rx2+=this.vx*5,this.ry2+=this.vy*5),this.changed=this.vx!==t||this.vy!==e}async Handle_OnPointerDown(t){let e="touches"in t&&t.touches.length===2;if(this.down=!0,this.moved=!1,this.timeDown=Date.now(),this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=this.getDistanceBetweenTouches(t),this.lastPinchDistance=this.initialPinchDistance),this.ox=this.x="touches"in t?t.touches[0].clientX:t.clientX,this.oy=this.y="touches"in t?t.touches[0].clientY:t.clientY,this.dx=0,this.dy=0,this.target!==document){let n=this.target.getBoundingClientRect();this.ox-=n.left,this.oy-=n.top,this.x-=n.left,this.y-=n.top}this.rox=this.rx,this.roy=this.ry,this.rox2=this.rx2,this.roy2=this.ry2,this.dispatch("down",{touches:this.touches,x:this.x,y:this.y});let r={x:this.x,y:this.y};e?(this.twoFingerTapCount++,this.twoFingerTapCount===1&&setTimeout(()=>{this.twoFingerTapCount===1&&!this.down?this.dispatch("twofingertap",r):this.twoFingerTapCount===2&&this.dispatch("twofingerdoubletap",r),this.twoFingerTapCount=0},300)):(this.tapCount++,this.timeDown-this.lastTapTime<300?(clearTimeout(this.tapTimeout),this.dispatch("doubletap",r),this.tapCount=0):this.tapTimeout=setTimeout(()=>{this.tapCount===1&&!this.down&&this.dispatch("tap",r),this.tapCount=0},300),this.lastTapTime=this.timeDown,this.holdTimeout=setTimeout(()=>{this.down&&this.dispatch("hold",r)},500))}async Handle_OnPointerMove(t){if(this.moved&&this.holdTimeout&&clearTimeout(this.holdTimeout),this.touches>1){let e=this.getDistanceBetweenTouches(t),r=e-this.lastPinchDistance,n=e/this.initialPinchDistance;this.dispatch("zoom",{delta:r,isTrackpad:!1,type:"pinch",scale:n}),this.lastPinchDistance=e}if(this.lastX=this.x,this.lastY=this.y,this.x="touches"in t?t.touches[0].clientX:t.clientX,this.y="touches"in t?t.touches[0].clientY:t.clientY,this.target!==document){let e=this.target.getBoundingClientRect();this.x-=e.left,this.y-=e.top}this.currentTarget=t.currentTarget,this.activeTarget=t.target,this.timeDifference=Date.now()-this.time,this.time=Date.now(),this.dispatch("move",{x:this.x,y:this.y}),this.vxHistory.push((this.x-this.lastX)/this.timeDifference),this.vyHistory.push((this.y-this.lastY)/this.timeDifference),this.vxHistory.length>5&&this.vxHistory.shift(),this.vyHistory.length>5&&this.vyHistory.shift(),this.down&&(this.dx=this.x-this.ox,this.dy=this.y-this.oy,this.rx=this.rox+this.dx,this.ry=this.roy+this.dy,this.rx2=this.rox2+this.dx,this.ry2=this.roy2+this.dy,this.angle=Math.atan2(this.dy,this.dx)*(180/Math.PI),this.distance=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.moved=Math.abs(this.distance)>this.moveThreshold,this.x2=this.x,this.y2=this.y,this.timeDownDifference=this.time-this.timeDown,this.inertia=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2)),this.vx=this.vxHistory.reduce((e,r)=>e+r)/(this.vxHistory.length||1),this.vy=this.vyHistory.reduce((e,r)=>e+r)/(this.vyHistory.length||1),this.dispatch("drag",{angle:this.angle,changed:this.changed,distance:this.distance,dx:this.dx,dy:this.dy,inertia:this.inertia,moved:this.moved,ox:this.ox,oy:this.oy,rx:this.rx,ry:this.ry,rx2:this.rx2,ry2:this.ry2,time:this.time,timeDifference:this.timeDifference,timeDown:this.timeDown,timeDownDifference:this.timeDownDifference,touches:this.touches,vx:this.vx,vy:this.vy,x:this.x,y:this.y}))}async Handle_OnPointerUp(t){let e=Date.now()-this.timeDown;if(this.down="touches"in t?t.touches.length>0:!1,this.touches="touches"in t?t.touches.length:1,this.touches>1&&(this.initialPinchDistance=0,this.lastPinchDistance=0),this.dispatch("up",{touches:this.touches,x:this.x,y:this.y}),this.moved&&e<this.swipeTimeThreshold){let r=this.x-this.ox,n=this.y-this.oy,i=Math.sqrt(r*r+n*n),a=i/this.timeDifference;if(i>this.swipeThreshold&&a>this.swipeVelocityThreshold){let f=Math.abs(r)>Math.abs(n)?r>0?"right":"left":n>0?"down":"up";this.dispatch("swipe",{direction:f,distance:i,duration:this.timeDifference,velocity:a}),this.dispatch("swipe:"+f,{direction:f,distance:i,duration:this.timeDifference,velocity:a})}}(this.distance<50||!this.distance)&&this.dispatch("tap:small",{x:this.x,y:this.y,distance:this.distance}),(this.distance<20||!this.distance)&&this.dispatch("tap:xsmall",{x:this.x,y:this.y,distance:this.distance}),this.holdTimeout&&clearTimeout(this.holdTimeout),this.distance=0}async Handle_OnWheel(t){let e=~~(Math.abs(t.wheelDeltaY||1)/Math.abs(t.deltaY||1))>1,r=t.deltaY,n=r>0?"out":"in";Ue.Debounce.exec(this.cid,()=>{this.wheel=!1,this.wheelDelta=0},100,!0),r&&(this.wheel=!0),this.wheelDelta=r,this.dispatch("zoom",{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"}),this.dispatch("zoom:"+n,{delta:r*-1,direction:n,isTrackpad:e,type:"wheel"})}};var Uh=class extends bt.Dispatcher{get hasMotion(){return"ondevicemotion"in window}get hasOrientation(){return"ondeviceorientation"in window}get hasSensors(){return this.hasOrientation&&this.hasMotion}constructor(){super(),this.Handle_OnDeviceMotion=this.Handle_OnDeviceMotion.bind(this),this.Handle_OnDeviceOrientation=this.Handle_OnDeviceOrientation.bind(this),this.attachEvents()}attachEvents(){window.addEventListener("devicemotion",this.Handle_OnDeviceMotion),window.addEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}detachEvents(){window.removeEventListener("devicemotion",this.Handle_OnDeviceMotion),window.removeEventListener("deviceorientation",this.Handle_OnDeviceOrientation)}async Handle_OnDeviceMotion(t){let{acceleration:e,accelerationIncludingGravity:r,rotationRate:n}=t;this.dispatch("gyroscope",n),this.dispatch("accelerometer",e),this.dispatch("accelerometer:gravity",r)}async Handle_OnDeviceOrientation(t){let{absolute:e,alpha:r,beta:n,gamma:i}=t;this.dispatch("orientation",{absolute:e,alpha:r,beta:n,gamma:i})}},tQ=new Uh;var kg=class extends bt.Dispatcher{static async getSources(){return(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput").map(r=>({deviceId:r.deviceId,label:r.label}))}};var Ue={};g(Ue,{Analytics:()=>Ah,Cache:()=>du,Debounce:()=>Hg,Device:()=>Lh,Easing:()=>Rs,EasingFunction:()=>K,Format:()=>qh,Geolocation:()=>Bh,Hysteresis:()=>Rg,Interval:()=>gi,Math:()=>Rh,Presentation:()=>Vh,Share:()=>Nh,String:()=>$h,YouTube:()=>Ja,documentHeight:()=>AU,getCSSVariable:()=>LU,getDate:()=>qU,getEasingMethod:()=>fu,offsetHeight:()=>RU,offsetLeft:()=>HU,offsetTop:()=>FU,offsetWidth:()=>BU,requestAnimationFrame:()=>VU,sleep:()=>NU});var Ah={};g(Ah,{embedGoogleAnalytics:()=>uS,embedMetaPixel:()=>lS,embedRedditPixel:()=>cS});function uS(s){if(window.gtag){console.warn("Analytics is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+s,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],console.log("GA:",s),window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date),gtag("config",s)}function cS(s,t={}){if(window.rdt){console.warn("Reddit pixel is already embedded");return}let e=document.createElement("script");e.async=!0,e.src="https://www.redditstatic.com/ads/pixel.js";let r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r),window.rdt=function(){window.rdt.sendEvent?window.rdt.sendEvent(...arguments):window.rdt.callQueue.push(arguments)},window.rdt.callQueue=[],console.log("RP:",s),rdt("init",s,t),rdt("track","PageVisit")}function lS(s){if(window.fbq){console.warn("Facebook pixel is already embedded");return}let t=document.createElement("script");t.async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js";let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod(...arguments):window.fbq.queue.push(arguments)},window._fbq||(window._fbq=window.fbq),window.fbq.push=window.fbq,window.fbq.queue=[],window.fbq.loaded=!0,window.fbq.version="2.0",console.log("MP:",s),fbq("init",s),fbq("track","PageView")}var Lh={};g(Lh,{getBrowserName:()=>Jr,getBrowserVersion:()=>wS,getOrientation:()=>mS,getScreenHeight:()=>yS,getScreenWidth:()=>xS,isAndroid:()=>fS,isChrome:()=>MS,isEdge:()=>bS,isFirefox:()=>TS,isIE:()=>vS,isIOS:()=>dS,isLandscape:()=>Sg,isMobile:()=>hS,isOpera:()=>OS,isPortrait:()=>pS,isSafari:()=>ES,isTouchDevice:()=>gS,userAgent:()=>pi});function pi(){return navigator.userAgent}function hS(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(pi())}function dS(){return/iphone|ipad|ipod/i.test(pi())}function fS(){return/android/i.test(pi())}function Sg(){return window.orientation===90||window.orientation===-90}function pS(){return!Sg()}function mS(){return Sg()?"landscape":"portrait"}function gS(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function xS(){return window.screen.width}function yS(){return window.screen.height}function Jr(){let s=pi();return s.indexOf("firefox")>-1?"Firefox":s.indexOf("opera")>-1||s.indexOf("opr")>-1?"Opera":s.indexOf("chrome")>-1?"Chrome":s.indexOf("safari")>-1?"Safari":s.indexOf("msie")>-1||s.indexOf("trident")>-1?"Internet Explorer":"Unknown"}function wS(){let s=pi(),t=s.match(/version\/(\d+)/i);return t===null&&(t=s.match(/(?:msie |rv:)(\d+)/)),t===null&&(t=s.match(/(?:chrome|safari|firefox|opera|opr|edge)\/(\d+)/i)),t===null?"Unknown":t[1]}function vS(){return Jr()==="Internet Explorer"}function bS(){return Jr()==="Edge"}function MS(){return Jr()==="Chrome"}function TS(){return Jr()==="Firefox"}function ES(){return Jr()==="Safari"}function OS(){return Jr()==="Opera"}var qh={};g(qh,{bytesToSize:()=>CS,daysBetweenDates:()=>_S,getRelativeTime:()=>Ug,secondsToTime:()=>IS,timeAgo:()=>SS,timeToHuman:()=>kS,timeToSeconds:()=>DS,timeUntil:()=>US});function CS(s){let t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s==0)return"0 Byte";let e=parseInt(Math.floor(Math.log(s)/Math.log(1024)).toString());return Math.round(s/Math.pow(1024,e))+" "+t[e]}function _S(s,t){let e=Math.abs(t.getTime()-s.getTime());return Math.ceil(e/(1e3*3600*24))}function IS(s,t="00:00:00"){let e=new Date(0);switch(e.setSeconds(s),t){case"00:00:00":return e.toISOString().substr(11,8);case"00:00":return e.toISOString().substr(14,5);case"00":return e.toISOString().substr(17,2)}return e.toISOString().substr(11,8)}function DS(s){let[t,e,r]=s.split(":").map(Number);return t*3600+e*60+r}function Yw(s){if(s instanceof Date)return isNaN(s.getTime())?null:s;if(typeof s=="string"){let t=new Date(s);if(!isNaN(t.getTime()))return t;let e=s.split(":").map(Number);if(e.length===3&&e.every(r=>!isNaN(r))){let r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),e[0],e[1],e[2])}}return typeof s=="number"?s<9466848e5?new Date(Date.now()+s*1e3):new Date(s):null}function kS(s,t=!1){let e;if(typeof s=="string"){let a=s.split(":").map(Number);if(a.length===3&&a.every(f=>!isNaN(f)))e=a[0]*3600+a[1]*60+a[2];else{let f=Yw(s);if(!f)return"";e=Math.floor((f.getTime()-Date.now())/1e3)}}else s instanceof Date?e=Math.floor((s.getTime()-Date.now())/1e3):s>9466848e5?e=Math.floor((s-Date.now())/1e3):e=s;let r=Math.floor(Math.abs(e)/3600),n=Math.floor(Math.abs(e)%3600/60),i=Math.floor(Math.abs(e)%60);if(t){let a=[];return r>0&&a.push(`${r}h`),n>0&&a.push(`${n}m`),i>0&&a.push(`${i}s`),a.join(" ")||"0s"}return`${r}h ${n}m ${i}s`}function Ug(s,t={}){let e=Yw(s);if(!e)return"";let{type:r="ago",suffix:n="",shortUnits:i=!1}=t,a=new Date,f=e<a,p=Math.abs(r==="ago"?a.getTime()-e.getTime():e.getTime()-a.getTime()),o=Math.floor(p/1e3),u={year:31536e3,month:2592e3,day:86400,hour:3600,minute:60,second:1},c={year:i?"y":"year",month:i?"mo":"month",day:i?"d":"day",hour:i?"h":"hour",minute:i?"m":"minute",second:i?"s":"second"};for(let[h,m]of Object.entries(u)){let w=o/m;if(w>=1){let y=Math.floor(w),v=c[h],x=!i&&y!==1?v+"s":v,d=`${y} ${x}`;return n?`${d} ${n}`.trim():d}}let l=i?"0s":"0 seconds";return n?`${l} ${n}`.trim():l}function SS(s,t="ago",e="ago"){return Ug(s,{suffix:"ago",type:"ago"})}function US(s,t="until",e="left"){return Ug(s,{suffix:"left",type:"until"})}var Bh={};g(Bh,{CACHE_EXPIRATION:()=>gs,cache:()=>xs,clearWatch:()=>lU,config:()=>sv,distanceBetween:()=>pU,getBearing:()=>mU,getBounds:()=>gU,getLocation:()=>uU,isPointInBounds:()=>xU,simplifyCoordinates:()=>yU,watchLocation:()=>cU});var du=class{constructor(t=-1){this.storage={},this.ttl=t>0?t:0}all(){let t=Object.keys(this.storage),e={},r;for(let n of t)r=this.get(n),r!==void 0&&(e[n]=this.get(n));return e}delete(t){this.storage[t]&&delete this.storage[t]}get(t){let e=this.storage[t],r;return e?e.ttl===0?(r=e.value,this.delete(t)):this.isCachedItemHealthy(e)&&(r=e.value):r=void 0,r}exists(t){return this.storage[t]!==void 0}has(t){return this.get(t)!==void 0}set(t,e,r=0,n=!1){let i=this.has(t),a=Date.now();return i&&this.isImmutable(t)?!1:(this.storage[t]={immutable:n,time:a,ttl:r,value:e},!0)}isCachedItemHealthy(t){let e=Date.now(),r=t.time,n=t.ttl;return r+n>e}isImmutable(t){let e=this.storage[t];return!!(e!=null&&e.immutable)}};var Rh={};g(Rh,{EARTH_RADIUS:()=>Hh,FOOT_METER_RATIO:()=>Pg,MPH_METER_RATIO:()=>Ag,angle:()=>Gw,angleAsDegrees:()=>PS,angleDifference:()=>Zw,angleDifferenceAsDegrees:()=>AS,angleFromVector:()=>LS,angleFromVectors:()=>qS,angleNormalize:()=>HS,clamp:()=>mi,clampUnsigned:()=>Kw,degreesToSlope:()=>RS,denormalize:()=>FS,distance:()=>BS,dot:()=>VS,feetToMeters:()=>NS,inverseLerp:()=>Xw,lerp:()=>Jw,logarithmicZoom:()=>$S,metersToFeet:()=>zS,minMax:()=>jS,minMaxUnsigned:()=>WS,mphToMs:()=>QS,msToMph:()=>YS,normalize:()=>GS,randomInt:()=>KS,randomRange:()=>tv,randomSign:()=>XS,remap:()=>ZS,rotate:()=>ev,rotateDeg:()=>JS,round:()=>tU,roundToDecimal:()=>rU,roundToNearest:()=>eU,roundToNearestFraction:()=>sU,slopeToDegrees:()=>nU,smootherstep:()=>oU,smoothstep:()=>iU,toDegrees:()=>tn,toRadians:()=>Yt,transformRatio:()=>aU});var K=class{static linear(t){return t}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}static easeInCubic(t){return t*t*t}static easeOutCubic(t){return--t*t*t+1}static easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}static easeInQuart(t){return t*t*t*t}static easeOutQuart(t){return 1- --t*t*t*t}static easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}static easeInQuint(t){return t*t*t*t*t}static easeOutQuint(t){return 1+--t*t*t*t*t}static easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}static easeInSine(t){return 1-Math.cos(t*Math.PI/2)}static easeOutSine(t){return Math.sin(t*Math.PI/2)}static easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}static easeInExpo(t){return t===0?0:Math.pow(2,10*(t-1))}static easeOutExpo(t){return t===1?1:-Math.pow(2,-10*t)+1}static easeInOutExpo(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)}static easeInCirc(t){return-(Math.sqrt(1-t*t)-1)}static easeOutCirc(t){return Math.sqrt(1- --t*t)}static easeInOutCirc(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static easeInBack(t,e=1.70158){return t*t*((e+1)*t-e)}static easeOutBack(t,e=1.70158){return--t*t*((e+1)*t+e)+1}static easeInOutBack(t,e=1.70158){return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)}},Rs=class s{static linear(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.linear,n)}static easeInQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInQuad,n)}static easeOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeOutQuad,n)}static easeInOutQuad(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInOutQuad,n)}static easeInQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInQuart,n)}static easeOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeOutQuart,n)}static easeInOutQuart(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInOutQuart,n)}static easeInQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInQuint,n)}static easeOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeOutQuint,n)}static easeInOutQuint(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInOutQuint,n)}static easeInCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInCubic,n)}static easeOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeOutCubic,n)}static easeInOutCubic(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInOutCubic,n)}static easeInSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInSine,n)}static easeOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeOutSine,n)}static easeInOutSine(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInOutSine,n)}static easeInExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInExpo,n)}static easeOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeOutExpo,n)}static easeInOutExpo(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInOutExpo,n)}static easeInCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInCirc,n)}static easeOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeOutCirc,n)}static easeInOutCirc(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInOutCirc,n)}static easeInBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInBack,n)}static easeOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeOutBack,n)}static easeInOutBack(t,e=0,r=1,n=!0){return s.normalize(t,e,r,K.easeInOutBack,n)}static normalize(t,e=0,r=1,n,i=!0){let a=s.clamp((t-e)/(r-e),0,1);return i?n(a):e+(r-e)*n(a)}static clamp(t,e=0,r=1){return Math.min(Math.max(t,e),r)}};function fu(s){return Rs.hasOwnProperty(s)?Rs[s]:Rs.easeInOutQuad}var Hh=6371,Pg=3.28084,Ag=.44704;function Gw(s,t,e,r){return Math.atan2(r-t,e-s)}function PS(s,t,e,r){return Gw(s,t,e,r)*180/Math.PI}function Zw(s,t){return Math.atan2(Math.sin(t-s),Math.cos(t-s))}function AS(s,t){return Zw(s,t)*180/Math.PI}function LS(s){return Math.atan2(s.y,s.x)}function qS(s,t){return Math.atan2(t.y-s.y,t.x-s.x)}function HS(s){return s=s%360,s<0&&(s+=360),s}function mi(s,t,e){return Math.min(Math.max(s,t),e)}function Kw(s,t,e){return[t,e]=[Math.min(t,e),Math.max(t,e)],Math.sign(s)*Math.min(Math.abs(s),Math.abs(s)>t?e:t)}function RS(s){return Math.tan(s*(Math.PI/180))}function FS(s,t,e,r=!1){let n=s*(e-t)+t;return r&&(n=mi(n,t,e)),n}function BS(s,t,e,r){return Math.sqrt((e-s)**2+(r-t)**2)}function VS(s,t,e,r){return s*e+t*r}function NS(s){return s/Pg}function Xw(s,t,e){return(e-s)/(t-s)}function Jw(s,t,e){return s+(t-s)*e}function $S(s,t,e=.025){let r=Math.log(s),n=Math.log(t+1)||0;return Math.exp(r+n*e)}function zS(s){return s*Pg}function jS(s,t,e){return mi(s,t,e)}function WS(s,t,e){return Kw(s,t,e)}function QS(s){return s*Ag}function YS(s){return s/Ag}function GS(s,t,e,r=!1){let n=(s-t)/(e-t);return r&&(n=mi(n,t,e)),n}function ZS(s,t,e,r,n){return r+(n-r)*Xw(t,e,s)}function tv(s,t){return Jw(s,t,Math.random())}function KS(s,t){return Math.floor(tv(s,t+1))}function XS(){return Math.random()<.5?-1:1}function ev(s,t,e){let r=Math.sin(e),n=Math.cos(e);return[s*n-t*r,s*r+t*n]}function JS(s,t,e){return ev(s,t,e*Math.PI/180)}function tU(s,t=2){return Number(s.toFixed(t))}function eU(s,t){return Math.round(s/t)*t}function sU(s,t){return Math.round(s*t)/t}function rU(s,t){return Math.round(s*10**t)/10**t}function nU(s){return Math.atan(s)*(180/Math.PI)}function iU(s,t,e){let r=mi((e-s)/(t-s),0,1);return r*r*(3-2*r)}function oU(s,t,e){let r=mi((e-s)/(t-s),0,1);return r*r*r*(r*(r*6-15)+10)}function Yt(s){return s*Math.PI/180}function tn(s){return s*180/Math.PI}function aU(s,t=4,e="linear",r=""){r||(r=e);let n=fu(e),i=fu(r);return s<=1/t?n(s/(1/t)):s<=1-1/t?1:i((1-s)/(1/t))}var sv={IP_LOCATION_API:"https://ipapi.co/json/"},gs=1e3*6*2,xs=new du(gs);async function uU(){let s="geolocation",t=xs.get(s);if(t)return t;try{return navigator!=null&&navigator.geolocation?await hU(s):await wU()?await dU(s):await fU(s)}catch(e){throw e instanceof Error?e:new _e("Unknown error occurred")}}function cU(s,t,e={enableHighAccuracy:!0}){let r="geolocation";return navigator!=null&&navigator.geolocation?navigator.geolocation.watchPosition(n=>{let i=en(n);xs.set(r,i,gs),R.dispatch("location:change",i),s==null||s(i)},async n=>{try{let i=await Fh(),a=en(i);xs.set(r,a,gs),R.dispatch("location:change",a),s==null||s(a)}catch(i){R.dispatch("location:error",n),t==null||t(n)}},e):0}function lU(s){try{if(!(navigator!=null&&navigator.geolocation))throw new _e("Geolocation is not supported by this browser.");navigator.geolocation.clearWatch(s)}catch(t){console.error("Error clearing geolocation watch:",t)}}async function hU(s){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(r=>{let n=en(r);xs.set(s,n,gs),console.info("\u{1F538} Location",n),R.dispatch("location:change",n),t(n)},async r=>{if(console.warn("Browser geolocation error:",r),r.code===r.PERMISSION_DENIED)e(new _e("Permission denied for geolocation."));else if(r.code===r.POSITION_UNAVAILABLE)e(new _e("Geolocation position unavailable."));else if(r.code===r.TIMEOUT)e(new _e("Geolocation request timed out."));else try{let n=await Fh(),i=en(n);xs.set(s,i,gs),console.info("\u{1F53A} Location",i),R.dispatch("location:change",i),t(i)}catch(n){e(new _e("Fallback IP location failed."))}})})}async function dU(s){try{let{Geolocation:t}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1)),e=await t.getCurrentPosition(),r=en(e);return xs.set(s,r,gs),console.info("\u{1F539} Location",r),R.dispatch("location:change",r),r}catch(t){try{let e=await Fh(),r=en(e);return xs.set(s,r,gs),console.info("\u{1F53A} Location",r),R.dispatch("location:change",r),r}catch(e){throw R.dispatch("location:error",t),t}}}async function fU(s){try{let t=await Fh(),e=en(t);return xs.set(s,e,gs),console.info("\u{1F53A} Location",e),R.dispatch("location:change",e),e}catch(t){throw R.dispatch("location:error",t),new _e("Failed to get IP location")}}async function Fh(){let t=await(await fetch(sv.IP_LOCATION_API)).json();return{coords:{accuracy:5e3,altitude:null,altitudeAccuracy:null,heading:null,latitude:t.latitude,longitude:t.longitude,speed:null},timestamp:Date.now()}}function en(s){return{position:s,timestamp:Date.now()}}function pU(s,t,e,r){let n=Hh,i=Yt(e-s),a=Yt(r-t),f=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Yt(s))*Math.cos(Yt(e))*Math.sin(a/2)*Math.sin(a/2),p=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return n*p}function mU(s,t,e,r){let n=Yt(r-t),i=Math.sin(n)*Math.cos(Yt(e)),a=Math.cos(Yt(s))*Math.sin(Yt(e))-Math.sin(Yt(s))*Math.cos(Yt(e))*Math.cos(n);return(tn(Math.atan2(i,a))+360)%360}function gU(s,t,e){let r=Hh,n=Yt(s),i=Yt(t),a=e/r;return{latitudeMin:tn(n-a),latitudeMax:tn(n+a),longitudeMin:tn(i-a/Math.cos(n)),longitudeMax:tn(i+a/Math.cos(n))}}function xU(s,t,e){return s>=e.latitudeMin&&s<=e.latitudeMax&&t>=e.longitudeMin&&t<=e.longitudeMax}function yU(s,t,e=1e3){var a,f;let r,n,i=e;if(typeof s=="number"&&typeof t=="number")r=s,n=t,i=e;else if(Array.isArray(s))[r,n]=s;else if(typeof s=="object")"position"in s?(r=s.position.lat,n=s.position.lng):(r=(a=s==null?void 0:s.latitude)!=null?a:(s==null?void 0:s.lat)||0,n=(f=s==null?void 0:s.longitude)!=null?f:(s==null?void 0:s.lng)||0);else throw new Error("Invalid coordinates format");if(typeof r!="number"||typeof n!="number")throw new Error("Invalid coordinates: latitude and longitude must be numbers");return{latitude:Math.round(r*i)/i,longitude:Math.round(n*i)/i}}async function wU(){try{let{Geolocation:s}=await Promise.resolve().then(()=>z(Xt("@capacitor/geolocation"),1));return!!s}catch(s){return!1}}var Vh={};g(Vh,{castToDevice:()=>MU,isFullscreenActive:()=>bU,toggleFullscreen:()=>vU});function vU(s=document.body){document.fullscreenElement?document.exitFullscreen().catch(t=>{console.error(`Error attempting to exit fullscreen mode: ${t.message}`)}):s.requestFullscreen().catch(t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message}`)})}function bU(){return!!document.fullscreenElement}async function MU(s){if(!("presentation"in navigator)){console.error("Presentation API is not supported in this browser.");return}try{new PresentationRequest([s]).start().then(e=>{console.log("Connected to presentation:",e),e.onterminate=()=>{console.log("Presentation terminated.")}},e=>{console.error("Error starting presentation:",e)})}catch(t){console.error("Error casting to device:",t)}}var Nh={};g(Nh,{canShare:()=>nv,hasSupport:()=>Lg,native:()=>rv,remoteFile:()=>TU});async function rv(s=[],t="",e="",r=""){let n={files:s,text:e,title:t,url:r};if(Lg()===!1)throw new Error("This browser does not support navigator share");if(nv()===!1)throw new Error("Sharing is not supported, make sure you are on HTTPS");return navigator.canShare(n)?(await navigator.share(n),!0):!1}async function TU(s,t="",e="",r=""){let n=await EU(s);return rv([n],t,e,r)}function Lg(){return"share"in navigator}function nv(){return Lg()&&!!navigator.canShare}async function EU(s="",t="my-file.png"){s||(s="https://cdn.glitch.com/f96f78ec-d35d-447b-acf4-86f2b3658491%2Fchuck.png?v=1618311092497");let e=await fetch(s).then(i=>i.blob()),r=e.type.split(";").shift();return new File([e],t,{type:r})}var $h={};g($h,{basicHash:()=>OU,capitalize:()=>CU,chunkSentences:()=>_U,md5:()=>IU,random:()=>DU,shuffle:()=>kU,slug:()=>SU,trimSentences:()=>PU,truncate:()=>UU});function OU(s){return s.split("").reduce((t,e)=>(t=(t<<5)-t+e.charCodeAt(0),t&t),0).toString()}function CU(s){return s.charAt(0).toUpperCase()+s.slice(1)}function _U(s,t=130){let e=s.replace(/\.$/,"").split(". "),r=[];return e.forEach(n=>{r.length===0||r[r.length-1].length>t?r.push(n+"."):(n=n.trim(),r[r.length-1]+=` ${n}.`)}),r}function IU(s){let t="0123456789abcdef",e=new TextEncoder().encode(s),r=e.length*8,n=(448-(e.length*8+1)%512+512)%512,i=e.length+Math.ceil(n/8)+8,a=new Uint8Array(i);a.set(e),a[e.length]=128;let f=new DataView(a.buffer);f.setUint32(i-8,r>>>0,!0),f.setUint32(i-4,Math.floor(r/4294967296),!0);let p=new Uint32Array(i/4);for(let x=0;x<i;x+=4)p[x/4]=f.getUint32(x,!0);let o=1732584193,u=4023233417,c=2562383102,l=271733878;function h(x,d){return x<<d|x>>>32-d}function m(x,d,M){return x&d|~x&M}function w(x,d,M){return x&M|d&~M}function y(x,d,M){return x^d^M}function v(x,d,M){return d^(x|~M)}for(let x=0;x<p.length;x+=16){let d=p.slice(x,x+16),[M,Ot,Ut,Pt]=[o,u,c,l];o=h(o+m(u,c,l)+d[0]+3614090360,7)+u,l=h(l+m(o,u,c)+d[1]+3905402710,12)+o,c=h(c+m(l,o,u)+d[2]+606105819,17)+l,u=h(u+m(c,l,o)+d[3]+3250441966,22)+c,o=h(o+m(u,c,l)+d[4]+4118548399,7)+u,l=h(l+m(o,u,c)+d[5]+1200080426,12)+o,c=h(c+m(l,o,u)+d[6]+2821735955,17)+l,u=h(u+m(c,l,o)+d[7]+4249261313,22)+c,o=h(o+m(u,c,l)+d[8]+1770035416,7)+u,l=h(l+m(o,u,c)+d[9]+2336552879,12)+o,c=h(c+m(l,o,u)+d[10]+4294925233,17)+l,u=h(u+m(c,l,o)+d[11]+2304563134,22)+c,o=h(o+m(u,c,l)+d[12]+1804603682,7)+u,l=h(l+m(o,u,c)+d[13]+4254626195,12)+o,c=h(c+m(l,o,u)+d[14]+2792965006,17)+l,u=h(u+m(c,l,o)+d[15]+1236535329,22)+c,o=h(o+w(u,c,l)+d[1]+4129170786,5)+u,l=h(l+w(o,u,c)+d[6]+3225465664,9)+o,c=h(c+w(l,o,u)+d[11]+643717713,14)+l,u=h(u+w(c,l,o)+d[0]+3921069994,20)+c,o=h(o+w(u,c,l)+d[5]+3593408605,5)+u,l=h(l+w(o,u,c)+d[10]+38016083,9)+o,c=h(c+w(l,o,u)+d[15]+3634488961,14)+l,u=h(u+w(c,l,o)+d[4]+3889429448,20)+c,o=h(o+w(u,c,l)+d[9]+568446438,5)+u,l=h(l+w(o,u,c)+d[14]+3275163606,9)+o,c=h(c+w(l,o,u)+d[3]+4107603335,14)+l,u=h(u+w(c,l,o)+d[8]+1163531501,20)+c,o=h(o+w(u,c,l)+d[13]+2850285829,5)+u,l=h(l+w(o,u,c)+d[2]+4243563512,9)+o,c=h(c+w(l,o,u)+d[7]+1735328473,14)+l,u=h(u+w(c,l,o)+d[12]+2368359562,20)+c,o=h(o+y(u,c,l)+d[5]+4294588738,4)+u,l=h(l+y(o,u,c)+d[8]+2272392833,11)+o,c=h(c+y(l,o,u)+d[11]+1839030562,16)+l,u=h(u+y(c,l,o)+d[14]+4259657740,23)+c,o=h(o+y(u,c,l)+d[1]+2763975236,4)+u,l=h(l+y(o,u,c)+d[4]+1272893353,11)+o,c=h(c+y(l,o,u)+d[7]+4139469664,16)+l,u=h(u+y(c,l,o)+d[10]+3200236656,23)+c,o=h(o+y(u,c,l)+d[13]+681279174,4)+u,l=h(l+y(o,u,c)+d[0]+3936430074,11)+o,c=h(c+y(l,o,u)+d[3]+3572445317,16)+l,u=h(u+y(c,l,o)+d[6]+76029189,23)+c,o=h(o+y(u,c,l)+d[9]+3654602809,4)+u,l=h(l+y(o,u,c)+d[12]+3873151461,11)+o,c=h(c+y(l,o,u)+d[15]+530742520,16)+l,u=h(u+y(c,l,o)+d[2]+3299628645,23)+c,o=h(o+v(u,c,l)+d[0]+4096336452,6)+u,l=h(l+v(o,u,c)+d[7]+1126891415,10)+o,c=h(c+v(l,o,u)+d[14]+2878612391,15)+l,u=h(u+v(c,l,o)+d[5]+4237533241,21)+c,o=h(o+v(u,c,l)+d[12]+1700485571,6)+u,l=h(l+v(o,u,c)+d[3]+2399980690,10)+o,c=h(c+v(l,o,u)+d[10]+4293915773,15)+l,u=h(u+v(c,l,o)+d[1]+2240044497,21)+c,o=h(o+v(u,c,l)+d[8]+1873313359,6)+u,l=h(l+v(o,u,c)+d[15]+4264355552,10)+o,c=h(c+v(l,o,u)+d[6]+2734768916,15)+l,u=h(u+v(c,l,o)+d[13]+1309151649,21)+c,o=h(o+v(u,c,l)+d[4]+4149444226,6)+u,l=h(l+v(o,u,c)+d[11]+3174756917,10)+o,c=h(c+v(l,o,u)+d[2]+718787259,15)+l,u=h(u+v(c,l,o)+d[9]+3951481745,21)+c,o=o+M>>>0,u=u+Ot>>>0,c=c+Ut>>>0,l=l+Pt>>>0}return[o,u,c,l].map(x=>("00000000"+x.toString(16)).slice(-8)).join("")}function DU(s=7){return Math.random().toString(36).substring(s)}function kU(s){let t=s.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function SU(s){return s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function UU(s,t=30){return s.length>t?s.slice(0,t).trim()+"...":s}function PU(s,t=500){let e=s.indexOf(".",t);return s.substr(0,e>0?e+1:s.length)}var qg={},Hg=class s{static exec(t,e,r=1e3,n=!1,i=[]){if(!qg[t]){let a=new s(e,r,!0,n);qg[t]=a.run}qg[t](...i)}constructor(t,e=200,r=!1,n=!1){this.inclusive=!1,this.lastTrigger=0,this.timeout=0,this.callback=t,this.inclusive=n,this.threshold=e,n||(this.lastTrigger=Date.now()),this.run=this.run.bind(this)}run(t=!1){let e=Date.now();e-this.lastTrigger>this.threshold&&(this.lastTrigger=e,this.callback.apply(null,arguments)),this.timeout!==0&&(clearTimeout(this.timeout),this.timeout=0),this.inclusive&&!t&&(this.timeout=setTimeout(()=>this.run(!0),this.threshold))}};function AU(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function LU(s,t=document.documentElement){return getComputedStyle(t).getPropertyValue(s).trim()}function qU(s=""){return s||(s=I.CURRENT_DATE),s?new Date(s):new Date}function HU(s){let t=0;do t+=s.offsetLeft,s=s.offsetParent;while(s);return t}function RU(s){return s.offsetHeight}function FU(s){let t=0;do t+=s.offsetTop,s=s.offsetParent;while(s);return t}function BU(s){return s.offsetWidth}var VU=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);function NU(s){return new Promise(t=>setTimeout(t,s))}var iv=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):s=>setTimeout(()=>s(Date.now()),16);var gi=class s{static get instance(){return this._instance||(this._instance=new s),this._instance}static add(t,e=16,r=""){let n,i=0,a=0,f=0;return r||(r=Math.random().toString(32).substr(2,6)),t.hasOwnProperty("callback")?(e=t.fps||e,n=t.callback,r=t.name||r,f=t.stopAfter||0):n=t,this.instance.unpause(),this.instance.intervals.push({executions:i,fps:e,func:n,lastTick:a,name:r,stopAfter:f}),r}static fps(t,e,r){return this.instance.intervals.filter(n=>{n.name===t&&(n.fps=e||n.fps,n.func=r||n.func)}),this.instance}static list(){console.log(this.instance.intervals)}static remove(t){this.instance.intervals=this.instance.intervals.filter(e=>e.name!=t)}static start(){this.instance&&this.instance.unpause()}static stop(){this.instance&&this.instance.pause()}constructor(){this.enabled=!1,this.intervals=[],this.lastFrameTime=0,this.Handle_OnRequestAnimationFrame=this.Handle_OnRequestAnimationFrame.bind(this)}pause(){this.enabled=!1}unpause(){this.enabled=!0,this.Handle_OnRequestAnimationFrame()}async Handle_OnRequestAnimationFrame(){if(!this.enabled)return;let t=Date.now();this.intervals.forEach(e=>{if(t-(e.lastTick||0)>e.fps){if(e.stopAfter&&e.executions>=e.stopAfter){s.remove(e.name);return}e.func({}),e.lastTick=t,e.executions++}}),this.lastFrameTime=Date.now(),iv(this.Handle_OnRequestAnimationFrame)}};var Rg=class s extends bt.Dispatcher{static add(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),e}static wait(t){let e=new s(t.condition,t.threshold||1,t.duration||25);return e.start(),new Promise(r=>{e.once("change",n=>{e.stop(),r(n)})})}constructor(t,e=20,r=2e3){super(),this.conditionMetCount=0,this.isVariableSet=!1,this.intervalName="",this.condition=t,this.threshold=e,this.duration=r}reset(){this.conditionMetCount=0}start(){this.intervalName=gi.add(()=>this.checkCondition(),this.duration/this.threshold)}stop(){gi.remove(this.intervalName)}checkCondition(){this.condition()?(this.conditionMetCount=Math.min(this.threshold,this.conditionMetCount+1),this.conditionMetCount>=this.threshold&&!this.isVariableSet&&(this.isVariableSet=!0,this.dispatch("set"),this.dispatch("change",{set:this.isVariableSet}))):(this.conditionMetCount=Math.max(0,this.conditionMetCount-1),this.conditionMetCount<=0&&this.isVariableSet&&(this.isVariableSet=!1,this.dispatch("unset"),this.dispatch("change",{set:this.isVariableSet})))}};var zh=class extends li{};var ov=z(Et(),1),$U="1.31.9";var De={};g(De,{Channel:()=>pu,Schedule:()=>Ie});var pu=class extends J.Base{constructor(){super(...arguments),this.endpoint="tv/channel",this.fields=["id","channel_id","youtube_id","title","description","image_url"]}getDescription(){return this.attr("description")}getThumbnail(){return this.attr("image_url")}getTitle(){return this.attr("title")}getUrl(){return`https://www.youtube.com/channel/${this.attr("youtube_id")}`}};var Ie=class extends J.Base{constructor(){super(...arguments),this.endpoint="tv/schedule",this.fields=["id","title","description","duration","video_meta","embed_url","thumbnail_url","is_live","air_at","created_at"]}get channel(){return this.hasOne("channel",pu)}generateVideoMarkup(t=0){return`<iframe width="100%" height="100%" src="${this.generateVideoUrl(t)}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}generateVideoUrl(t=0){return`https://www.youtube.com/embed/${this.getVideoId()}?autoplay=1&mute=1&start=${t}&rel=0&showinfo=0&controls=0&iv_load_policy=3&modestbranding=1&enablejsapi=1&origin=${window.location.origin}`}getDescription(){return this.attr("description")}getDuration(){return parseFloat(this.attr("duration"))}getEmbedUrl(){return this.attr("embed_url")}getMeta(){let t=this.attr("video_meta");return typeof t=="string"?JSON.parse(t):t}getThumbnail(t="medium"){return this.isYouTube()?this.getYouTubeThumbnail(this.getVideoId(),t):this.attr("thumbnail_url")}getTitle(){return this.attr("title")}getVideoId(){let t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??(?:v=)?([^#\&\?]*).*/,e=this.getEmbedUrl().match(t);return e&&e[7].length==11?e[7]:""}isLive(){return!!this.attr("is_live")}isFacebook(){return!!(this.getEmbedUrl()||"").match(/facebook\.com/)}isYouTube(){return!!(this.getEmbedUrl()||"").match(/youtube\.com/)}getYouTubeThumbnail(t,e="default"){let r={default:"0",high:"hqdefault",maxres:"maxresdefault",medium:"mqdefault",standard:"sddefault"},n=r[e]||r.default;return`https://img.youtube.com/vi/${t}/${n}.jpg`}};var mu=class extends Rt.Base{constructor(){super(...arguments),this.endpoint="tv/live",this.model=new Ie}};var gu=class extends Rt.Base{constructor(){super(...arguments),this.endpoint="tv/schedule",this.model=new Ie}getCurrentVideo(t=0){let e=this.getTimeData(t);return this.at(e.index)}getTimeForCurrentVideo(t=0){return this.getTimeData(t).time}flagCurrentVideo(t=""){let e=this.getCurrentVideo();return this.remove(e),console.log("@todo Flagging current video",t),this.getCurrentVideo()}setChannel(t){this.setQueryParams({channel:t})}getSecondsSinceMidnight(){let t=Ue.getDate(),e=new Date;return e.setHours(0,0,0,0),(t.getTime()-e.getTime())/1e3}getTimeData(t=0){t||(t=this.getSecondsSinceMidnight());let e,r=0,n=0,i=0;for(i;i<this.length&&(e=this.at(i),r=e.getDuration(),n+=r,!(n>t));i++);return{duration:r,index:i,time:r-(n-t)}}};var sn={};g(sn,{GameType:()=>xu});var xu;(function(s){s.All="",s.Billiards="billiards",s.ChalkySticks="",s.EightBall="8-ball",s.NineBall="9-ball",s.OnePocket="1-pocket",s.Snooker="snooker",s.StraightPool="straight",s.TenBall="10-ball",s.TrickShots="trick"})(xu||(xu={}));var rn={};g(rn,{Live:()=>jh,Schedule:()=>Wh});var jh={};g(jh,{collection:()=>jU,model:()=>zU});function zU(s={}){return new Ie(void 0,Object.assign({baseUrl:I.API_URL_V3},s))}function jU(s={}){return new mu(Object.assign({baseUrl:I.API_URL_V3},s))}var Wh={};g(Wh,{collection:()=>QU,model:()=>WU});function WU(s={}){return new Ie(void 0,Object.assign({baseUrl:I.API_URL_V3},s))}function QU(s={},t=xu.ChalkySticks){let e=new gu(Object.assign({baseUrl:I.API_URL_V3,limit:48},s));return e.setChannel(t),e}var Vg={};g(Vg,{Collection:()=>Pe,Core:()=>En,Enum:()=>yi,Factory:()=>wi,Model:()=>ue});var Pe={};g(Pe,{Venue:()=>Mu,VenueDetail:()=>yu,VenueHour:()=>wu});var ue={};g(ue,{Venue:()=>nn,VenueDetail:()=>vu,VenueHour:()=>bu});var nn=class extends k.Base{constructor(){super(...arguments),this.endpoint="venues",this.fields=["id","name","slug","description","website","phone","notes","status","address","city","state","country","zip","type","lat","long","created_at","updated_at"]}async checkin(){let t=this.clone();t.endpoint=`${this.endpoint}/${this.id}/checkin`,t.setId("");let e=await t.post();return this.set(e.attributes),this}get checkins(){return this.hasMany("checkins",V.User)}get details(){return this.hasMany("details",yu)}get hours(){return this.hasMany("hours",wu)}get media(){let t=this.hasMany("media",V.Media);return t.useModifiedEndpoint(this),t}get meta(){return this.hasMany("meta",V.Meta)}isOpenNow(t=""){return this.hours.isOpenNow(t)}getAddress(){return this.attr("address")}getCity(){return this.attr("city")}getCountry(){return this.attr("country")}getCreatedAt(){return this.attr("created_at")}getDescription(){return this.attr("description")}getDistance(t,e,r="km"){let n=u=>u*Math.PI/180,i=r==="km"?6371:3958.8,a=n(t-this.getLatitude()),f=n(e-this.getLongitude()),p=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n(this.getLatitude()))*Math.cos(n(t))*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p));return i*o}getFullAddress(){return[this.getAddress(),this.getCity(),this.getState(),this.getZip(),this.getCountry()].filter(Boolean).join(", ")}getLatitude(){return parseFloat(this.attr("lat"))}getLongitude(){return parseFloat(this.attr("lon"))}getName(){return this.attr("name")}getNotes(){return this.attr("notes")}getRating(){var r;let t=((r=this.details.findWhere({key:"google-rating"}))==null?void 0:r.getValue())||"0.0";return parseFloat(t)}getPhone(){return this.attr("phone")}getSlug(){return this.attr("slug")}getState(){return this.attr("state")}getStatus(){return parseFloat(this.attr("status"))}getType(){return this.attr("type")}getUpdatedAt(){return this.attr("updated_at")}getWebsite(){return this.attr("website")}getZip(){return this.attr("zip")}};var vu=class extends k.Base{constructor(){super(...arguments),this.fields=["id","group","key","value","subgroup"]}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}};var ae=class ae extends k.Base{constructor(){super(...arguments),this.fields=["id","group","key","value"]}static getDefaultTimezone(){return this.defaultTimezone}static setDefaultTimezone(t){this.defaultTimezone=t}static detectTimezone(){return typeof Intl<"u"&&Intl.DateTimeFormat&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}getGroup(){return this.attr("group")}getKey(){return this.attr("key")}getValue(){return this.attr("value")}isClosed(){return this.getValue().toLowerCase().includes("closed")}getOpeningTime(t=""){if(this.isClosed())return null;let e=this.getValue().split("\u2013");return e.length<2?null:this.parseTime(e[0],t)}getClosingTime(t=""){if(this.isClosed())return null;let e=this.getValue().split("\u2013");if(e.length<2)return null;let r=this.parseTime(e[1],t);return r?this.isAMTime(e[1])?r.plus({days:1}):r:null}isOpen(t="",e=E.now()){if(this.isClosed())return!1;let r=this.getOpeningTime(t),n=this.getClosingTime(t);return!r||!n?!1:e<r&&e<n||e>r&&e<n}opensSoon(t=30,e,r=E.now()){if(this.isClosed())return!1;let n=e||ae.defaultTimezone,i=this.getOpeningTime(n);return i?i>=r&&i.diff(r,"minutes").minutes<=t:!1}closesSoon(t=30,e,r=E.now()){if(this.isClosed())return!1;let n=e||ae.defaultTimezone,i=this.getClosingTime(n);return i?i>r&&i.diff(r,"minutes").minutes<=t:!1}opensLaterToday(t,e=E.now()){if(this.isClosed())return!1;let r=t||ae.defaultTimezone,n=this.getOpeningTime(r);return n?e<n&&n.startOf("day").equals(e.startOf("day")):!1}closesLaterToday(t,e=E.now()){if(this.isClosed())return!1;let r=t||ae.defaultTimezone,n=this.getClosingTime(r),i=this.getOpeningTime(r);return!n||!i?!1:(n<i?n.plus({days:1}):n).startOf("day").equals(e.startOf("day"))}getTotalOpenDuration(t){if(this.isClosed())return null;let e=t||ae.defaultTimezone,r=this.getOpeningTime(e),n=this.getClosingTime(e);return!r||!n?null:n.diff(r)}hasLateNightHours(t){let e=this.getValue().split("\u2013");return e.length<2?!1:this.isAMTime(e[1])}formatHours(t="h:mm a",e){if(this.isClosed())return"Closed";let r=e||ae.defaultTimezone,n=this.getOpeningTime(r),i=this.getClosingTime(r);return!n||!i?"Hours unavailable":`${n.toFormat(t)} \u2013 ${i.toFormat(t)}`}parseTime(t,e){e||(e=ae.defaultTimezone);let r=t.replace(//g,"").trim();r=r.replace(/([AP]M)$/i," $1");let n=E.fromFormat(r,"h:mm a",{zone:e});return n.isValid?n:null}isAMTime(t){return t.trim().toUpperCase().includes("AM")}getOperatingDay(t,e=E.now()){if(this.isClosed())return null;let r=t||ae.defaultTimezone,n=this.getOpeningTime(r),i=this.getClosingTime(r);return!n||!i?null:e.hour<6&&this.hasLateNightHours()||n.hasSame(e,"day")?"today":"tomorrow"}};ae.defaultTimezone=ae.detectTimezone();var bu=ae;var Mu=class extends V.Base{constructor(){super(...arguments),this.endpoint="venues",this.model=new nn}async beforeFetch(){let t=this.getQueryParams(),e=t.lat||t.latitude,r=t.lon||t.longitude;if(e&&r){let n=se.Geolocation.simplifyCoordinates(e,r,100);this.unsetQueryParam("lat"),this.unsetQueryParam("lon"),this.setQueryParams(n),this.once("parse:after",()=>this.sort({key:"distance"}))}}};var yu=class extends V.Base{constructor(){super(...arguments),this.model=new vu}};var Tu=class Tu extends V.Base{constructor(){super(...arguments),this.model=new bu}static getDefaultTimezone(){return this.defaultTimezone}static setDefaultTimezone(t){this.defaultTimezone=t}static detectTimezone(){return typeof Intl<"u"&&Intl.DateTimeFormat&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}getHoursForDay(t){return this.models.find(e=>e.getKey().toLowerCase()===t.toLowerCase())||null}getTodayHours(t=""){let e=new Date().toLocaleString("en-US",{timeZone:t||Tu.defaultTimezone,weekday:"long"}).toLowerCase();return this.getHoursForDay(e)}hasHours(){return this.models.length>0}isOpenNow(t="",e=E.now()){if(this.hasHours()===!1)return!0;let r=this.getTodayHours(t);return r?r.isOpen(t,e):!1}isOpenToday(t=""){if(this.hasHours()===!1)return!0;let e=this.getTodayHours(t);return e?!e.isClosed():!1}getNextOpening(t=""){let e=[...this.models].sort((n,i)=>n.getKey().toLowerCase().localeCompare(i.getKey().toLowerCase())),r=e.findIndex(n=>{var i;return n.getKey().toLowerCase()===((i=this.getTodayHours(t))==null?void 0:i.getKey().toLowerCase())});if(r===-1)return null;for(let n=0;n<e.length;n++){let i=(r+n)%e.length,a=e[i];if(!a.isClosed()&&n>0){let f=a.getOpeningTime(t);return f?{day:a.getKey(),time:f}:null}}return null}getOpenDays(){return this.models.filter(t=>!t.isClosed()).map(t=>t.getKey())}hoursUntilClose(){let t=this.getTodayHours();if(!t)return 0;let e=t.getClosingTime();if(!e)return 0;let r=E.now(),n=e.diff(r,"hours").as("hours");return n>0?n:0}};Tu.defaultTimezone=Tu.detectTimezone();var wu=Tu;var yi={};g(yi,{VenueType:()=>Bg});var Bg;(function(s){s.Bar="bar",s.Hall="hall",s.Hotel="hotel"})(Bg||(Bg={}));var wi={};g(wi,{Venue:()=>Qh});var Qh={};g(Qh,{collection:()=>GU,model:()=>YU});function YU(s={}){return new nn(void 0,Object.assign({baseUrl:D.API_URL_V3},s))}function GU(s={}){return new Mu(Object.assign({baseUrl:D.API_URL_V3},s))}var Ng;(m=>{let s;(_t=>(_t.Advertisement=V.Advertisement,_t.Beacon=ds.Beacon,_t.Content=V.Content,_t.Diagram=Ar.Diagram,_t.Media=V.Media,_t.Meta=V.Meta,_t.Player=ds.Player,_t.Rulebook=V.Rulebook,_t.Schedule=Fs.Schedule,_t.Statistic=V.Statistic,_t.User=V.User,_t.UserMedia=Tr.UserMedia,_t.Venue=Pe.Venue,_t.VenueDetail=Pe.VenueDetail,_t.VenueHour=Pe.VenueHour,_t.VenueMedia=Tr.VenueMedia,_t.Wallet=V.Wallet))(s=m.Collection||(m.Collection={}));let t;(Ft=>(Ft.Achievement=te.Achievement,Ft.ContentMediaType=te.ContentMediaType,Ft.ContentType=te.ContentType,Ft.Currency=te.Currency,Ft.GameType=sn.GameType,Ft.MediaGroup=te.MediaGroup,Ft.MediaType=te.MediaType,Ft.ProductType=te.ProductType,Ft.VenueType=yi.VenueType))(t=m.Enum||(m.Enum={}));let e;(Ct=>(Ct.Advertisement=ee.Advertisement,Ct.Authentication=gn.Authentication,Ct.Beacon=Wr.Beacon,Ct.Content=ee.Content,Ct.Diagram=si.Diagram,Ct.Geocode=ee.Geocode,Ct.Live=rn.Live,Ct.Player=Wr.Player,Ct.Rulebook=ee.Rulebook,Ct.Schedule=rn.Schedule,Ct.Statistic=ee.Statistic,Ct.User=ee.User,Ct.UserMedia=Yn.UserMedia,Ct.Venue=wi.Venue,Ct.VenueMedia=Yn.VenueMedia,Ct.Wallet=ee.Wallet))(e=m.Factory||(m.Factory={}));let r;(Tt=>(Tt.Advertisement=k.Advertisement,Tt.Authentication=Ts.Authentication,Tt.Base=Zs.Model.Base,Tt.Beacon=Oe.Beacon,Tt.Content=k.Content,Tt.Diagram=Ls.Diagram,Tt.Geocode=k.Geocode,Tt.Jwt=Ts.Jwt,Tt.Media=k.Media,Tt.Meta=k.Meta,Tt.Player=Oe.Player,Tt.Rulebook=k.Rulebook,Tt.Schedule=De.Schedule,Tt.Statistic=k.Statistic,Tt.User=Zs.Model.User,Tt.Venue=ue.Venue,Tt.VenueDetail=ue.VenueDetail,Tt.VenueHour=ue.VenueHour,Tt.Wallet=k.Wallet))(r=m.Model||(m.Model={})),m.Authentication=lf,m.Constants=D,m.Core=En,m.Environment=Gt,m.Exception=sr,m.Pad=Pm,m.Players=cg,m.TV=Fg,m.Utility=se,m.Venues=Vg})(Ng||(Ng={}));var xY=Ng;export{xY as default};
//# sourceMappingURL=chalkysticks.js.map
